!function(){"use strict";function t(s){this.options=e.extend({},i.defaults,t.defaults,s),this.element=this.options.element,this.$element=e(this.element),this.createWrapper(),this.createWaypoint()}var e=window.jQuery,i=window.Waypoint;t.prototype.createWaypoint=function(){var t=this.options.handler;this.waypoint=new i(e.extend({},this.options,{element:this.wrapper,handler:e.proxy(function(e){{var i=this.options.direction.indexOf(e)>-1;i?this.$element.outerHeight(!0):""}this.$element.toggleClass(this.options.stuckClass,i),t&&t.call(this,e)},this)}))},t.prototype.createWrapper=function(){this.options.wrapper&&this.$element.wrap(this.options.wrapper),this.$wrapper=this.$element.parent(),this.wrapper=this.$wrapper[0]},t.prototype.destroy=function(){this.$element.parent()[0]===this.wrapper&&(this.waypoint.destroy(),this.$element.removeClass(this.options.stuckClass),this.options.wrapper&&this.$element.unwrap())},t.defaults={wrapper:'<div class="sticky-wrapper" />',stuckClass:"stuck",direction:"down right"},i.Sticky=t}(),angular.module("rzModule",[]).run(["$templateCache",function(t){"use strict";var e='<span class="rz-bar"></span><span class="rz-bar rz-selection"></span><span class="rz-pointer"></span><span class="rz-pointer"></span><span class="rz-bubble rz-limit"></span><span class="rz-bubble rz-limit"></span><span class="rz-bubble"></span><span class="rz-bubble"></span><span class="rz-bubble"></span>';t.put("rzSliderTpl.html",e)}]).value("throttle",function(t,e,i){"use strict";var s,n,a,r=Date.now||function(){return(new Date).getTime()},o=null,l=0;i=i||{};var h=function(){l=i.leading===!1?0:r(),o=null,a=t.apply(s,n),s=n=null};return function(){var c=r();l||i.leading!==!1||(l=c);var u=e-(c-l);return s=this,n=arguments,0>=u?(clearTimeout(o),o=null,l=c,a=t.apply(s,n),s=n=null):o||i.trailing===!1||(o=setTimeout(h,u)),a}}).factory("RzSlider",["$timeout","$document","$window","throttle",function(t,e,i,s){"use strict";var n=function(t,e,i){this.scope=t,this.attributes=i,this.sliderElem=e,this.range=void 0!==i.rzSliderHigh&&void 0!==i.rzSliderModel,this.handleHalfWidth=0,this.alwaysShowBar=!!i.rzSliderAlwaysShowBar,this.maxLeft=0,this.precision=0,this.step=0,this.tracking="",this.minValue=0,this.maxValue=0,this.hideLimitLabels=!!i.rzSliderHideLimitLabels,this.presentOnly="true"===i.rzSliderPresentOnly,this.valueRange=0,this.initHasRun=!1,this.customTrFn=this.scope.rzSliderTranslate()||function(t){return String(t)},this.deRegFuncs=[],this.fullBar=null,this.selBar=null,this.minH=null,this.maxH=null,this.flrLab=null,this.ceilLab=null,this.minLab=null,this.maxLab=null,this.cmbLab=null,this.init()};return n.prototype={init:function(){var e,n,a,r=angular.bind(this,this.calcViewDimensions),o=this;this.initElemHandles(),this.calcViewDimensions(),this.setMinAndMax(),this.precision=void 0===this.scope.rzSliderPrecision?0:+this.scope.rzSliderPrecision,this.step=void 0===this.scope.rzSliderStep?1:+this.scope.rzSliderStep,t(function(){o.updateCeilLab(),o.updateFloorLab(),o.initHandles(),o.presentOnly||o.bindEvents()}),a=this.scope.$on("reCalcViewDimensions",r),this.deRegFuncs.push(a),angular.element(i).on("resize",r),this.initHasRun=!0,e=s(function(){o.setMinAndMax(),o.updateLowHandle(o.valueToOffset(o.scope.rzSliderModel)),o.updateSelectionBar(),o.range&&o.updateCmbLabel()},350,{leading:!1}),n=s(function(){o.setMinAndMax(),o.updateHighHandle(o.valueToOffset(o.scope.rzSliderHigh)),o.updateSelectionBar(),o.updateCmbLabel()},350,{leading:!1}),this.scope.$on("rzSliderForceRender",function(){o.resetLabelsValue(),e(),o.range&&n(),o.resetSlider()}),a=this.scope.$watch("rzSliderModel",function(t,i){t!==i&&e()}),this.deRegFuncs.push(a),a=this.scope.$watch("rzSliderHigh",function(t,e){t!==e&&n()}),this.deRegFuncs.push(a),this.scope.$watch("rzSliderFloor",function(t,e){t!==e&&o.resetSlider()}),this.deRegFuncs.push(a),a=this.scope.$watch("rzSliderCeil",function(t,e){t!==e&&o.resetSlider()}),this.deRegFuncs.push(a),this.scope.$on("$destroy",function(){o.minH.off(),o.maxH.off(),angular.element(i).off("resize",r),o.deRegFuncs.map(function(t){t()})})},resetSlider:function(){this.setMinAndMax(),this.calcViewDimensions(),this.updateCeilLab(),this.updateFloorLab()},resetLabelsValue:function(){this.minLab.rzsv=void 0,this.maxLab.rzsv=void 0},initHandles:function(){this.updateLowHandle(this.valueToOffset(this.scope.rzSliderModel)),this.range&&(this.updateHighHandle(this.valueToOffset(this.scope.rzSliderHigh)),this.updateCmbLabel()),this.updateSelectionBar()},translateFn:function(t,e,i){i=void 0===i?!0:i;var s=String(i?this.customTrFn(t):t),n=!1;(void 0===e.rzsv||e.rzsv.length!==s.length||e.rzsv.length>0&&0===e.rzsw)&&(n=!0,e.rzsv=s),e.text(s),n&&this.getWidth(e)},setMinAndMax:function(){this.minValue=this.scope.rzSliderFloor?+this.scope.rzSliderFloor:this.scope.rzSliderFloor=0,this.scope.rzSliderCeil?this.maxValue=+this.scope.rzSliderCeil:this.scope.rzSliderCeil=this.maxValue=this.range?this.scope.rzSliderHigh:this.scope.rzSliderModel,this.scope.rzSliderStep&&(this.step=+this.scope.rzSliderStep),this.valueRange=this.maxValue-this.minValue},initElemHandles:function(){angular.forEach(this.sliderElem.children(),function(t,e){var i=angular.element(t);switch(e){case 0:this.fullBar=i;break;case 1:this.selBar=i;break;case 2:this.minH=i;break;case 3:this.maxH=i;break;case 4:this.flrLab=i;break;case 5:this.ceilLab=i;break;case 6:this.minLab=i;break;case 7:this.maxLab=i;break;case 8:this.cmbLab=i}},this),this.fullBar.rzsl=0,this.selBar.rzsl=0,this.minH.rzsl=0,this.maxH.rzsl=0,this.flrLab.rzsl=0,this.ceilLab.rzsl=0,this.minLab.rzsl=0,this.maxLab.rzsl=0,this.cmbLab.rzsl=0,this.hideLimitLabels&&(this.flrLab.rzAlwaysHide=!0,this.ceilLab.rzAlwaysHide=!0,this.hideEl(this.flrLab),this.hideEl(this.ceilLab)),this.range===!1&&(this.cmbLab.remove(),this.maxLab.remove(),this.maxH.rzAlwaysHide=!0,this.maxH[0].style.zIndex="-1000",this.hideEl(this.maxH)),this.range===!1&&this.alwaysShowBar===!1&&(this.maxH.remove(),this.selBar.remove())},calcViewDimensions:function(){var t=this.getWidth(this.minH);this.handleHalfWidth=t/2,this.barWidth=this.getWidth(this.fullBar),this.maxLeft=this.barWidth-t,this.getWidth(this.sliderElem),this.sliderElem.rzsl=this.sliderElem[0].getBoundingClientRect().left,this.initHasRun&&(this.updateCeilLab(),this.initHandles())},updateCeilLab:function(){this.translateFn(this.scope.rzSliderCeil,this.ceilLab),this.setLeft(this.ceilLab,this.barWidth-this.ceilLab.rzsw),this.getWidth(this.ceilLab)},updateFloorLab:function(){this.translateFn(this.scope.rzSliderFloor,this.flrLab),this.getWidth(this.flrLab)},updateHandles:function(t,e){return"rzSliderModel"===t?(this.updateLowHandle(e),this.updateSelectionBar(),void(this.range&&this.updateCmbLabel())):"rzSliderHigh"===t?(this.updateHighHandle(e),this.updateSelectionBar(),void(this.range&&this.updateCmbLabel())):(this.updateLowHandle(e),this.updateHighHandle(e),this.updateSelectionBar(),void this.updateCmbLabel())},updateLowHandle:function(t){var e=Math.abs(this.minH.rzsl-t);0>=e&&1>e||(this.setLeft(this.minH,t),this.translateFn(this.scope.rzSliderModel,this.minLab),this.setLeft(this.minLab,t-this.minLab.rzsw/2+this.handleHalfWidth),this.shFloorCeil())},updateHighHandle:function(t){this.setLeft(this.maxH,t),this.translateFn(this.scope.rzSliderHigh,this.maxLab),this.setLeft(this.maxLab,t-this.maxLab.rzsw/2+this.handleHalfWidth),this.shFloorCeil()},shFloorCeil:function(){var t=!1,e=!1;this.minLab.rzsl<=this.flrLab.rzsl+this.flrLab.rzsw+5?(t=!0,this.hideEl(this.flrLab)):(t=!1,this.showEl(this.flrLab)),this.minLab.rzsl+this.minLab.rzsw>=this.ceilLab.rzsl-this.handleHalfWidth-10?(e=!0,this.hideEl(this.ceilLab)):(e=!1,this.showEl(this.ceilLab)),this.range&&(this.maxLab.rzsl+this.maxLab.rzsw>=this.ceilLab.rzsl-10?this.hideEl(this.ceilLab):e||this.showEl(this.ceilLab),this.maxLab.rzsl<=this.flrLab.rzsl+this.flrLab.rzsw+this.handleHalfWidth?this.hideEl(this.flrLab):t||this.showEl(this.flrLab))},updateSelectionBar:function(){this.setWidth(this.selBar,Math.abs(this.maxH.rzsl-this.minH.rzsl)),this.setLeft(this.selBar,this.range?this.minH.rzsl+this.handleHalfWidth:0)},updateCmbLabel:function(){var t,e;this.minLab.rzsl+this.minLab.rzsw+10>=this.maxLab.rzsl?(this.customTrFn?(t=this.customTrFn(this.scope.rzSliderModel),e=this.customTrFn(this.scope.rzSliderHigh)):(t=this.scope.rzSliderModel,e=this.scope.rzSliderHigh),this.translateFn(t+" - "+e,this.cmbLab,!1),this.setLeft(this.cmbLab,this.selBar.rzsl+this.selBar.rzsw/2-this.cmbLab.rzsw/2),this.hideEl(this.minLab),this.hideEl(this.maxLab),this.showEl(this.cmbLab)):(this.showEl(this.maxLab),this.showEl(this.minLab),this.hideEl(this.cmbLab))},roundStep:function(t){var e=this.step,i=+((t-this.minValue)%e).toFixed(3),s=i>e/2?t+e-i:t-i;return s=s.toFixed(this.precision),+s},hideEl:function(t){return t.css({opacity:0})},showEl:function(t){return t.rzAlwaysHide?t:t.css({opacity:1})},setLeft:function(t,e){return t.rzsl=e,t.css({left:e+"px"}),e},getWidth:function(t){var e=t[0].getBoundingClientRect();return t.rzsw=e.right-e.left,t.rzsw},setWidth:function(t,e){return t.rzsw=e,t.css({width:e+"px"}),e},valueToOffset:function(t){return(t-this.minValue)*this.maxLeft/this.valueRange},offsetToValue:function(t){return t/this.maxLeft*this.valueRange+this.minValue},bindEvents:function(){this.minH.on("mousedown",angular.bind(this,this.onStart,this.minH,"rzSliderModel")),this.range&&this.maxH.on("mousedown",angular.bind(this,this.onStart,this.maxH,"rzSliderHigh")),this.minH.on("touchstart",angular.bind(this,this.onStart,this.minH,"rzSliderModel")),this.range&&this.maxH.on("touchstart",angular.bind(this,this.onStart,this.maxH,"rzSliderHigh"))},onStart:function(t,i,s){var n,a,r=this.getEventNames(s);s.stopPropagation(),s.preventDefault(),""===this.tracking&&(this.calcViewDimensions(),this.tracking=i,t.addClass("rz-active"),n=angular.bind(this,this.onMove,t),a=angular.bind(this,this.onEnd,n),e.on(r.moveEvent,n),e.one(r.endEvent,a))},onMove:function(t,e){var i,s,n,a;return i="clientX"in e?e.clientX:void 0===e.originalEvent?e.touches[0].clientX:e.originalEvent.touches[0].clientX,s=this.sliderElem.rzsl,n=i-s-this.handleHalfWidth,0>=n?void(0!==t.rzsl&&(this.scope[this.tracking]=this.minValue,this.updateHandles(this.tracking,0),this.scope.$apply())):n>=this.maxLeft?void(t.rzsl!==this.maxLeft&&(this.scope[this.tracking]=this.maxValue,this.updateHandles(this.tracking,this.maxLeft),this.scope.$apply())):(a=this.offsetToValue(n),a=this.roundStep(a),n=this.valueToOffset(a),this.range&&("rzSliderModel"===this.tracking&&a>=this.scope.rzSliderHigh?(this.scope[this.tracking]=this.scope.rzSliderHigh,this.updateHandles(this.tracking,this.maxH.rzsl),this.tracking="rzSliderHigh",this.minH.removeClass("rz-active"),this.maxH.addClass("rz-active")):"rzSliderHigh"===this.tracking&&a<=this.scope.rzSliderModel&&(this.scope[this.tracking]=this.scope.rzSliderModel,this.updateHandles(this.tracking,this.minH.rzsl),this.tracking="rzSliderModel",this.maxH.removeClass("rz-active"),this.minH.addClass("rz-active"))),void(this.scope[this.tracking]!==a&&(this.scope[this.tracking]=a,this.updateHandles(this.tracking,n),this.scope.$apply())))},onEnd:function(t,i){var s=this.getEventNames(i).moveEvent;this.minH.removeClass("rz-active"),this.maxH.removeClass("rz-active"),e.off(s,t),this.scope.$emit("slideEnded"),this.tracking=""},getEventNames:function(t){var e={moveEvent:"",endEvent:""};return t.touches||void 0!==t.originalEvent&&t.originalEvent.touches?(e.moveEvent="touchmove",e.endEvent="touchend"):(e.moveEvent="mousemove",e.endEvent="mouseup"),e}},n}]).directive("rzslider",["RzSlider",function(t){"use strict";return{restrict:"E",scope:{rzSliderFloor:"=?",rzSliderCeil:"=?",rzSliderStep:"@",rzSliderPrecision:"@",rzSliderModel:"=?",rzSliderHigh:"=?",rzSliderTranslate:"&",rzSliderHideLimitLabels:"=?",rzSliderAlwaysShowBar:"=?",rzSliderPresentOnly:"@"},templateUrl:function(t,e){return e.rzSliderTplUrl||"rzSliderTpl.html"},link:function(e,i,s){return new t(e,i,s)}}}]),!function(){function t(t,e,i){"undefined"==typeof i&&(i=e,optionsValues=void 0);var s="undefined"!=typeof t?t:e;if("undefined"==typeof s)return null;if("function"==typeof s){var n=[i];return i.geography&&(n=[i.geography,i.data]),s.apply(null,n)}return s}function e(t,e,i){return this.svg=p.select(t).append("svg").attr("width",i||t.offsetWidth).attr("data-width",i||t.offsetWidth).attr("class","datamap").attr("height",e||t.offsetHeight).style("overflow","hidden"),this.options.responsive&&(p.select(this.options.element).style({position:"relative","padding-bottom":"60%"}),p.select(this.options.element).select("svg").style({position:"absolute",width:"100%",height:"100%"}),p.select(this.options.element).select("svg").select("g").selectAll("path").style("vector-effect","non-scaling-stroke")),this.svg}function i(t,e){var i,s,n=e.width||t.offsetWidth,a=e.height||t.offsetHeight,r=this.svg;return e&&"undefined"==typeof e.scope&&(e.scope="world"),"usa"===e.scope?i=p.geo.albersUsa().scale(n).translate([n/2,a/2]):"world"===e.scope&&(i=p.geo[e.projection]().scale((n+1)/2/Math.PI).translate([n/2,a/("mercator"===e.projection?1.45:1.8)])),"orthographic"===e.projection&&(r.append("defs").append("path").datum({type:"Sphere"}).attr("id","sphere").attr("d",s),r.append("use").attr("class","stroke").attr("xlink:href","#sphere"),r.append("use").attr("class","fill").attr("xlink:href","#sphere"),i.scale(250).clipAngle(90).rotate(e.projectionConfig.rotation)),s=p.geo.path().projection(i),{path:s,projection:i}}function s(){p.select(".datamaps-style-block").empty()&&p.select("head").append("style").attr("class","datamaps-style-block").html('.datamap path.datamaps-graticule { fill: none; stroke: #777; stroke-width: 0.5px; stroke-opacity: .5; pointer-events: none; } .datamap .labels {pointer-events: none;} .datamap path {stroke: #FFFFFF; stroke-width: 1px;} .datamaps-legend dt, .datamaps-legend dd { float: left; margin: 0 3px 0 0;} .datamaps-legend dd {width: 20px; margin-right: 6px; border-radius: 3px;} .datamaps-legend {padding-bottom: 20px; z-index: 1001; position: absolute; left: 4px; font-size: 12px; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;} .datamaps-hoverover {display: none; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; } .hoverinfo {padding: 4px; border-radius: 1px; background-color: #FFF; box-shadow: 1px 1px 5px #CCC; font-size: 12px; border: 1px solid #CCC; } .hoverinfo hr {border:1px dotted #CCC; }')}function n(e){var i=this.options.fills,s=this.options.data||{},n=this.options.geographyConfig,a=this.svg.select("g.datamaps-subunits");a.empty()&&(a=this.addLayer("datamaps-subunits",null,!0));var r=f.feature(e,e.objects[this.options.scope]).features;n.hideAntarctica&&(r=r.filter(function(t){return"ATA"!==t.id}));var o=a.selectAll("path.datamaps-subunit").data(r);o.enter().append("path").attr("d",this.path).attr("class",function(t){return"datamaps-subunit "+t.id}).attr("data-info",function(t){return JSON.stringify(s[t.id])}).style("fill",function(e){var n,a=s[e.id];return a&&a.fillKey&&(n=i[t(a.fillKey,{data:s[e.id],geography:e})]),"undefined"==typeof n&&(n=t(a&&a.fillColor,i.defaultFill,{data:s[e.id],geography:e})),n}).style("stroke-width",n.borderWidth).style("stroke",n.borderColor)}function a(){function e(){this.parentNode.appendChild(this)}var i=this.svg,s=this,n=this.options.geographyConfig;(n.highlightOnHover||n.popupOnHover)&&i.selectAll(".datamaps-subunit").on("mouseover",function(a){var r=p.select(this),o=s.options.data[a.id]||{};if(n.highlightOnHover){var l={fill:r.style("fill"),stroke:r.style("stroke"),"stroke-width":r.style("stroke-width"),"fill-opacity":r.style("fill-opacity")};r.style("fill",t(o.highlightFillColor,n.highlightFillColor,o)).style("stroke",t(o.highlightBorderColor,n.highlightBorderColor,o)).style("stroke-width",t(o.highlightBorderWidth,n.highlightBorderWidth,o)).style("fill-opacity",t(o.highlightFillOpacity,n.highlightFillOpacity,o)).attr("data-previousAttributes",JSON.stringify(l)),/((MSIE)|(Trident))/.test||e.call(this)}n.popupOnHover&&s.updatePopup(r,a,n,i)}).on("mouseout",function(){var t=p.select(this);if(n.highlightOnHover){var e=JSON.parse(t.attr("data-previousAttributes"));for(var i in e)t.style(i,e[i])}t.on("mousemove",null),p.selectAll(".datamaps-hoverover").style("display","none")})}function r(t,e){if(e=e||{},this.options.fills){var i="<dl>",s="";e.legendTitle&&(i="<h2>"+e.legendTitle+"</h2>"+i);for(var n in this.options.fills){if("defaultFill"===n){if(!e.defaultFillName)continue;s=e.defaultFillName}else s=e.labels&&e.labels[n]?e.labels[n]:n+": ";i+="<dt>"+s+"</dt>",i+='<dd style="background-color:'+this.options.fills[n]+'">&nbsp;</dd>'}i+="</dl>",p.select(this.options.element).append("div").attr("class","datamaps-legend").html(i)}}function o(){var t=p.geo.graticule();this.svg.insert("path",".datamaps-subunits").datum(t).attr("class","datamaps-graticule").attr("d",this.path)}function l(e,i,s){var n=this;if(this.svg,!i||i&&!i.slice)throw"Datamaps Error - arcs must be an array";for(var a=0;a<i.length;a++)i[a]=u(i[a],i[a].options),delete i[a].options;"undefined"==typeof s&&(s=g.arcConfig);var r=e.selectAll("path.datamaps-arc").data(i,JSON.stringify),o=p.geo.path().projection(n.projection);r.enter().append("svg:path").attr("class","datamaps-arc").style("stroke-linecap","round").style("stroke",function(e){return t(e.strokeColor,s.strokeColor,e)}).style("fill","none").style("stroke-width",function(e){return t(e.strokeWidth,s.strokeWidth,e)}).attr("d",function(e){var i=n.latLngToXY(t(e.origin.latitude,e),t(e.origin.longitude,e)),a=n.latLngToXY(t(e.destination.latitude,e),t(e.destination.longitude,e)),r=[(i[0]+a[0])/2,(i[1]+a[1])/2];if(s.greatArc){var l=p.geo.greatArc().source(function(e){return[t(e.origin.longitude,e),t(e.origin.latitude,e)]}).target(function(e){return[t(e.destination.longitude,e),t(e.destination.latitude,e)]});return o(l(e))}var h=t(e.arcSharpness,s.arcSharpness,e);return"M"+i[0]+","+i[1]+"S"+(r[0]+50*h)+","+(r[1]-75*h)+","+a[0]+","+a[1]}).transition().delay(100).style("fill",function(e){var i=this.getTotalLength();return this.style.transition=this.style.WebkitTransition="none",this.style.strokeDasharray=i+" "+i,this.style.strokeDashoffset=i,this.getBoundingClientRect(),this.style.transition=this.style.WebkitTransition="stroke-dashoffset "+t(e.animationSpeed,s.animationSpeed,e)+"ms ease-out",this.style.strokeDashoffset="0","none"}),r.exit().transition().style("opacity",0).remove()}function h(t,e){var i=this;e=e||{};var s=this.projection([-67.707617,42.722131]);this.svg.selectAll(".datamaps-subunit").attr("data-foo",function(n){var a=i.path.centroid(n),r=7.5,o=5;["FL","KY","MI"].indexOf(n.id)>-1&&(r=-2.5),"NY"===n.id&&(r=-1),"MI"===n.id&&(o=18),"LA"===n.id&&(r=13);var l,h;l=a[0]-r,h=a[1]+o;var c=["VT","NH","MA","RI","CT","NJ","DE","MD","DC"].indexOf(n.id);if(c>-1){var u=s[1];l=s[0],h=u+c*(2+(e.fontSize||12)),t.append("line").attr("x1",l-3).attr("y1",h-5).attr("x2",a[0]).attr("y2",a[1]).style("stroke",e.labelColor||"#000").style("stroke-width",e.lineWidth||1)}return t.append("text").attr("x",l).attr("y",h).style("font-size",(e.fontSize||10)+"px").style("font-family",e.fontFamily||"Verdana").style("fill",e.labelColor||"#000").text(n.id),"bar"})}function c(e,i,s){function n(t){return"undefined"!=typeof t&&"undefined"!=typeof t.latitude&&"undefined"!=typeof t.longitude}var a=this,r=this.options.fills,o=this.svg;if(!i||i&&!i.slice)throw"Datamaps Error - bubbles must be an array";var l=e.selectAll("circle.datamaps-bubble").data(i,JSON.stringify);l.enter().append("svg:circle").attr("class","datamaps-bubble").attr("cx",function(t){var e;return n(t)?e=a.latLngToXY(t.latitude,t.longitude):t.centered&&(e=a.path.centroid(o.select("path."+t.centered).data()[0])),e?e[0]:void 0}).attr("cy",function(t){var e;return n(t)?e=a.latLngToXY(t.latitude,t.longitude):t.centered&&(e=a.path.centroid(o.select("path."+t.centered).data()[0])),e?e[1]:void 0}).attr("r",0).attr("data-info",function(t){return JSON.stringify(t)}).style("stroke",function(e){return t(e.borderColor,s.borderColor,e)}).style("stroke-width",function(e){return t(e.borderWidth,s.borderWidth,e)}).style("fill-opacity",function(e){return t(e.fillOpacity,s.fillOpacity,e)}).style("fill",function(e){var i=r[t(e.fillKey,s.fillKey,e)];return i||r.defaultFill}).on("mouseover",function(e){var i=p.select(this);if(s.highlightOnHover){var n={fill:i.style("fill"),stroke:i.style("stroke"),"stroke-width":i.style("stroke-width"),"fill-opacity":i.style("fill-opacity")};i.style("fill",t(e.highlightFillColor,s.highlightFillColor,e)).style("stroke",t(e.highlightBorderColor,s.highlightBorderColor,e)).style("stroke-width",t(e.highlightBorderWidth,s.highlightBorderWidth,e)).style("fill-opacity",t(e.highlightFillOpacity,s.highlightFillOpacity,e)).attr("data-previousAttributes",JSON.stringify(n))}s.popupOnHover&&a.updatePopup(i,e,s,o)}).on("mouseout",function(){var t=p.select(this);if(s.highlightOnHover){var e=JSON.parse(t.attr("data-previousAttributes"));for(var i in e)t.style(i,e[i])}p.selectAll(".datamaps-hoverover").style("display","none")}).transition().duration(400).attr("r",function(e){return t(e.radius,s.radius,e)}),l.exit().transition().delay(s.exitDelay).attr("r",0).remove()}function u(t){return Array.prototype.slice.call(arguments,1).forEach(function(e){if(e)for(var i in e)null==t[i]&&(t[i]=e[i])}),t}function d(t){if("undefined"==typeof p||"undefined"==typeof f)throw new Error("Include d3.js (v3.0.3 or greater) and topojson on this page before creating a new map");return this.options=u(t,g),this.options.geographyConfig=u(t.geographyConfig,g.geographyConfig),this.options.projectionConfig=u(t.projectionConfig,g.projectionConfig),this.options.bubblesConfig=u(t.bubblesConfig,g.bubblesConfig),this.options.arcConfig=u(t.arcConfig,g.arcConfig),p.select(this.options.element).select("svg").length>0&&e.call(this,this.options.element,this.options.height,this.options.width),this.addPlugin("bubbles",c),this.addPlugin("legend",r),this.addPlugin("arc",l),this.addPlugin("labels",h),this.addPlugin("graticule",o),this.options.disableDefaultStyles||s(),this.draw()}var p=window.d3,f=window.topojson,g={scope:"world",responsive:!1,setProjection:i,projection:"equirectangular",dataType:"json",data:{},done:function(){},fills:{defaultFill:"#ABDDA4"},geographyConfig:{dataUrl:null,hideAntarctica:!0,borderWidth:1,borderColor:"#FDFDFD",popupTemplate:function(t){return'<div class="hoverinfo"><strong>'+t.properties.name+"</strong></div>"},popupOnHover:!0,highlightOnHover:!0,highlightFillColor:"#FC8D59",highlightBorderColor:"rgba(250, 15, 160, 0.2)",highlightBorderWidth:2},projectionConfig:{rotation:[97,0]},bubblesConfig:{borderWidth:2,borderColor:"#FFFFFF",popupOnHover:!0,radius:null,popupTemplate:function(t,e){return'<div class="hoverinfo"><strong>'+e.name+"</strong></div>"},fillOpacity:.75,animate:!0,highlightOnHover:!0,highlightFillColor:"#FC8D59",highlightBorderColor:"rgba(250, 15, 160, 0.2)",highlightBorderWidth:2,highlightFillOpacity:.85,exitDelay:100},arcConfig:{strokeColor:"#DD1C77",strokeWidth:1,arcSharpness:1,animationSpeed:600}};d.prototype.resize=function(){var t=this,e=t.options;if(e.responsive){var i="-webkit-transform"in document.body.style?"-webkit-":"-moz-transform"in document.body.style?"-moz-":"-ms-transform"in document.body.style?"-ms-":"",s=e.element.clientWidth,n=p.select(e.element).select("svg").attr("data-width");p.select(e.element).select("svg").selectAll("g").style(i+"transform","scale("+s/n+")")}},d.prototype.draw=function(){function t(t){e.options.dataUrl&&p[e.options.dataType](e.options.dataUrl,function(t){if("csv"===e.options.dataType&&t&&t.slice){for(var i={},s=0;s<t.length;s++)i[t[s].id]=t[s];t=i}Datamaps.prototype.updateChoropleth.call(e,t)}),n.call(e,t),a.call(e),(e.options.geographyConfig.popupOnHover||e.options.bubblesConfig.popupOnHover)&&(hoverover=p.select(e.options.element).append("div").attr("class","datamaps-hoverover").style("z-index",10001).style("position","absolute")),e.options.done(e)}var e=this,i=e.options,s=i.setProjection.apply(e,[i.element,i]);return this.path=s.path,this.projection=s.projection,i.geographyConfig.dataUrl?p.json(i.geographyConfig.dataUrl,function(i,s){if(i)throw new Error(i);e.customTopo=s,t(s)}):t(this[i.scope+"Topo"]||i.geographyConfig.dataJson),this},d.prototype.worldTopo="__WORLD__",d.prototype.usaTopo={type:"Topology",transform:{scale:[.03514630243024302,.005240860686068607],translate:[-178.123152,18.948267]},objects:{usa:{type:"GeometryCollection",geometries:[{type:"Polygon",id:"AL",arcs:[[0,1,2,3,4]],properties:{name:"Alabama"}},{type:"MultiPolygon",id:"AK",arcs:[[[5]],[[6]],[[7]],[[8]],[[9]],[[10]],[[11]],[[12]],[[13]],[[14]],[[15]],[[16]],[[17]],[[18]],[[19]],[[20]],[[21]],[[22]],[[23]],[[24]],[[25]],[[26]],[[27]],[[28]],[[29]],[[30]],[[31]],[[32]],[[33]],[[34]],[[35]],[[36]],[[37]],[[38]],[[39]],[[40]],[[41]],[[42]],[[43]]],properties:{name:"Alaska"}},{type:"Polygon",id:"AZ",arcs:[[44,45,46,47,48]],properties:{name:"Arizona"}},{type:"Polygon",id:"AR",arcs:[[49,50,51,52,53,54]],properties:{name:"Arkansas"}},{type:"Polygon",id:"CA",arcs:[[55,-47,56,57]],properties:{name:"California"}},{type:"Polygon",id:"CO",arcs:[[58,59,60,61,62,63]],properties:{name:"Colorado"}},{type:"Polygon",id:"CT",arcs:[[64,65,66,67]],properties:{name:"Connecticut"}},{type:"Polygon",id:"DE",arcs:[[68,69,70,71]],properties:{name:"Delaware"}},{type:"Polygon",id:"DC",arcs:[[72,73]],properties:{name:"District of Columbia"}},{type:"Polygon",id:"FL",arcs:[[74,75,-2]],properties:{name:"Florida"}},{type:"Polygon",id:"GA",arcs:[[76,77,-75,-1,78,79]],properties:{name:"Georgia"}},{type:"MultiPolygon",id:"HI",arcs:[[[80]],[[81]],[[82]],[[83]],[[84]]],properties:{name:"Hawaii"}},{type:"Polygon",id:"ID",arcs:[[85,86,87,88,89,90,91]],properties:{name:"Idaho"}},{type:"Polygon",id:"IL",arcs:[[92,93,94,95,96,97]],properties:{name:"Illinois"}},{type:"Polygon",id:"IN",arcs:[[98,99,-95,100,101]],properties:{name:"Indiana"}},{type:"Polygon",id:"IA",arcs:[[102,-98,103,104,105,106]],properties:{name:"Iowa"}},{type:"Polygon",id:"KS",arcs:[[107,108,-60,109]],properties:{name:"Kansas"}},{type:"Polygon",id:"KY",arcs:[[110,111,112,113,-96,-100,114]],properties:{name:"Kentucky"}},{type:"Polygon",id:"LA",arcs:[[115,116,117,-52]],properties:{name:"Louisiana"}},{type:"Polygon",id:"ME",arcs:[[118,119]],properties:{name:"Maine"}},{type:"MultiPolygon",id:"MD",arcs:[[[120]],[[-71,121,122,123,124,-74,125,126,127]]],properties:{name:"Maryland"}},{type:"Polygon",id:"MA",arcs:[[128,129,130,131,-68,132,133,134]],properties:{name:"Massachusetts"}},{type:"MultiPolygon",id:"MI",arcs:[[[-102,135,136]],[[137]],[[138,139]],[[140]]],properties:{name:"Michigan"}},{type:"Polygon",id:"MN",arcs:[[-107,141,142,143,144]],properties:{name:"Minnesota"}},{type:"Polygon",id:"MS",arcs:[[-4,145,-116,-51,146]],properties:{name:"Mississippi"}},{type:"Polygon",id:"MO",arcs:[[-97,-114,147,-55,148,-108,149,-104]],properties:{name:"Missouri"}},{type:"Polygon",id:"MT",arcs:[[150,151,-92,152,153]],properties:{name:"Montana"}},{type:"Polygon",id:"NE",arcs:[[-105,-150,-110,-59,154,155]],properties:{name:"Nebraska"}},{type:"Polygon",id:"NV",arcs:[[156,-48,-56,157,-88]],properties:{name:"Nevada"}},{type:"Polygon",id:"NH",arcs:[[-135,158,159,-120,160]],properties:{name:"New Hampshire"}},{type:"Polygon",id:"NJ",arcs:[[161,-69,162,163]],properties:{name:"New Jersey"}},{type:"Polygon",id:"NM",arcs:[[164,165,166,-45,-62]],properties:{name:"New Mexico"}},{type:"Polygon",id:"NY",arcs:[[-133,-67,167,-164,168,169,170]],properties:{name:"New York"}},{type:"Polygon",id:"NC",arcs:[[171,172,-80,173,174]],properties:{name:"North Carolina"}},{type:"Polygon",id:"ND",arcs:[[175,-154,176,-143]],properties:{name:"North Dakota"}},{type:"Polygon",id:"OH",arcs:[[177,-115,-99,-137,178,179]],properties:{name:"Ohio"}},{type:"Polygon",id:"OK",arcs:[[-149,-54,180,-165,-61,-109]],properties:{name:"Oklahoma"}},{type:"Polygon",id:"OR",arcs:[[-89,-158,-58,181,182]],properties:{name:"Oregon"}},{type:"Polygon",id:"PA",arcs:[[-163,-72,-128,183,-180,184,-169]],properties:{name:"Pennsylvania"}},{type:"MultiPolygon",id:"RI",arcs:[[[185,-130]],[[186,-65,-132]]],properties:{name:"Rhode Island"}},{type:"Polygon",id:"SC",arcs:[[187,-77,-173]],properties:{name:"South Carolina"}},{type:"Polygon",id:"SD",arcs:[[-142,-106,-156,188,-151,-176]],properties:{name:"South Dakota"}},{type:"Polygon",id:"TN",arcs:[[189,-174,-79,-5,-147,-50,-148,-113]],properties:{name:"Tennessee"}},{type:"Polygon",id:"TX",arcs:[[-53,-118,190,-166,-181]],properties:{name:"Texas"}},{type:"Polygon",id:"UT",arcs:[[191,-63,-49,-157,-87]],properties:{name:"Utah"}},{type:"Polygon",id:"VT",arcs:[[-134,-171,192,-159]],properties:{name:"Vermont"}},{type:"MultiPolygon",id:"VA",arcs:[[[193,-123]],[[120]],[[-126,-73,-125,194,-175,-190,-112,195]]],properties:{name:"Virginia"}},{type:"MultiPolygon",id:"WA",arcs:[[[-183,196,-90]],[[197]],[[198]]],properties:{name:"Washington"}},{type:"Polygon",id:"WV",arcs:[[-184,-127,-196,-111,-178]],properties:{name:"West Virginia"}},{type:"Polygon",id:"WI",arcs:[[199,-93,-103,-145,200,-140]],properties:{name:"Wisconsin"}},{type:"Polygon",id:"WY",arcs:[[-189,-155,-64,-192,-86,-152]],properties:{name:"Wyoming"}}]}},arcs:[[[2632,3060],[5,-164],[7,-242],[4,-53],[3,-30],[-2,-19],[4,-11],[-5,-25],[0,-24],[-2,-32],[2,-57],[-2,-51],[3,-52]],[[2649,2300],[-14,-1],[-59,0],[-1,-25],[6,-37],[-1,-31],[2,-16],[-4,-28]],[[2578,2162],[-4,-6],[-7,31],[-1,47],[-2,6],[-3,-36],[-1,-34],[-7,9]],[[2553,2179],[-2,291],[6,363],[4,209],[-3,20]],[[2558,3062],[24,1],[50,-3]],[[1324,6901],[1,32],[6,-19],[-1,-32],[-8,4],[2,15]],[[1317,6960],[5,-23],[-3,-33],[-2,11],[0,45]],[[1285,7153],[6,5],[3,-8],[-1,-28],[-6,-6],[-5,17],[3,20]],[[1267,7137],[12,-7],[3,-36],[13,-41],[4,-25],[0,-21],[3,-4],[1,-27],[5,-27],[0,-25],[3,8],[2,-19],[1,-74],[-3,-17],[-7,3],[-3,38],[-2,-3],[-6,28],[-2,-10],[-5,10],[1,-28],[5,7],[3,-10],[-2,-39],[-5,4],[-9,49],[-2,25],[1,26],[-7,-2],[0,20],[5,2],[5,18],[-2,31],[-6,7],[-1,50],[-2,25],[-4,-18],[-2,28],[4,14],[-3,32],[2,8]],[[1263,6985],[5,-12],[4,15],[4,-7],[-4,-28],[-6,8],[-3,24]],[[1258,7247],[-4,19],[5,13],[15,-18],[7,1],[5,-36],[9,-29],[-1,-22],[-5,-11],[-6,5],[-5,-14],[-6,9],[-7,-9],[-1,45],[0,30],[-5,1],[-1,16]],[[1252,7162],[-4,14],[-4,32],[0,24],[3,11],[4,-11],[0,20],[12,-35],[1,-33],[-4,-5],[-3,-37],[3,-11],[-3,-43],[-5,9],[0,-27],[-3,13],[-2,54],[5,25]],[[1207,7331],[8,38],[3,-16],[7,-13],[6,-2],[0,-30],[6,-99],[0,-85],[-1,-22],[-4,13],[-10,84],[-7,25],[3,20],[-3,48],[-8,39]],[[1235,7494],[10,-15],[5,2],[0,-14],[8,-52],[-5,8],[-2,-18],[6,-27],[2,-48],[-6,-13],[-2,-16],[-10,-35],[-3,1],[-1,37],[2,22],[-1,32],[-3,40],[0,21],[-2,51],[-4,22],[-1,38],[7,-36]],[[1203,7324],[4,0],[4,-35],[-2,-24],[-6,-5],[0,38],[0,26]],[[1207,7331],[-5,7],[-3,26],[-6,18],[-5,37],[-6,17],[1,30],[4,10],[1,26],[3,-11],[8,-1],[6,17],[8,-23],[-5,-26],[2,-9],[4,28],[10,-9],[5,-21],[-3,-38],[3,-3],[3,-50],[-7,-7],[-14,41],[0,-42],[-4,-17]],[[883,7871],[-12,-48],[-1,-19],[-9,-12],[2,29],[10,30],[7,34],[3,-14]],[[870,7943],[-2,-39],[-4,-41],[-6,14],[5,47],[7,19]],[[863,9788],[3,-8],[15,-9],[8,5],[10,0],[12,-7],[7,4],[7,-15],[12,-18],[16,-4],[5,10],[11,6],[4,14],[12,2],[0,-9],[7,5],[15,-15],[9,-24],[10,-11],[2,-11],[8,-2],[8,-18],[1,-11],[5,9],[6,-7],[0,-1783],[13,-16],[2,17],[14,-24],[8,30],[18,4],[-3,-52],[4,-17],[10,-17],[2,-27],[29,-101],[4,-63],[6,17],[12,31],[7,1],[3,23],[0,34],[5,0],[1,31],[9,7],[13,26],[13,-45],[-1,-27],[3,-27],[7,-7],[10,-40],[-1,-12],[4,-22],[12,-25],[19,-110],[3,-29],[6,-29],[8,-65],[9,-55],[-3,-23],[9,-9],[-2,-33],[7,-14],[1,-38],[7,2],[14,-40],[9,-7],[5,-19],[4,-5],[1,-19],[9,-5],[3,-23],[-4,-43],[1,-36],[4,-58],[-4,-15],[-6,-53],[-10,-39],[-3,20],[-4,-6],[-3,39],[1,17],[-3,20],[7,21],[-2,7],[-7,-26],[-3,17],[-4,-10],[-12,42],[4,46],[-8,-15],[0,-23],[-6,17],[-1,22],[4,24],[-1,24],[-6,-19],[-6,42],[-3,-8],[-2,36],[5,23],[6,0],[-2,28],[3,36],[-5,-1],[-9,32],[-6,37],[-15,27],[0,77],[-4,9],[1,31],[-5,9],[-8,42],[-2,22],[-12,7],[-14,56],[-6,132],[-3,-30],[1,-27],[6,-53],[-1,-8],[3,-43],[0,-28],[-6,6],[-4,31],[-6,6],[-8,-9],[0,45],[-5,38],[-5,-12],[-17,40],[-2,-11],[10,-13],[7,-31],[3,-1],[1,-25],[4,-30],[-10,-16],[-5,10],[0,-26],[-8,20],[-2,14],[-5,0],[-13,38],[-10,33],[-1,20],[-5,30],[-14,21],[-9,21],[-14,26],[-9,24],[1,26],[2,-9],[3,17],[-3,38],[4,21],[-2,9],[-7,-40],[-14,-26],[-18,10],[-14,24],[-1,18],[-7,-4],[-7,14],[-17,12],[-9,1],[-21,-10],[-8,-7],[-10,27],[-12,12],[-3,17],[-2,28],[-8,-2],[-3,-25],[-15,34],[-2,14],[-15,-27],[-7,-32],[-3,30],[3,17],[4,-5],[14,22],[-2,17],[-6,-8],[-3,22],[-6,3],[-6,55],[-3,-13],[-8,-8],[-3,8],[-3,-18],[-11,6],[-1,-20],[-7,-5],[-3,7],[2,36],[-3,-1],[-5,-38],[7,-12],[1,-27],[4,-30],[-3,-31],[-5,10],[-2,-15],[6,-7],[3,-41],[-8,-9],[-4,9],[-7,-12],[-3,10],[-9,-2],[0,16],[-4,-10],[-3,-20],[-3,18],[-5,-25],[2,-12],[-6,-15],[-6,-2],[-3,-20],[-6,-17],[-4,6],[-5,-21],[-4,1],[-8,-43],[-9,-3],[-3,14],[-5,-23],[-11,17],[2,33],[8,11],[4,-2],[2,13],[8,25],[0,21],[-11,-28],[-9,16],[-1,12],[5,48],[8,34],[1,29],[2,5],[1,30],[-4,34],[10,12],[19,48],[4,-19],[6,-5],[9,20],[-10,26],[-4,20],[-7,-2],[-5,9],[-2,-8],[-9,-14],[-4,-26],[-9,-6],[-9,-30],[-1,-20],[-7,-11],[-2,-22],[-5,-13],[-2,-39],[-10,-25],[5,-20],[-4,-29],[-9,-5],[-1,-38],[-8,-13],[-3,15],[-4,-29],[-5,-1],[1,-21],[-11,-13],[-2,-57],[12,-3],[10,-16],[3,-19],[-4,-30],[-7,-19],[-6,-1],[0,-17],[-4,-6],[1,-21],[-4,-31],[-9,-29],[-5,0],[-5,-11],[-5,2],[-4,-11],[2,-16],[-7,-8],[-2,-23],[-5,14],[-5,-45],[-9,4],[1,-24],[-6,6],[-3,-11],[0,-32],[-6,-50],[-10,-6],[-7,-23],[-2,-13],[-5,18],[-8,-48],[-2,13],[-5,-4],[-1,-27],[-5,-10],[-6,4],[-4,-27],[8,-9],[-9,-60],[-25,-20],[-6,-54],[-2,12],[1,33],[-5,6],[-6,-13],[-1,-14],[-10,-22],[-4,-25],[-1,18],[-2,-21],[-6,14],[-10,-33],[-8,2],[1,25],[-4,24],[-3,-20],[1,-21],[-11,-64],[-3,16],[-1,-24],[-8,4],[-1,38],[-4,8],[-2,-14],[4,-16],[-2,-27],[-5,-13],[-5,29],[-5,2],[-1,-11],[5,-17],[-9,-27],[6,-7],[0,-13],[-5,9],[-7,-25],[-15,1],[-7,-16],[0,-13],[-8,-15],[-6,6],[-2,35],[6,12],[4,43],[6,1],[13,28],[10,1],[4,-27],[3,20],[-1,23],[6,10],[7,0],[8,50],[10,45],[12,40],[15,18],[6,-9],[6,12],[1,-17],[-3,-19],[4,-14],[1,23],[7,2],[2,-15],[5,-5],[0,18],[-8,15],[0,11],[5,49],[6,28],[9,27],[15,24],[10,35],[5,-13],[4,5],[-1,22],[1,21],[8,44],[11,28],[8,38],[0,21],[7,148],[11,40],[-1,31],[-27,-45],[-8,6],[-2,18],[-5,9],[-1,21],[-4,-10],[-3,-32],[5,-41],[-6,-18],[-5,7],[-9,64],[-6,33],[-4,0],[-2,-24],[-3,-4],[-4,19],[-5,4],[-2,32],[-16,-37],[-13,-26],[-1,-14],[-11,-22],[-6,20],[5,23],[-1,54],[-4,57],[7,24],[-6,49],[-5,27],[-4,39],[-6,17],[-2,-34],[-7,-8],[-12,-22],[-14,-9],[-7,2],[-7,12],[-1,30],[-5,9],[-9,42],[-8,8],[-8,46],[6,21],[1,39],[-5,-8],[0,24],[2,19],[-6,18],[0,-19],[-7,8],[-1,32],[-6,4],[-3,22],[0,27],[-5,-12],[-1,26],[7,6],[-6,30],[10,2],[0,35],[2,24],[18,77],[4,23],[3,-5],[-2,33],[7,55],[6,22],[11,9],[8,-9],[12,-33],[8,4],[11,32],[11,49],[6,6],[1,-13],[13,0],[12,10],[11,52],[0,12],[-5,48],[-1,28],[-8,31],[-3,26],[8,-7],[8,22],[0,20],[-10,39],[-8,-30],[-7,5],[-6,-17],[-8,-4],[-2,-11],[-9,-17],[-2,-28],[-5,-12],[-2,34],[-5,7],[-4,-26],[-2,12],[-10,19],[-20,-1],[-14,-21],[-6,-3],[-11,13],[-22,14],[-6,12],[-3,19],[2,26],[-8,22],[2,24],[5,12],[-2,31],[-8,0],[-6,8],[-13,6],[-7,16],[-10,16],[-1,19],[16,27],[20,43],[15,27],[8,-15],[8,-3],[2,21],[-5,3],[-1,18],[20,29],[22,22],[12,2],[7,-7],[-4,-32],[2,-22],[-3,-15],[4,-26],[8,5],[10,-5],[11,6],[4,-10],[7,-2],[7,10],[8,-11],[9,42],[5,2],[5,-8],[2,24],[-12,11],[-11,-9],[1,31],[-8,34],[-10,10],[-2,30],[7,8],[9,-31],[-1,-24],[4,-18],[10,-22],[2,23],[-11,30],[5,54],[-4,10],[-11,-12],[-11,3],[-2,10],[-6,-10],[-24,23],[0,24],[-7,54],[-6,19],[-9,17],[-19,46],[-9,18],[-8,4],[-13,31],[-12,18],[-1,6],[9,10],[4,29],[1,59],[25,-4],[31,13],[8,11],[12,29],[12,45],[3,45],[5,38],[10,33],[5,24],[13,38],[2,-10],[11,-3],[16,20],[10,21],[24,64],[9,4],[1,-10],[9,7],[9,-2],[18,9],[17,28],[17,58],[7,13],[2,-10],[26,-24],[2,-17],[-9,-22],[-4,-1],[0,-29],[14,9],[0,16],[6,14],[2,-8],[5,33],[13,-30],[-2,-23],[8,-6],[5,-14],[7,22],[13,1],[7,7],[18,-7],[10,-8],[-5,-45],[17,-12],[2,-11],[16,-20],[1,9],[12,13],[11,-1],[0,-11],[7,-1],[7,15],[11,2],[9,-6],[11,-16],[5,3],[7,-22],[4,9],[7,-7],[5,-13]],[[717,7456],[-1,-8],[-9,13],[7,49],[6,4],[4,45],[5,-40],[4,14],[8,-22],[0,-31],[-11,-4],[-5,-13],[-8,-7]],[[688,7363],[8,25],[-8,6],[0,22],[6,14],[5,-10],[0,-22],[3,15],[0,32],[5,-15],[1,21],[5,-12],[5,0],[5,11],[7,-20],[0,-55],[9,4],[-6,-37],[-11,15],[4,-24],[-3,-20],[-6,10],[0,-38],[-8,-10],[-3,-16],[-5,15],[-6,-40],[-4,-4],[-5,-18],[-2,43],[-6,-23],[-1,13],[-6,14],[0,39],[-6,15],[4,45],[11,28],[7,-2],[1,-21]],[[671,7185],[-6,-39],[-2,6],[8,33]],[[640,7055],[4,-2],[-1,-40],[-8,6],[-1,13],[6,23]],[[519,6933],[-2,-41],[-9,-33],[5,51],[2,-5],[4,28]],[[501,6947],[5,0],[0,-20],[-5,-23],[-5,15],[-3,-14],[-2,35],[2,12],[8,-5]],[[451,6875],[1,-16],[-3,-11],[-3,18],[5,9]],[[447,8527],[-4,-19],[-2,16],[6,3]],[[436,6781],[6,-7],[-1,-16],[-5,1],[0,22]],[[358,6745],[2,-22],[-5,-10],[-1,23],[4,9]],[[352,6718],[-8,-21],[-2,14],[3,19],[7,-12]],[[335,7902],[6,7],[2,-14],[5,3],[6,-12],[1,-54],[-3,-18],[-7,-11],[-2,-18],[-11,20],[-5,-1],[-10,28],[-4,0],[-6,15],[-3,25],[4,7],[10,-7],[5,20],[5,2],[3,14],[4,-6]],[[334,6690],[5,-14],[-10,-36],[1,-6],[12,26],[0,-15],[-5,-17],[-8,-12],[-1,-18],[-8,-18],[-7,-1],[-5,-18],[-9,-16],[-5,17],[9,20],[3,-3],[8,16],[-2,19],[4,20],[6,-9],[1,12],[-7,4],[-4,14],[4,23],[11,13],[2,-26],[5,25]],[[266,6527],[10,37],[1,16],[4,17],[7,9],[3,-10],[1,-25],[-12,-27],[-6,-40],[-6,-13],[-2,36]],[[238,6477],[2,-19],[-8,-1],[-1,13],[7,7]],[[227,7303],[-4,-18],[-1,18],[5,0]],[[212,6440],[2,-18],[-5,-13],[-1,19],[4,12]],[[182,8542],[22,-28],[13,24],[6,-2],[5,-14],[2,-23],[11,-12],[4,-12],[15,-5],[8,-8],[-4,-28],[-7,6],[-8,-5],[-4,-13],[-4,-28],[-5,26],[-6,18],[-6,2],[-3,20],[-15,25],[-6,1],[-11,-22],[-7,11],[-4,23],[4,44]],[[162,6381],[0,-22],[-5,-4],[1,19],[4,7]],[[128,6335],[4,-8],[10,1],[1,-7],[-13,-9],[-2,23]],[[108,6360],[0,19],[4,7],[6,-19],[-2,-17],[-4,1],[1,-20],[-5,-2],[-12,-21],[-6,6],[2,15],[7,-2],[9,33]],[[47,6279],[5,3],[0,-24],[-6,3],[-8,-28],[-4,37],[4,1],[0,29],[5,1],[0,-21],[4,-1]],[[28,6296],[3,-9],[-2,-32],[-5,-10],[0,20],[4,31]],[[0,6291],[5,-1],[4,-23],[-4,-27],[-5,51]],[[9993,6496],[6,-13],[0,-19],[-11,-12],[-8,31],[0,15],[13,-2]],[[1966,3444],[-1,-1081]],[[1965,2363],[-57,0],[-34,71],[-73,150],[3,43]],[[1804,2627],[6,8],[1,16],[-1,36],[-4,1],[-2,71],[6,27],[0,28],[-1,45],[4,34],[4,12],[4,25],[-6,27],[-4,51],[-5,31],[0,24]],[[1806,3063],[2,26],[0,36],[-3,36],[-2,112],[11,7],[3,-23],[3,1],[3,33],[0,153]],[[1823,3444],[101,2],[42,-2]],[[2515,3253],[-1,-35],[-4,-11],[-1,-29],[-5,-31],[0,-46],[-3,-34],[-3,-5]],[[2498,3062],[2,-17],[-4,-14],[-2,-33],[-3,-8],[0,-38],[-5,-10],[0,-13],[-6,-31],[2,-21],[-5,-30],[-5,-59],[5,-25],[-2,-16],[1,-39],[-2,-26]],[[2474,2682],[-69,3],[-13,0]],[[2392,2685],[0,101],[-4,8],[-5,-9],[-3,18]],[[2380,2803],[1,335],[-5,211]],[[2376,3349],[4,0],[123,-1],[2,-36],[-4,-23],[-4,-36],[18,0]],[[1654,4398],[0,-331],[0,-241],[36,-171],[35,-169],[27,-137],[20,-101],[34,-185]],[[1804,2627],[-38,-18],[-30,-16],[-4,25],[0,40],[-2,47],[-4,33],[-9,46],[-12,43],[-2,-12],[-4,8],[1,18],[-5,39],[-7,-8],[-12,28],[-2,23],[-8,28],[-9,-1],[-7,13],[-10,-6],[-5,26],[1,53],[-1,8],[1,38],[-8,28],[0,39],[-3,2],[-4,33],[-4,8],[-1,20],[-11,79],[-5,23],[-1,61],[2,-5],[2,37],[-4,33],[-5,-4],[-7,30],[-2,24],[0,23],[-3,31],[0,50],[5,0],[-2,70],[-2,-7],[-1,-35],[-5,-7],[-7,26],[-1,45],[-4,35],[-6,22],[-3,25],[-9,50],[2,14],[-4,64],[2,35],[-3,54],[-7,52],[-7,29],[-2,35],[7,83],[2,29],[-2,22],[3,57],[-2,52],[-3,13],[1,42]],[[1534,4399],[28,1],[24,1],[38,-3],[30,0]],[[2107,4208],[57,0],[0,-191]],[[2164,4017],[1,-574]],[[2165,3443],[-28,1]],[[2137,3444],[-38,-1],[-72,0],[-15,1],[-46,0]],[[1966,3444],[0,223],[-1,21],[0,162],[0,357]],[[1965,4207],[32,1],[63,-1],[47,1]],[[3025,4400],[0,-113],[-2,-18]],[[3023,4269],[-2,3],[-12,-14],[-15,4],[-7,-26],[-7,-9],[-8,-22]],[[2972,4205],[-2,22],[7,21],[-2,16],[2,144]],[[2977,4408],[12,-2],[36,-3],[0,-3]],[[2922,3980],[-2,-23]],[[2920,3957],[-3,-13],[0,-30],[5,-29],[1,-47],[6,-49],[3,-2],[1,-66]],[[2933,3721],[-19,2],[-2,241]],[[2912,3964],[5,21],[5,-5]],[[2876,3786],[-2,27]],[[2874,3813],[2,12],[4,-19],[-4,-20]],[[2649,2300],[4,-55],[39,-13],[37,-14],[1,-41],[4,1],[1,39],[-1,35],[2,15],[7,-16],[8,-7]],[[2751,2244],[1,-83],[4,-93],[8,-122],[13,-131],[-2,-9],[1,-61],[5,-68],[8,-137],[2,-42],[0,-44],[-3,-158],[-3,-3],[-3,-49],[1,-16],[-5,-36],[-2,9],[-6,-15],[-9,-8],[-2,20],[1,29],[-7,85],[-5,15],[-4,-11],[-3,47],[-1,38],[-6,43],[-2,28],[1,41],[-3,8],[1,-24],[-3,-7],[-9,104],[-4,26],[9,76],[-6,-4],[-4,-24],[-3,38],[5,104],[1,87],[-4,21],[-1,28],[-5,6],[-7,46],[-5,19],[0,28],[-4,11],[-3,31],[-11,42],[-9,-10],[0,-29],[-3,5],[-12,-35],[-12,-9],[0,21],[-3,25],[-15,57],[-10,24],[-10,6],[-8,-4],[-17,-18]],[[2703,3063],[-6,-41],[0,-20],[9,-40],[3,3],[5,-42],[1,-22],[4,-40],[7,-24],[3,-35],[8,-33],[0,-22],[5,-35],[7,-29],[2,-32],[1,-40],[3,-14],[5,-51],[0,-33],[7,-16]],[[2767,2497],[-7,-65],[-2,-34],[-3,-29],[0,-30],[-3,-14],[-1,-81]],[[2632,3060],[37,1]],[[2669,3061],[20,-1],[14,3]],[[640,0],[-7,17],[-1,16],[1,43],[-5,73],[4,24],[2,34],[-2,22],[1,23],[8,-27],[9,-20],[5,-29],[0,-26],[8,-40],[-5,-34],[-8,-15],[-7,-25],[-3,-36]],[[613,397],[3,-26],[4,11],[9,-30],[-1,-27],[-9,-14],[-2,6],[-1,33],[-5,7],[-1,19],[3,21]],[[602,432],[-3,-20],[-7,0],[2,22],[8,-2]],[[574,525],[3,-45],[-2,-26],[-6,-5],[-4,54],[4,1],[5,21]],[[531,626],[3,-2],[2,-20],[-1,-28],[-4,-18],[-9,22],[1,31],[8,15]],[[1908,4871],[0,-472]],[[1908,4399],[-31,-1],[-54,0]],[[1823,4398],[-85,1]],[[1738,4399],[0,349],[4,62],[-2,16],[-6,3],[-2,26],[6,68],[3,6],[3,29],[-1,17],[4,23],[1,34],[6,56],[-2,26],[-7,14],[-4,32]],[[1741,5160],[0,34],[-3,33],[0,16],[0,255],[0,236]],[[1738,5734],[28,0]],[[1766,5734],[0,-195],[9,-54],[1,-52],[5,-23],[6,-8],[0,-14],[11,-51],[1,-21],[8,-20],[0,-12],[8,1],[-4,-71],[-1,-45],[3,-29],[-5,-21],[2,-20],[-1,-21],[6,-20],[7,26],[3,21],[5,-19],[-1,-15],[3,-37],[5,-39],[3,-13],[0,-37],[3,-16],[6,-2],[4,-61],[3,-11],[3,18],[9,-1],[7,17],[3,-10],[7,9],[2,-11],[5,8],[7,39],[4,-33],[5,-20]],[[2489,4496],[53,-3],[28,0]],[[2570,4493],[-1,-37],[4,-43],[5,-70]],[[2578,4343],[0,-450],[-3,-35],[3,-40],[1,-34],[-4,-27],[-1,-25],[-5,-41],[-3,-3],[0,-24],[-2,-9],[-1,-45],[0,-13]],[[2563,3597],[-3,-27],[2,-34],[-11,-17],[-1,-20],[2,-25],[-3,-16],[-11,29],[-3,-2],[-4,-33],[1,-11]],[[2532,3441],[-5,2],[-6,55],[2,12],[-2,37],[0,29],[-9,41],[-3,-4],[-3,25],[-9,38],[0,31],[5,49],[-1,18],[3,23],[-4,13],[-6,9],[-3,-18],[-3,11],[-1,63],[-10,41],[-9,49],[-3,58],[-1,39],[3,27]],[[2467,4089],[0,35],[8,21],[1,29],[4,19],[0,33],[-4,27],[2,34],[11,9],[9,24],[0,29],[4,13],[1,37],[0,24],[-7,18],[-1,20],[-6,35]],[[2655,4340],[0,-228],[0,-266]],[[2655,3846],[-2,-9],[2,-52],[-5,-1],[-5,-18],[-8,9],[1,-38],[-5,-16],[-2,-24],[-5,-9],[-3,-48],[-3,-13],[-6,18],[-1,22],[-7,-24],[1,-21],[-7,-7],[-1,19],[-8,-19],[-2,-20],[-7,28],[-4,-6],[-2,13],[-3,-13],[-7,-2],[-3,-18]],[[2578,4343],[3,-12],[8,0],[9,22]],[[2598,4353],[23,0],[34,0],[0,-13]],[[2473,4685],[0,-28],[4,-19],[-3,-23],[1,-43],[2,-30],[10,-22],[2,-24]],[[2467,4089],[-3,7],[-6,38],[-3,-1],[-40,-5],[-39,-2],[-33,3]],[[2343,4129],[-3,25],[2,49],[-3,43],[0,48],[-5,17],[-1,26],[2,23],[-2,33],[-4,13],[-5,86]],[[2324,4492],[-5,41],[2,29],[1,37],[2,14],[-3,19],[1,33],[-2,16],[4,4]],[[2324,4685],[144,0],[5,0]],[[2356,4017],[3,-18],[9,-14],[-6,-56],[4,-18],[4,-45],[6,-10],[0,-412]],[[2376,3444],[-156,0],[-55,-1]],[[2164,4017],[5,0],[187,0]],[[2718,3716],[-1,-57],[4,-37],[4,-28],[2,-22],[5,-22],[4,-3]],[[2736,3547],[-11,-51],[-11,-29],[0,-14],[-4,-13],[0,-16],[-6,-8],[-1,-21],[-16,-27]],[[2687,3368],[0,-3],[-24,2],[-22,6],[-5,-2],[-32,8],[-36,-5],[-6,9],[1,-35],[-36,2],[-3,-2]],[[2524,3348],[1,24],[5,-8],[2,77]],[[2655,3846],[11,0],[5,-40],[1,-17],[9,-7],[6,-26],[5,13],[10,-14],[4,19],[4,6],[1,-32],[3,-6],[4,-26]],[[2474,2682],[3,-22],[-2,-9],[-1,-38],[5,-24],[0,-57],[-3,-44],[-7,-27],[-2,-43],[-2,4],[-1,-70],[-3,-2],[2,-37],[-2,-14],[54,0],[-3,-63],[4,-41],[1,-32],[4,-20]],[[2521,2143],[-9,-26],[0,-19],[7,-12],[3,30],[6,-30],[-1,-24],[-3,-11],[-7,10],[1,-18],[-2,-27],[5,-24],[9,-7],[3,-29],[3,-4],[-5,-32],[-5,6],[-4,33],[-10,18],[0,33],[-6,-11],[1,-27],[-3,-25],[-3,-4],[-3,28],[-7,1],[-2,-29],[-4,-9],[-5,18],[-4,2],[-3,47],[-7,21],[-2,-3],[-3,40],[-7,-5],[0,24],[-8,-23],[1,-18],[-5,-17],[-9,8],[-10,27],[-7,11],[-16,-9],[-2,-8]],[[2398,2049],[-2,19],[6,68],[-2,37],[2,20],[-1,26],[3,19],[3,50],[0,40],[-8,78],[0,41],[-7,42],[0,196]],[[3046,5029],[12,26],[-2,13],[5,30],[4,13],[-1,12],[5,18],[-1,33],[2,50],[5,17],[1,53],[22,147],[6,-7],[0,-35],[4,-13],[9,21],[6,0],[4,14],[8,-31],[4,-25],[1,-214],[-1,-51],[10,-14],[-2,-22],[3,-21],[-2,-18],[4,-30],[5,7],[5,-68],[-6,-31],[-3,12],[-3,-21],[-4,5],[0,-18],[-6,2],[-8,-40],[-2,28],[-3,2],[1,-30],[-6,-15],[-2,24],[-3,-12],[-7,0],[0,28],[-5,-6],[1,-20],[-4,-42],[1,-12],[-6,-23],[-5,9],[-3,-24],[-4,-3],[-4,-20],[-4,4],[-1,21],[-7,-34],[2,-21],[-5,-7],[0,-18],[-5,-22],[-5,-50]],[[3056,4600],[-3,14],[0,19],[-4,22],[-2,250],[-1,124]],[[2904,3626],[2,0],[-1,0],[-1,0]],[[2933,3721],[-6,-80]],[[2927,3641],[-4,-3],[-8,-12]],[[2915,3626],[-6,-8],[0,31],[-2,13],[3,13],[-4,32],[-2,-14],[-6,3],[-2,35],[2,0],[0,45],[2,18],[-2,60],[3,36],[5,6],[0,37],[-3,-5],[0,-18],[-8,-25],[-2,-21],[0,-56],[-3,-26],[1,-44],[4,-30],[-1,-23],[3,-23],[-2,-16],[-6,30],[-10,15],[-2,29],[-6,-16],[-2,23],[5,29]],[[2874,3756],[2,30]],[[2874,3813],[-4,18],[-6,10],[0,28],[-3,15],[-4,4]],[[2857,3888],[-4,53],[-4,0],[-5,18],[-3,-15],[-5,1],[-1,-21],[-8,14],[-6,-28],[-3,6],[-6,-33],[-6,-17],[1,98]],[[2807,3964],[105,0]],[[3053,4565],[1,-34],[-1,-27],[-5,-25],[0,-29],[6,-4],[4,-31],[0,-24],[3,-6],[0,-22],[8,-19],[9,18],[-2,-26],[-13,-23],[-5,-1],[-3,18],[-5,-6],[0,-13],[-5,-9]],[[3045,4302],[-3,35]],[[3042,4337],[0,6]],[[3042,4343],[-3,14],[-2,45],[-4,0],[-8,-2]],[[2977,4408],[0,7],[6,126]],[[2983,4541],[23,-3]],[[3006,4538],[34,-7],[3,18],[7,19],[3,-3]],[[2598,4353],[5,25],[4,43],[4,26],[3,36],[1,52],[0,57],[-9,111],[3,42],[-2,50],[6,51],[2,43],[-1,23],[5,9],[0,31],[8,9],[5,34],[0,-69],[3,-3],[3,35],[1,58],[2,15],[8,9],[-3,41],[5,35],[7,2],[7,-22],[7,-3],[3,-28],[6,-2],[9,-25],[3,1],[4,-41],[-3,-21],[3,-29],[2,-32],[-2,-71],[-6,-18],[-1,-37],[-7,-12],[-4,-44],[2,-17],[6,-15],[6,24],[6,49],[10,19],[5,-15],[3,-27],[3,-80],[0,-39],[3,-48],[-3,-69],[-4,-11],[-1,25],[-3,-7],[-3,-58],[-6,-21],[-2,-44],[-7,-37],[0,-16]],[[2694,4347],[-39,-7]],[[2635,5110],[1,-23],[-4,-4],[1,33],[2,-6]],[[2496,5270],[11,20],[5,23],[12,9],[8,29],[4,1],[3,20],[9,28],[4,24],[7,15],[6,-13],[-11,-59],[-2,-19],[0,-36],[5,27],[10,-4],[8,-19],[7,-52],[3,-10],[7,9],[2,-12],[7,-6],[16,44],[8,4],[10,-2],[7,15],[6,1],[1,-54],[5,-7],[6,8],[2,-12],[4,16],[8,5],[1,-67],[3,-28],[6,-8],[1,19],[5,0],[3,-20],[-3,-14],[-15,12],[-8,-8],[-8,23],[-2,-21],[1,-18],[-4,4],[-5,27],[-9,15],[-5,1],[-4,-25],[-8,-6],[-8,5],[-3,-10],[-1,-21],[-9,-18],[1,25],[-4,5],[-2,-26],[-6,-1],[-3,-11],[-5,-45],[-8,-58],[1,-5]],[[2576,4989],[-4,20],[2,27],[-7,4],[3,26],[0,34],[-5,23],[-4,24],[-12,19],[-4,-7],[-12,29],[-29,38],[-3,33],[-5,11]],[[2541,5539],[-7,-24],[-4,-3],[1,19],[18,45],[-4,-31],[-4,-6]],[[2324,4685],[0,343],[-7,22],[-5,36],[8,41],[1,22]],[[2321,5149],[-1,76],[-4,20],[-2,42],[0,51],[-1,8],[-1,123],[-5,65],[-3,36],[0,77],[1,27],[-3,60]],[[2302,5734],[59,0],[0,73],[5,-2],[4,-14],[4,-100],[3,-11],[9,-3],[1,-10],[11,-4],[1,-21],[10,5],[0,9],[7,10],[6,-4],[8,-16],[2,-19],[4,2],[4,-43],[2,18],[7,8],[1,-18],[9,-12],[0,-17],[4,-14],[8,8],[5,18],[8,12],[2,-28],[5,6],[6,-6],[6,4],[8,-24],[7,4],[0,-10],[-10,-24],[-13,-19],[-9,-20],[-12,-49],[-5,-31],[-8,-34],[-13,-46],[2,-16]],[[2450,5296],[-2,9],[-6,-16],[0,-113],[-2,-11],[-8,-16],[-6,-41],[-1,-27],[3,-2],[4,-24],[-3,-29],[0,-33],[-2,-70],[8,-34],[6,-3],[3,-21],[8,-21],[2,-25],[8,-33],[5,-7],[5,-42],[-1,-30],[2,-22]],[[2553,2179],[-3,-8],[-7,4],[-3,12],[-7,-8],[-9,-22],[-3,-14]],[[2498,3062],[53,0],[7,0]],[[2524,3348],[-2,0],[-2,0],[1,-47],[-6,-48]],[[2376,3349],[0,95]],[[2356,4017],[-7,50],[-6,62]],[[2108,5151],[0,-181],[-1,0]],[[2107,4970],[-53,1],[-90,0],[-56,0],[0,-100]],[[1766,5734],[130,-1],[58,1],[154,0]],[[2108,5734],[0,-217],[0,-366]],[[2107,4208],[0,382]],[[2107,4590],[21,0],[49,-1],[88,0],[1,-10],[15,-34],[4,19],[4,-4],[13,0],[15,-36],[2,-27],[5,-5]],[[1823,4398],[0,-954]],[[1654,4398],[37,-1],[47,2]],[[3006,4538],[-2,14],[0,28],[3,11],[-1,27],[3,81],[5,37],[2,43],[3,16],[-1,47],[10,17],[5,33],[-3,31],[4,32],[0,18]],[[3034,4973],[4,49],[6,-5],[2,12]],[[3056,4600],[-3,-35]],[[2962,4152],[-5,-13],[-2,-29],[8,-14],[0,-22],[-3,-103],[-9,-76],[-6,-22],[-5,-48],[-3,31],[-8,16],[-10,42],[-1,28],[0,4],[2,11]],[[2922,3980],[8,15],[0,15],[9,31],[2,17],[-9,39],[0,24],[-3,6],[-1,22],[5,33],[-3,20],[7,40],[2,21],[4,13]],[[2943,4276],[13,-41],[9,-28],[-3,-55]],[[2137,3444],[0,-95]],[[2137,3349],[-1,0],[0,-474],[0,-193],[0,-192],[-101,0],[-1,-18],[3,-22]],[[2037,2450],[-48,0],[0,-87],[-24,0]],[[2972,4205],[13,-15],[2,11],[10,0],[6,6],[8,31],[1,-22],[5,-10],[-11,-28],[-22,-42],[-9,-8],[-6,2],[-5,-9],[-2,31]],[[2943,4276],[-2,14],[-4,1],[-5,32],[1,29],[-4,22],[-2,-2],[-3,27],[-125,0],[0,48],[0,3]],[[2799,4450],[17,54],[3,26],[5,18],[-2,32],[-2,7],[-2,52],[17,22],[15,-1],[6,-5],[6,-21],[4,8],[12,-1],[8,14],[8,34],[5,1],[0,52],[3,31],[-7,21],[2,24],[11,32],[4,28],[14,64],[13,32],[19,-5],[23,4]],[[2981,4973],[1,-39],[-2,-36],[3,-34],[-1,-37],[-3,-39],[2,-52],[-1,-16],[4,-31],[-1,-132],[0,-16]],[[2909,3359],[4,-77],[-8,8],[-1,-10],[-10,-11],[-1,-11],[-7,-3],[0,-13],[8,9],[1,-8],[9,9],[3,-18],[5,8],[2,-46],[-2,-22],[-3,-2],[-8,-47],[-9,-2],[-2,-33],[4,-32],[4,-6],[-6,-54],[-6,7],[-9,-6],[-6,-11],[-10,-37],[-7,-48],[-4,-60],[-6,13],[-11,-12]],[[2833,2844],[-32,181],[-32,4],[1,21],[-5,33],[-3,-12],[0,20],[-35,10],[-8,-8],[-6,-17],[-10,-13]],[[2669,3061],[1,45],[5,4],[3,31],[7,29],[7,1],[7,29],[8,10],[6,43],[4,13],[1,-19],[11,37],[5,-8],[4,36],[5,9],[1,45]],[[2744,3366],[20,-5],[19,-3],[23,-1],[103,2]],[[2321,5149],[-213,2]],[[2108,5734],[194,0]],[[2777,4138],[-4,-10],[2,-21],[0,-29],[-4,-46],[-3,-70],[-11,-62],[-3,-8],[-4,12],[-3,-27],[-3,1],[-4,-36],[1,-22],[-3,-18],[-4,29],[-5,-46],[1,-29],[-3,-11],[-1,-25],[-8,-4]],[[2694,4347],[11,-26],[3,-15],[3,14],[6,-30],[4,-9],[14,25],[7,-6],[9,36],[12,34],[14,24]],[[2777,4394],[0,-256]],[[2380,2803],[-11,21],[-3,22],[-7,18],[-2,-16],[-8,1],[-1,10],[-7,-19],[-3,11],[-6,-10],[-5,-29],[-2,17],[-6,14],[-7,0],[-2,21],[-7,-42],[-2,24],[-3,-8],[-3,16],[-7,15],[-5,-25],[-2,26],[-4,3],[-2,21],[-6,8],[-3,-18],[-3,16],[-5,-2],[-6,17],[-6,-2],[-2,36],[-9,2],[-4,-6],[-6,37],[-2,-3],[0,370],[-52,0],[-34,0]],[[1534,4399],[-4,22],[-2,61],[0,43],[-4,33],[3,32],[2,51],[4,54],[2,48],[3,162],[0,22],[3,71],[1,99],[-2,54],[1,32],[12,29]],[[1553,5212],[5,-22],[4,5],[3,2],[6,-20],[3,-23],[1,-57],[15,-21],[12,30],[8,3],[9,-10],[1,-13],[16,27],[3,-9],[9,5],[7,19],[12,17],[12,4],[4,12],[58,-1]],[[2807,3964],[-30,0],[0,174]],[[2777,4394],[5,11],[17,45]],[[3045,4302],[-6,-4],[3,39]],[[3042,4343],[-4,3],[-3,-28],[-1,-40],[-11,-9]],[[2833,2844],[-5,-10],[-6,-31],[-6,-49],[-1,-40],[-5,-31],[-6,0],[-2,-23],[-6,-25],[-4,-28],[-6,-11],[-6,-29],[-1,-14],[-6,-16],[-6,-40]],[[2107,4590],[0,380]],[[2687,3368],[57,-2]],[[2398,2049],[-5,-1],[-14,-26],[-6,15],[-1,31],[-3,-22],[-3,5],[-1,-27],[3,-11],[0,-36],[-5,-37],[-9,-47],[-17,-51],[-2,9],[-5,-13],[0,12],[-7,-9],[-3,24],[-2,-5],[7,-49],[-5,-16],[-5,10],[-1,-35],[-7,-35],[-6,-66],[-4,-69],[-3,5],[-1,-25],[3,6],[-2,-50],[-2,-2],[0,-28],[3,-16],[1,-57],[3,-20],[0,-37],[3,-32],[-9,-20],[-3,25],[-7,10],[-9,-3],[-8,32],[-5,3],[-5,25],[-6,8],[-4,24],[-2,58],[-5,34],[0,30],[-2,31],[1,27],[-4,30],[-3,4],[-5,27],[-1,34],[-5,32],[-6,26],[-3,57],[-2,16],[-4,46],[-1,38],[-4,27],[-6,24],[-1,16],[-6,15],[-4,42],[-13,9],[-7,-2],[-7,15],[-1,-20],[-7,-6],[-5,-40],[-3,-64],[-2,-1],[-4,-37],[-5,-1],[-7,29],[-17,47],[-4,25],[-6,24],[-5,54],[-1,49],[-4,40],[-2,35],[-3,22],[-11,32],[-6,44],[-4,15],[-6,38],[-7,20],[-5,50],[-4,11]],[[1908,4399],[0,-192],[57,0]],[[2981,4973],[30,-2],[23,2]],[[2927,3641],[-4,-32],[-3,-12],[-3,-44],[-6,-71],[-5,-15],[-1,27],[2,58],[8,74]],[[2874,3756],[-4,-8],[-2,-28],[1,-19],[8,6],[1,-31],[10,-12],[3,-24],[8,-26],[-4,-54],[4,-41],[-4,-20],[-1,-24],[4,-15],[-4,-23],[-6,30],[-1,-10],[5,-22],[14,-5],[3,-71]],[[2736,3547],[-1,-16],[4,-32],[5,-16],[4,1],[5,25],[4,-20],[7,11],[13,36],[1,-11],[5,17],[0,34],[4,30],[5,29],[2,34],[6,36],[2,44],[5,-27],[4,-8],[3,16],[6,68],[4,-17],[13,77],[2,57],[15,-64],[3,37]],[[1553,5212],[-5,7],[-4,-12],[-6,17],[1,26],[4,14],[-6,40],[-4,103],[-2,14],[-3,73],[-6,28],[-2,56],[3,38],[6,-18],[11,-24],[8,1],[8,-9],[8,9],[3,-16],[7,1],[5,-42],[3,3],[1,-56],[2,-52],[3,6],[-3,43],[1,43],[4,44],[-3,18],[-1,31],[-3,35],[2,25],[-2,29],[-5,4],[-4,22],[1,21],[163,0]],[[1576,5602],[4,9],[0,-39],[-5,15],[1,15]],[[1568,5655],[3,25],[4,-30],[-1,-27],[-7,8],[1,24]],[[2576,4989],[-1,-23],[-6,-4],[-4,-44],[-2,-30],[3,-6],[5,20],[4,38],[6,15],[5,48],[6,10],[-1,-25],[-4,-23],[-8,-79],[-2,-44],[0,-32],[-3,-10],[-2,-43],[1,-37],[-3,-24],[-3,-59],[0,-47],[4,-42],[-1,-55]],[[2450,5296],[6,-2],[20,33],[8,17],[2,-13],[-4,-25],[9,-33],[5,-3]]]
},d.prototype.latLngToXY=function(t,e){return this.projection([e,t])},d.prototype.addLayer=function(t,e,i){var s;return s=i?this.svg.insert("g",":first-child"):this.svg.append("g"),s.attr("id",e||"").attr("class",t||"")},d.prototype.updateChoropleth=function(t){var e=this.svg;for(var i in t)if(t.hasOwnProperty(i)){var s,n=t[i];if(!i)continue;s="string"==typeof n?n:"string"==typeof n.color?n.color:this.options.fills[n.fillKey],n===Object(n)&&(this.options.data[i]=u(n,this.options.data[i]||{}),this.svg.select("."+i).attr("data-info",JSON.stringify(this.options.data[i]))),e.selectAll("."+i).transition().style("fill",s)}},d.prototype.updatePopup=function(t,e,i){var s=this;t.on("mousemove",null),t.on("mousemove",function(){var n=p.mouse(s.options.element);p.select(s.svg[0][0].parentNode).select(".datamaps-hoverover").style("top",n[1]+30+"px").html(function(){var s=JSON.parse(t.attr("data-info"));return i.popupTemplate(e,s)}).style("left",n[0]+"px")}),p.select(s.svg[0][0].parentNode).select(".datamaps-hoverover").style("display","block")},d.prototype.addPlugin=function(t,e){var i=this;"undefined"==typeof d.prototype[t]&&(d.prototype[t]=function(s,n,a,r){var o;"undefined"==typeof r&&(r=!1),"function"==typeof n&&(a=n,n=void 0),n=u(n||{},i.options[t+"Config"]),!r&&this.options[t+"Layer"]?(o=this.options[t+"Layer"],n=n||this.options[t+"Options"]):(o=this.addLayer(t),this.options[t+"Layer"]=o,this.options[t+"Options"]=n),e.apply(this,[o,s,n]),a&&a(o)})},"function"==typeof define&&define.amd?define("datamaps",function(t){return p=t("d3"),f=t("topojson"),d}):window.Datamap=window.Datamaps=d,window.jQuery&&(window.jQuery.fn.datamaps=function(t,e){t=t||{},t.element=this[0];var i=new d(t);return"function"==typeof e&&e(i,t),this})}(),!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.d3pie=e(t)}(this,function(){var t="d3pie",e="0.1.6",i=0,s={header:{title:{text:"",color:"#333333",fontSize:18,font:"arial"},subtitle:{text:"",color:"#666666",fontSize:14,font:"arial"},location:"top-center",titleSubtitlePadding:8},footer:{text:"",color:"#666666",fontSize:14,font:"arial",location:"left"},size:{canvasHeight:500,canvasWidth:500,pieInnerRadius:"0%",pieOuterRadius:null},data:{sortOrder:"none",ignoreSmallSegments:{enabled:!1,valueType:"percentage",value:null},smallSegmentGrouping:{enabled:!1,value:1,valueType:"percentage",label:"Other",color:"#cccccc"},content:[]},labels:{outer:{format:"label",hideWhenLessThanPercentage:null,pieDistance:30},inner:{format:"percentage",hideWhenLessThanPercentage:null},mainLabel:{color:"#333333",font:"arial",fontSize:10},percentage:{color:"#dddddd",font:"arial",fontSize:10,decimalPlaces:0},value:{color:"#cccc44",font:"arial",fontSize:10},lines:{enabled:!0,style:"curved",color:"segment"},truncation:{enabled:!1,truncateLength:30},formatter:null},effects:{load:{effect:"default",speed:1e3},pullOutSegmentOnClick:{effect:"bounce",speed:300,size:10},highlightSegmentOnMouseover:!0,highlightLuminosity:-.2},tooltips:{enabled:!1,type:"placeholder",string:"",placeholderParser:null,styles:{fadeInSpeed:250,backgroundColor:"#000000",backgroundOpacity:.5,color:"#efefef",borderRadius:2,font:"arial",fontSize:10,padding:4}},misc:{colors:{background:null,segments:["#2484c1","#65a620","#7b6888","#a05d56","#961a1a","#d8d23a","#e98125","#d0743c","#635222","#6ada6a","#0c6197","#7d9058","#207f33","#44b9b0","#bca44a","#e4a14b","#a3acb2","#8cc3e9","#69a6f9","#5b388f","#546e91","#8bde95","#d2ab58","#273c71","#98bf6e","#4daa4b","#98abc5","#cc1010","#31383b","#006391","#c2643f","#b0a474","#a5a39c","#a9c2bc","#22af8c","#7fcecf","#987ac6","#3d3b87","#b77b1c","#c9c2b6","#807ece","#8db27c","#be66a2","#9ed3c6","#00644b","#005064","#77979f","#77e079","#9c73ab","#1f79a7"],segmentStroke:"#ffffff"},gradient:{enabled:!1,percentage:95,color:"#000000"},canvasPadding:{top:5,right:5,bottom:5,left:5},pieCenterOffset:{x:0,y:0},cssPrefix:null},callbacks:{onload:null,onMouseoverSegment:null,onMouseoutSegment:null,onClickSegment:null}},n={initialCheck:function(t){var e=t.cssPrefix,i=t.element,s=t.options;if(!window.d3||!window.d3.hasOwnProperty("version"))return console.error("d3pie error: d3 is not available"),!1;if(!(i instanceof HTMLElement||i instanceof SVGElement))return console.error("d3pie error: the first d3pie() param must be a valid DOM element (not jQuery) or a ID string."),!1;if(!/[a-zA-Z][a-zA-Z0-9_-]*$/.test(e))return console.error("d3pie error: invalid options.misc.cssPrefix"),!1;if(!a.isArray(s.data.content))return console.error("d3pie error: invalid config structure: missing data.content property."),!1;if(0===s.data.content.length)return console.error("d3pie error: no data supplied."),!1;for(var n=[],r=0;r<s.data.content.length;r++)"number"!=typeof s.data.content[r].value||isNaN(s.data.content[r].value)?console.log("not valid: ",s.data.content[r]):s.data.content[r].value<=0?console.log("not valid - should have positive value: ",s.data.content[r]):n.push(s.data.content[r]);return t.options.data.content=n,!0}},a={addSVGSpace:function(t){var e=t.element,i=t.options.size.canvasWidth,s=t.options.size.canvasHeight,n=t.options.misc.colors.background,a=d3.select(e).append("svg:svg").attr("width",i).attr("height",s);return"transparent"!==n&&a.style("background-color",function(){return n}),a},whenIdExists:function(t,e){var i=1,s=1e3,n=setInterval(function(){document.getElementById(t)&&(clearInterval(n),e()),i>s&&clearInterval(n),i++},1)},whenElementsExist:function(t,e){var i=1,s=1e3,n=setInterval(function(){for(var a=!0,r=0;r<t.length;r++)if(!document.getElementById(t[r])){a=!1;break}a&&(clearInterval(n),e()),i>s&&clearInterval(n),i++},1)},shuffleArray:function(t){for(var e,i,s=t.length;0!==s;)i=Math.floor(Math.random()*s),s-=1,e=t[s],t[s]=t[i],t[i]=e;return t},processObj:function(t,e,i){return"string"==typeof e?a.processObj(t,e.split("."),i):1===e.length&&void 0!==i?(t[e[0]]=i,t[e[0]]):0===e.length?t:a.processObj(t[e[0]],e.slice(1),i)},getDimensions:function(t){var e=document.getElementById(t),i=0,s=0;if(e){var n=e.getBBox();i=n.width,s=n.height}else console.log("error: getDimensions() "+t+" not found.");return{w:i,h:s}},rectIntersect:function(t,e){var i=e.x>t.x+t.w||e.x+e.w<t.x||e.y+e.h<t.y||e.y>t.y+t.h;return!i},getColorShade:function(t,e){t=String(t).replace(/[^0-9a-f]/gi,""),t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),e=e||0;for(var i="#",s=0;3>s;s++){var n=parseInt(t.substr(2*s,2),16);n=Math.round(Math.min(Math.max(0,n+n*e),255)).toString(16),i+=("00"+n).substr(n.length)}return i},initSegmentColors:function(t){for(var e=t.options.data.content,i=t.options.misc.colors.segments,s=[],n=0;n<e.length;n++)s.push(e[n].hasOwnProperty("color")?e[n].color:i[n]);return s},applySmallSegmentGrouping:function(t,e){var i;"percentage"===e.valueType&&(i=o.getTotalPieSize(t));for(var s=[],n=[],a=0,r=0;r<t.length;r++)if("percentage"===e.valueType){var l=t[r].value/i*100;if(l<=e.value){n.push(t[r]),a+=t[r].value;continue}t[r].isGrouped=!1,s.push(t[r])}else{if(t[r].value<=e.value){n.push(t[r]),a+=t[r].value;continue}t[r].isGrouped=!1,s.push(t[r])}return n.length&&s.push({color:e.color,label:e.label,value:a,isGrouped:!0,groupedData:n}),s},showPoint:function(t,e,i){t.append("circle").attr("cx",e).attr("cy",i).attr("r",2).style("fill","black")},isFunction:function(t){var e={};return t&&"[object Function]"===e.toString.call(t)},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)}},r=function(){var t,e,i,s,n,a,o=arguments[0]||{},l=1,h=arguments.length,c=!1,u=Object.prototype.toString,d=Object.prototype.hasOwnProperty,p={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},f={isFunction:function(t){return"function"===f.type(t)},isArray:Array.isArray||function(t){return"array"===f.type(t)},isWindow:function(t){return null!==t&&t===t.window},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},type:function(t){return null===t?String(t):p[u.call(t)]||"object"},isPlainObject:function(t){if(!t||"object"!==f.type(t)||t.nodeType)return!1;try{if(t.constructor&&!d.call(t,"constructor")&&!d.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}var i;for(i in t);return void 0===i||d.call(t,i)}};for("boolean"==typeof o&&(c=o,o=arguments[1]||{},l=2),"object"==typeof o||f.isFunction(o)||(o={}),h===l&&(o=this,--l),l;h>l;l++)if(null!==(t=arguments[l]))for(e in t)i=o[e],s=t[e],o!==s&&(c&&s&&(f.isPlainObject(s)||(n=f.isArray(s)))?(n?(n=!1,a=i&&f.isArray(i)?i:[]):a=i&&f.isPlainObject(i)?i:{},o[e]=r(c,a,s)):void 0!==s&&(o[e]=s));return o},o={toRadians:function(t){return t*(Math.PI/180)},toDegrees:function(t){return t*(180/Math.PI)},computePieRadius:function(t){var e=t.options.size,i=t.options.misc.canvasPadding,s=e.canvasWidth-i.left-i.right,n=e.canvasHeight-i.top-i.bottom;"pie-center"!==t.options.header.location&&(n-=t.textComponents.headerHeight),t.textComponents.footer.exists&&(n-=t.textComponents.footer.h),n=0>n?0:n;var a,r,o=(n>s?s:n)/3;if(null!==e.pieOuterRadius)if(/%/.test(e.pieOuterRadius)){r=parseInt(e.pieOuterRadius.replace(/[\D]/,""),10),r=r>99?99:r,r=0>r?0:r;var l=n>s?s:n;if("none"!==t.options.labels.outer.format){var h=2*parseInt(t.options.labels.outer.pieDistance,10);l-h>0&&(l-=h)}o=Math.floor(l/100*r)/2}else o=parseInt(e.pieOuterRadius,10);/%/.test(e.pieInnerRadius)?(r=parseInt(e.pieInnerRadius.replace(/[\D]/,""),10),r=r>99?99:r,r=0>r?0:r,a=Math.floor(o/100*r)):a=parseInt(e.pieInnerRadius,10),t.innerRadius=a,t.outerRadius=o},getTotalPieSize:function(t){for(var e=0,i=0;i<t.length;i++)e+=t[i].value;return e},sortPieData:function(t){var e=t.options.data.content,i=t.options.data.sortOrder;switch(i){case"none":break;case"random":e=a.shuffleArray(e);break;case"value-asc":e.sort(function(t,e){return t.value<e.value?-1:1});break;case"value-desc":e.sort(function(t,e){return t.value<e.value?1:-1});break;case"label-asc":e.sort(function(t,e){return t.label.toLowerCase()>e.label.toLowerCase()?1:-1});break;case"label-desc":e.sort(function(t,e){return t.label.toLowerCase()<e.label.toLowerCase()?1:-1})}return e},getPieTranslateCenter:function(t){return"translate("+t.x+","+t.y+")"},calculatePieCenter:function(t){var e=t.options.misc.pieCenterOffset,i=t.textComponents.title.exists&&"pie-center"!==t.options.header.location,s=t.textComponents.subtitle.exists&&"pie-center"!==t.options.header.location,n=t.options.misc.canvasPadding.top;i&&s?n+=t.textComponents.title.h+t.options.header.titleSubtitlePadding+t.textComponents.subtitle.h:i?n+=t.textComponents.title.h:s&&(n+=t.textComponents.subtitle.h);var a=0;t.textComponents.footer.exists&&(a=t.textComponents.footer.h+t.options.misc.canvasPadding.bottom);var r=(t.options.size.canvasWidth-t.options.misc.canvasPadding.left-t.options.misc.canvasPadding.right)/2+t.options.misc.canvasPadding.left,o=(t.options.size.canvasHeight-a-n)/2+n;r+=e.x,o+=e.y,t.pieCenter={x:r,y:o}},rotate:function(t,e,i,s,n){n=n*Math.PI/180;var a=Math.cos,r=Math.sin,o=(t-i)*a(n)-(e-s)*r(n)+i,l=(t-i)*r(n)+(e-s)*a(n)+s;return{x:o,y:l}},translate:function(t,e,i,s){var n=o.toRadians(s);return{x:t+i*Math.sin(n),y:e-i*Math.cos(n)}},pointIsInArc:function(t,e,i){var s=i.innerRadius()(e),n=i.outerRadius()(e),a=i.startAngle()(e),r=i.endAngle()(e),o=t.x*t.x+t.y*t.y,l=Math.atan2(t.x,-t.y);return l=0>l?l+2*Math.PI:l,o>=s*s&&n*n>=o&&l>=a&&r>=l}},l={add:function(t,e,i){var s=l.getIncludes(i),n=t.options.labels,a=t.svg.insert("g","."+t.cssPrefix+"labels-"+e).attr("class",t.cssPrefix+"labels-"+e),r=a.selectAll("."+t.cssPrefix+"labelGroup-"+e).data(t.options.data.content).enter().append("g").attr("id",function(i,s){return t.cssPrefix+"labelGroup"+s+"-"+e}).attr("data-index",function(t,e){return e}).attr("class",t.cssPrefix+"labelGroup-"+e).style("opacity",0),o={section:e,sectionDisplayType:i};s.mainLabel&&r.append("text").attr("id",function(i,s){return t.cssPrefix+"segmentMainLabel"+s+"-"+e}).attr("class",t.cssPrefix+"segmentMainLabel-"+e).text(function(t,e){var i=t.label;return n.formatter?(o.index=e,o.part="mainLabel",o.value=t.value,o.label=i,i=n.formatter(o)):n.truncation.enabled&&t.label.length>n.truncation.truncateLength&&(i=t.label.substring(0,n.truncation.truncateLength)+"..."),i}).style("font-size",n.mainLabel.fontSize+"px").style("font-family",n.mainLabel.font).style("fill",n.mainLabel.color),s.percentage&&r.append("text").attr("id",function(i,s){return t.cssPrefix+"segmentPercentage"+s+"-"+e}).attr("class",t.cssPrefix+"segmentPercentage-"+e).text(function(e,i){var s=h.getPercentage(t,i,t.options.labels.percentage.decimalPlaces);return n.formatter?(o.index=i,o.part="percentage",o.value=e.value,o.label=s,s=n.formatter(o)):s+="%",s}).style("font-size",n.percentage.fontSize+"px").style("font-family",n.percentage.font).style("fill",n.percentage.color),s.value&&r.append("text").attr("id",function(i,s){return t.cssPrefix+"segmentValue"+s+"-"+e}).attr("class",t.cssPrefix+"segmentValue-"+e).text(function(t,e){return o.index=e,o.part="value",o.value=t.value,o.label=t.value,n.formatter?n.formatter(o,t.value):t.value}).style("font-size",n.value.fontSize+"px").style("font-family",n.value.font).style("fill",n.value.color)},positionLabelElements:function(t,e,i){l["dimensions-"+e]=[];var s=d3.selectAll("."+t.cssPrefix+"labelGroup-"+e);s.each(function(){var i=d3.select(this).selectAll("."+t.cssPrefix+"segmentMainLabel-"+e),s=d3.select(this).selectAll("."+t.cssPrefix+"segmentPercentage-"+e),n=d3.select(this).selectAll("."+t.cssPrefix+"segmentValue-"+e);l["dimensions-"+e].push({mainLabel:null!==i.node()?i.node().getBBox():null,percentage:null!==s.node()?s.node().getBBox():null,value:null!==n.node()?n.node().getBBox():null})});var n=5,a=l["dimensions-"+e];switch(i){case"label-value1":d3.selectAll("."+t.cssPrefix+"segmentValue-"+e).attr("dx",function(t,e){return a[e].mainLabel.width+n});break;case"label-value2":d3.selectAll("."+t.cssPrefix+"segmentValue-"+e).attr("dy",function(t,e){return a[e].mainLabel.height});break;case"label-percentage1":d3.selectAll("."+t.cssPrefix+"segmentPercentage-"+e).attr("dx",function(t,e){return a[e].mainLabel.width+n});break;case"label-percentage2":d3.selectAll("."+t.cssPrefix+"segmentPercentage-"+e).attr("dx",function(t,e){return a[e].mainLabel.width/2-a[e].percentage.width/2}).attr("dy",function(t,e){return a[e].mainLabel.height})}},computeLabelLinePositions:function(t){t.lineCoordGroups=[],d3.selectAll("."+t.cssPrefix+"labelGroup-outer").each(function(e,i){return l.computeLinePosition(t,i)})},computeLinePosition:function(t,e){var i,s,n,a,r=h.getSegmentAngle(e,t.options.data.content,t.totalSize,{midpoint:!0}),l=o.rotate(t.pieCenter.x,t.pieCenter.y-t.outerRadius,t.pieCenter.x,t.pieCenter.y,r),c=t.outerLabelGroupData[e].h/5,u=6,d=Math.floor(r/90),p=4;switch(2===d&&180===r&&(d=1),d){case 0:i=t.outerLabelGroupData[e].x-u-(t.outerLabelGroupData[e].x-u-l.x)/2,s=t.outerLabelGroupData[e].y+(l.y-t.outerLabelGroupData[e].y)/p,n=t.outerLabelGroupData[e].x-u,a=t.outerLabelGroupData[e].y-c;break;case 1:i=l.x+(t.outerLabelGroupData[e].x-l.x)/p,s=l.y+(t.outerLabelGroupData[e].y-l.y)/p,n=t.outerLabelGroupData[e].x-u,a=t.outerLabelGroupData[e].y-c;break;case 2:var f=t.outerLabelGroupData[e].x+t.outerLabelGroupData[e].w+u;i=l.x-(l.x-f)/p,s=l.y+(t.outerLabelGroupData[e].y-l.y)/p,n=t.outerLabelGroupData[e].x+t.outerLabelGroupData[e].w+u,a=t.outerLabelGroupData[e].y-c;break;case 3:var g=t.outerLabelGroupData[e].x+t.outerLabelGroupData[e].w+u;i=g+(l.x-g)/p,s=t.outerLabelGroupData[e].y+(l.y-t.outerLabelGroupData[e].y)/p,n=t.outerLabelGroupData[e].x+t.outerLabelGroupData[e].w+u,a=t.outerLabelGroupData[e].y-c}t.lineCoordGroups[e]="straight"===t.options.labels.lines.style?[{x:l.x,y:l.y},{x:n,y:a}]:[{x:l.x,y:l.y},{x:i,y:s},{x:n,y:a}]},addLabelLines:function(t){var e=t.svg.insert("g","."+t.cssPrefix+"pieChart").attr("class",t.cssPrefix+"lineGroups").style("opacity",0),i=e.selectAll("."+t.cssPrefix+"lineGroup").data(t.lineCoordGroups).enter().append("g").attr("class",t.cssPrefix+"lineGroup"),s=d3.svg.line().interpolate("basis").x(function(t){return t.x}).y(function(t){return t.y});i.append("path").attr("d",s).attr("stroke",function(e,i){return"segment"===t.options.labels.lines.color?t.options.colors[i]:t.options.labels.lines.color}).attr("stroke-width",1).attr("fill","none").style("opacity",function(e,i){var s=t.options.labels.outer.hideWhenLessThanPercentage,n=h.getPercentage(t,i,t.options.labels.percentage.decimalPlaces),a=null!==s&&s>n||""===t.options.data.content[i].label;return a?0:1})},positionLabelGroups:function(t,e){"none"!==t.options.labels[e].format&&d3.selectAll("."+t.cssPrefix+"labelGroup-"+e).style("opacity",0).attr("transform",function(i,s){var n,l;if("outer"===e)n=t.outerLabelGroupData[s].x,l=t.outerLabelGroupData[s].y;else{var c=r(!0,{},t.pieCenter);if(t.innerRadius>0){var u=h.getSegmentAngle(s,t.options.data.content,t.totalSize,{midpoint:!0}),d=o.translate(t.pieCenter.x,t.pieCenter.y,t.innerRadius,u);c.x=d.x,c.y=d.y}var p=a.getDimensions(t.cssPrefix+"labelGroup"+s+"-inner"),f=p.w/2,g=p.h/4;n=c.x+(t.lineCoordGroups[s][0].x-c.x)/1.8,l=c.y+(t.lineCoordGroups[s][0].y-c.y)/1.8,n-=f,l+=g}return"translate("+n+","+l+")"})},fadeInLabelsAndLines:function(t){var e="default"===t.options.effects.load.effect?t.options.effects.load.speed:1;setTimeout(function(){var e="default"===t.options.effects.load.effect?400:1;d3.selectAll("."+t.cssPrefix+"labelGroup-outer").transition().duration(e).style("opacity",function(e,i){var s=t.options.labels.outer.hideWhenLessThanPercentage,n=h.getPercentage(t,i,t.options.labels.percentage.decimalPlaces);return null!==s&&s>n?0:1}),d3.selectAll("."+t.cssPrefix+"labelGroup-inner").transition().duration(e).style("opacity",function(e,i){var s=t.options.labels.inner.hideWhenLessThanPercentage,n=h.getPercentage(t,i,t.options.labels.percentage.decimalPlaces);return null!==s&&s>n?0:1}),d3.selectAll("g."+t.cssPrefix+"lineGroups").transition().duration(e).style("opacity",1),a.isFunction(t.options.callbacks.onload)&&setTimeout(function(){try{t.options.callbacks.onload()}catch(e){}},e)},e)},getIncludes:function(t){var e=!1,i=!1,s=!1;switch(t){case"label":e=!0;break;case"value":i=!0;break;case"percentage":s=!0;break;case"label-value1":case"label-value2":e=!0,i=!0;break;case"label-percentage1":case"label-percentage2":e=!0,s=!0}return{mainLabel:e,value:i,percentage:s}},computeOuterLabelCoords:function(t){t.svg.selectAll("."+t.cssPrefix+"labelGroup-outer").each(function(e,i){return l.getIdealOuterLabelPositions(t,i)}),l.resolveOuterLabelCollisions(t)},resolveOuterLabelCollisions:function(t){if("none"!==t.options.labels.outer.format){var e=t.options.data.content.length;l.checkConflict(t,0,"clockwise",e),l.checkConflict(t,e-1,"anticlockwise",e)}},checkConflict:function(t,e,i,s){var n,r;if(!(1>=s)){var o=t.outerLabelGroupData[e].hs;if(!("clockwise"===i&&"right"!==o||"anticlockwise"===i&&"left"!==o)){var h="clockwise"===i?e+1:e-1,c=t.outerLabelGroupData[e],u=t.outerLabelGroupData[h],d={labelHeights:t.outerLabelGroupData[0].h,center:t.pieCenter,lineLength:t.outerRadius+t.options.labels.outer.pieDistance,heightChange:t.outerLabelGroupData[0].h+1};if("clockwise"===i){for(n=0;e>=n;n++)if(r=t.outerLabelGroupData[n],a.rectIntersect(r,u)){l.adjustLabelPos(t,h,c,d);break}}else for(n=s-1;n>=e;n--)if(r=t.outerLabelGroupData[n],a.rectIntersect(r,u)){l.adjustLabelPos(t,h,c,d);break}l.checkConflict(t,h,i,s)}}},adjustLabelPos:function(t,e,i,s){var n,a,r,o;o=i.y+s.heightChange,a=s.center.y-o,n=Math.sqrt(Math.abs(s.lineLength)>Math.abs(a)?s.lineLength*s.lineLength-a*a:a*a-s.lineLength*s.lineLength),r="right"===i.hs?s.center.x+n:s.center.x-n-t.outerLabelGroupData[e].w,t.outerLabelGroupData[e].x=r,t.outerLabelGroupData[e].y=o},getIdealOuterLabelPositions:function(t,e){var i=d3.select("#"+t.cssPrefix+"labelGroup"+e+"-outer").node();if(i){var s=i.getBBox(),n=h.getSegmentAngle(e,t.options.data.content,t.totalSize,{midpoint:!0}),a=t.pieCenter.x,r=t.pieCenter.y-(t.outerRadius+t.options.labels.outer.pieDistance),l=o.rotate(a,r,t.pieCenter.x,t.pieCenter.y,n),c="right";n>180?(l.x-=s.width+8,c="left"):l.x+=8,t.outerLabelGroupData[e]={x:l.x,y:l.y,w:s.width,h:s.height,hs:c}}}},h={create:function(t){var e=t.pieCenter,i=t.options.colors,s=t.options.effects.load,n=t.options.misc.colors.segmentStroke,a=t.svg.insert("g","#"+t.cssPrefix+"title").attr("transform",function(){return o.getPieTranslateCenter(e)}).attr("class",t.cssPrefix+"pieChart"),r=d3.svg.arc().innerRadius(t.innerRadius).outerRadius(t.outerRadius).startAngle(0).endAngle(function(e){return e.value/t.totalSize*2*Math.PI}),l=a.selectAll("."+t.cssPrefix+"arc").data(t.options.data.content).enter().append("g").attr("class",t.cssPrefix+"arc"),c=s.speed;"none"===s.effect&&(c=0),l.append("path").attr("id",function(e,i){return t.cssPrefix+"segment"+i}).attr("fill",function(e,s){var n=i[s];return t.options.misc.gradient.enabled&&(n="url(#"+t.cssPrefix+"grad"+s+")"),n}).style("stroke",n).style("stroke-width",1).transition().ease("cubic-in-out").duration(c).attr("data-index",function(t,e){return e}).attrTween("d",function(e){var i=d3.interpolate({value:0},e);return function(e){return t.arc(i(e))}}),t.svg.selectAll("g."+t.cssPrefix+"arc").attr("transform",function(e,i){var s=0;return i>0&&(s=h.getSegmentAngle(i-1,t.options.data.content,t.totalSize)),"rotate("+s+")"}),t.arc=r},addGradients:function(t){var e=t.svg.append("defs").selectAll("radialGradient").data(t.options.data.content).enter().append("radialGradient").attr("gradientUnits","userSpaceOnUse").attr("cx",0).attr("cy",0).attr("r","120%").attr("id",function(e,i){return t.cssPrefix+"grad"+i});e.append("stop").attr("offset","0%").style("stop-color",function(e,i){return t.options.colors[i]}),e.append("stop").attr("offset",t.options.misc.gradient.percentage+"%").style("stop-color",t.options.misc.gradient.color)},addSegmentEventHandlers:function(t){var e=d3.selectAll("."+t.cssPrefix+"arc,."+t.cssPrefix+"labelGroup-inner,."+t.cssPrefix+"labelGroup-outer");e.on("click",function(){var e,i=d3.select(this);if(i.attr("class")===t.cssPrefix+"arc")e=i.select("path");else{var s=i.attr("data-index");e=d3.select("#"+t.cssPrefix+"segment"+s)}var n=e.attr("class")===t.cssPrefix+"expanded";h.onSegmentEvent(t,t.options.callbacks.onClickSegment,e,n),"none"!==t.options.effects.pullOutSegmentOnClick.effect&&(n?h.closeSegment(t,e.node()):h.openSegment(t,e.node()))}),e.on("mouseover",function(){var e,i,s=d3.select(this);if(s.attr("class")===t.cssPrefix+"arc"?e=s.select("path"):(i=s.attr("data-index"),e=d3.select("#"+t.cssPrefix+"segment"+i)),t.options.effects.highlightSegmentOnMouseover){i=e.attr("data-index");var n=t.options.colors[i];e.style("fill",a.getColorShade(n,t.options.effects.highlightLuminosity))}t.options.tooltips.enabled&&(i=e.attr("data-index"),u.showTooltip(t,i));var r=e.attr("class")===t.cssPrefix+"expanded";h.onSegmentEvent(t,t.options.callbacks.onMouseoverSegment,e,r)}),e.on("mousemove",function(){u.moveTooltip(t)}),e.on("mouseout",function(){var e,i,s=d3.select(this);if(s.attr("class")===t.cssPrefix+"arc"?e=s.select("path"):(i=s.attr("data-index"),e=d3.select("#"+t.cssPrefix+"segment"+i)),t.options.effects.highlightSegmentOnMouseover){i=e.attr("data-index");var n=t.options.colors[i];t.options.misc.gradient.enabled&&(n="url(#"+t.cssPrefix+"grad"+i+")"),e.style("fill",n)}t.options.tooltips.enabled&&(i=e.attr("data-index"),u.hideTooltip(t,i));var a=e.attr("class")===t.cssPrefix+"expanded";h.onSegmentEvent(t,t.options.callbacks.onMouseoutSegment,e,a)})},onSegmentEvent:function(t,e,i,s){if(a.isFunction(e)){var n=parseInt(i.attr("data-index"),10);e({segment:i.node(),index:n,expanded:s,data:t.options.data.content[n]})}},openSegment:function(t,e){t.isOpeningSegment||(t.isOpeningSegment=!0,d3.selectAll("."+t.cssPrefix+"expanded").length>0&&h.closeSegment(t,d3.select("."+t.cssPrefix+"expanded").node()),d3.select(e).transition().ease(t.options.effects.pullOutSegmentOnClick.effect).duration(t.options.effects.pullOutSegmentOnClick.speed).attr("transform",function(e){var i=t.arc.centroid(e),s=i[0],n=i[1],a=Math.sqrt(s*s+n*n),r=parseInt(t.options.effects.pullOutSegmentOnClick.size,10);return"translate("+s/a*r+","+n/a*r+")"}).each("end",function(){t.currentlyOpenSegment=e,t.isOpeningSegment=!1,d3.select(this).attr("class",t.cssPrefix+"expanded")}))},closeSegment:function(t,e){d3.select(e).transition().duration(400).attr("transform","translate(0,0)").each("end",function(){d3.select(this).attr("class",""),t.currentlyOpenSegment=null})},getCentroid:function(t){var e=t.getBBox();return{x:e.x+e.width/2,y:e.y+e.height/2}},getSegmentAngle:function(t,e,i,s){var n,a=r({compounded:!0,midpoint:!1},s),o=e[t].value;if(a.compounded){n=0;for(var l=0;t>=l;l++)n+=e[l].value}"undefined"==typeof n&&(n=o);var h=n/i*360;if(a.midpoint){var c=o/i*360;h-=c/2}return h},getPercentage:function(t,e,i){var s=t.options.data.content[e].value/t.totalSize;return 0>=i?Math.round(100*s):(100*s).toFixed(i)}},c={offscreenCoord:-1e4,addTitle:function(t){t.svg.selectAll("."+t.cssPrefix+"title").data([t.options.header.title]).enter().append("text").text(function(t){return t.text}).attr({id:t.cssPrefix+"title","class":t.cssPrefix+"title",x:c.offscreenCoord,y:c.offscreenCoord}).attr("text-anchor",function(){var e;return e="top-center"===t.options.header.location||"pie-center"===t.options.header.location?"middle":"left"}).attr("fill",function(t){return t.color}).style("font-size",function(t){return t.fontSize+"px"}).style("font-family",function(t){return t.font})},positionTitle:function(t){var e,i=t.textComponents,s=t.options.header.location,n=t.options.misc.canvasPadding,a=t.options.size.canvasWidth,r=t.options.header.titleSubtitlePadding;e="top-left"===s?n.left:(a-n.right)/2+n.left,e+=t.options.misc.pieCenterOffset.x;var o=n.top+i.title.h;if("pie-center"===s)if(o=t.pieCenter.y,i.subtitle.exists){var l=i.title.h+r+i.subtitle.h;o=o-l/2+i.title.h}else o+=i.title.h/4;t.svg.select("#"+t.cssPrefix+"title").attr("x",e).attr("y",o)},addSubtitle:function(t){var e=t.options.header.location;t.svg.selectAll("."+t.cssPrefix+"subtitle").data([t.options.header.subtitle]).enter().append("text").text(function(t){return t.text}).attr("x",c.offscreenCoord).attr("y",c.offscreenCoord).attr("id",t.cssPrefix+"subtitle").attr("class",t.cssPrefix+"subtitle").attr("text-anchor",function(){var t;return t="top-center"===e||"pie-center"===e?"middle":"left"}).attr("fill",function(t){return t.color}).style("font-size",function(t){return t.fontSize+"px"}).style("font-family",function(t){return t.font})},positionSubtitle:function(t){var e,i=t.options.misc.canvasPadding,s=t.options.size.canvasWidth;e="top-left"===t.options.header.location?i.left:(s-i.right)/2+i.left,e+=t.options.misc.pieCenterOffset.x;var n=c.getHeaderHeight(t);t.svg.select("#"+t.cssPrefix+"subtitle").attr("x",e).attr("y",n)},addFooter:function(t){t.svg.selectAll("."+t.cssPrefix+"footer").data([t.options.footer]).enter().append("text").text(function(t){return t.text}).attr("x",c.offscreenCoord).attr("y",c.offscreenCoord).attr("id",t.cssPrefix+"footer").attr("class",t.cssPrefix+"footer").attr("text-anchor",function(){var e="left";return"bottom-center"===t.options.footer.location?e="middle":"bottom-right"===t.options.footer.location&&(e="left"),e}).attr("fill",function(t){return t.color}).style("font-size",function(t){return t.fontSize+"px"}).style("font-family",function(t){return t.font})},positionFooter:function(t){var e,i=t.options.footer.location,s=t.textComponents.footer.w,n=t.options.size.canvasWidth,a=t.options.size.canvasHeight,r=t.options.misc.canvasPadding;e="bottom-left"===i?r.left:"bottom-right"===i?n-s-r.right:n/2,t.svg.select("#"+t.cssPrefix+"footer").attr("x",e).attr("y",a-r.bottom)},getHeaderHeight:function(t){var e;if(t.textComponents.title.exists){var i=t.textComponents.title.h+t.options.header.titleSubtitlePadding+t.textComponents.subtitle.h;e="pie-center"===t.options.header.location?t.pieCenter.y-i/2+i:i+t.options.misc.canvasPadding.top}else if("pie-center"===t.options.header.location){var s=t.options.misc.canvasPadding.bottom+t.textComponents.footer.h;e=(t.options.size.canvasHeight-s)/2+t.options.misc.canvasPadding.top+t.textComponents.subtitle.h/2}else e=t.options.misc.canvasPadding.top+t.textComponents.subtitle.h;return e}},u={addTooltips:function(t){var e=t.svg.insert("g").attr("class",t.cssPrefix+"tooltips");e.selectAll("."+t.cssPrefix+"tooltip").data(t.options.data.content).enter().append("g").attr("class",t.cssPrefix+"tooltip").attr("id",function(e,i){return t.cssPrefix+"tooltip"+i}).style("opacity",0).append("rect").attr({rx:t.options.tooltips.styles.borderRadius,ry:t.options.tooltips.styles.borderRadius,x:-t.options.tooltips.styles.padding,opacity:t.options.tooltips.styles.backgroundOpacity}).style("fill",t.options.tooltips.styles.backgroundColor),e.selectAll("."+t.cssPrefix+"tooltip").data(t.options.data.content).append("text").attr("fill",function(){return t.options.tooltips.styles.color}).style("font-size",function(){return t.options.tooltips.styles.fontSize}).style("font-family",function(){return t.options.tooltips.styles.font}).text(function(e,i){var s=t.options.tooltips.string;return"caption"===t.options.tooltips.type&&(s=e.caption),u.replacePlaceholders(t,s,i,{label:e.label,value:e.value,percentage:h.getPercentage(t,i,t.options.labels.percentage.decimalPlaces)})}),e.selectAll("."+t.cssPrefix+"tooltip rect").attr({width:function(e,i){var s=a.getDimensions(t.cssPrefix+"tooltip"+i);return s.w+2*t.options.tooltips.styles.padding},height:function(e,i){var s=a.getDimensions(t.cssPrefix+"tooltip"+i);return s.h+2*t.options.tooltips.styles.padding},y:function(e,i){var s=a.getDimensions(t.cssPrefix+"tooltip"+i);return-(s.h/2)+1}})},showTooltip:function(t,e){var i=t.options.tooltips.styles.fadeInSpeed;u.currentTooltip===e&&(i=1),u.currentTooltip=e,d3.select("#"+t.cssPrefix+"tooltip"+e).transition().duration(i).style("opacity",function(){return 1}),u.moveTooltip(t)},moveTooltip:function(t){d3.selectAll("#"+t.cssPrefix+"tooltip"+u.currentTooltip).attr("transform",function(){var e=d3.mouse(this.parentNode),i=e[0]+t.options.tooltips.styles.padding+2,s=e[1]-2*t.options.tooltips.styles.padding-2;return"translate("+i+","+s+")"})},hideTooltip:function(t,e){d3.select("#"+t.cssPrefix+"tooltip"+e).style("opacity",function(){return 0}),d3.select("#"+t.cssPrefix+"tooltip"+u.currentTooltip).attr("transform",function(){var e=t.options.size.canvasWidth+1e3,i=t.options.size.canvasHeight+1e3;return"translate("+e+","+i+")"})},replacePlaceholders:function(t,e,i,s){a.isFunction(t.options.tooltips.placeholderParser)&&t.options.tooltips.placeholderParser(i,s);var n=function(){return function(){var t=arguments[1];return s.hasOwnProperty(t)?s[arguments[1]]:arguments[0]}};return e.replace(/\{(\w+)\}/g,n(s))}},d=function(l,h){if(this.element=l,"string"==typeof l){var c=l.replace(/^#/,"");this.element=document.getElementById(c)}var u={};r(!0,u,s,h),this.options=u,null!==this.options.misc.cssPrefix?this.cssPrefix=this.options.misc.cssPrefix:(this.cssPrefix="p"+i+"_",i++),n.initialCheck(this)&&(d3.select(this.element).attr(t,e),this.options.data.content=o.sortPieData(this),this.options.data.smallSegmentGrouping.enabled&&(this.options.data.content=a.applySmallSegmentGrouping(this.options.data.content,this.options.data.smallSegmentGrouping)),this.options.colors=a.initSegmentColors(this),this.totalSize=o.getTotalPieSize(this.options.data.content),p.call(this))};d.prototype.recreate=function(){n.initialCheck(this)&&(this.options.data.content=o.sortPieData(this),this.options.data.smallSegmentGrouping.enabled&&(this.options.data.content=a.applySmallSegmentGrouping(this.options.data.content,this.options.data.smallSegmentGrouping)),this.options.colors=a.initSegmentColors(this),this.totalSize=o.getTotalPieSize(this.options.data.content),p.call(this))},d.prototype.redraw=function(){this.element.innerHTML="",p.call(this)},d.prototype.destroy=function(){this.element.innerHTML="",
d3.select(this.element).attr(t,null)},d.prototype.getOpenSegment=function(){var t=this.currentlyOpenSegment;if(null!==t&&"undefined"!=typeof t){var e=parseInt(d3.select(t).attr("data-index"),10);return{element:t,index:e,data:this.options.data.content[e]}}return null},d.prototype.openSegment=function(t){t=parseInt(t,10),0>t||t>this.options.data.content.length-1||h.openSegment(this,d3.select("#"+this.cssPrefix+"segment"+t).node())},d.prototype.closeSegment=function(){var t=this.currentlyOpenSegment;t&&h.closeSegment(this,t)},d.prototype.updateProp=function(t,e){switch(t){case"header.title.text":var i=a.processObj(this.options,t);a.processObj(this.options,t,e),d3.select("#"+this.cssPrefix+"title").html(e),(""===i&&""!==e||""!==i&&""===e)&&this.redraw();break;case"header.subtitle.text":var s=a.processObj(this.options,t);a.processObj(this.options,t,e),d3.select("#"+this.cssPrefix+"subtitle").html(e),(""===s&&""!==e||""!==s&&""===e)&&this.redraw();break;case"callbacks.onload":case"callbacks.onMouseoverSegment":case"callbacks.onMouseoutSegment":case"callbacks.onClickSegment":case"effects.pullOutSegmentOnClick.effect":case"effects.pullOutSegmentOnClick.speed":case"effects.pullOutSegmentOnClick.size":case"effects.highlightSegmentOnMouseover":case"effects.highlightLuminosity":a.processObj(this.options,t,e);break;default:a.processObj(this.options,t,e),this.destroy(),this.recreate()}};var p=function(){this.svg=a.addSVGSpace(this),this.textComponents={headerHeight:0,title:{exists:""!==this.options.header.title.text,h:0,w:0},subtitle:{exists:""!==this.options.header.subtitle.text,h:0,w:0},footer:{exists:""!==this.options.footer.text,h:0,w:0}},this.outerLabelGroupData=[],this.textComponents.title.exists&&c.addTitle(this),this.textComponents.subtitle.exists&&c.addSubtitle(this),c.addFooter(this);var t=this;a.whenIdExists(this.cssPrefix+"footer",function(){c.positionFooter(t);var e=a.getDimensions(t.cssPrefix+"footer");t.textComponents.footer.h=e.h,t.textComponents.footer.w=e.w});var e=[];this.textComponents.title.exists&&e.push(this.cssPrefix+"title"),this.textComponents.subtitle.exists&&e.push(this.cssPrefix+"subtitle"),this.textComponents.footer.exists&&e.push(this.cssPrefix+"footer"),a.whenElementsExist(e,function(){if(t.textComponents.title.exists){var e=a.getDimensions(t.cssPrefix+"title");t.textComponents.title.h=e.h,t.textComponents.title.w=e.w}if(t.textComponents.subtitle.exists){var i=a.getDimensions(t.cssPrefix+"subtitle");t.textComponents.subtitle.h=i.h,t.textComponents.subtitle.w=i.w}if(t.textComponents.title.exists||t.textComponents.subtitle.exists){var s=0;t.textComponents.title.exists&&(s+=t.textComponents.title.h,t.textComponents.subtitle.exists&&(s+=t.options.header.titleSubtitlePadding)),t.textComponents.subtitle.exists&&(s+=t.textComponents.subtitle.h),t.textComponents.headerHeight=s}o.computePieRadius(t),o.calculatePieCenter(t),c.positionTitle(t),c.positionSubtitle(t),t.options.misc.gradient.enabled&&h.addGradients(t),h.create(t),l.add(t,"inner",t.options.labels.inner.format),l.add(t,"outer",t.options.labels.outer.format),l.positionLabelElements(t,"inner",t.options.labels.inner.format),l.positionLabelElements(t,"outer",t.options.labels.outer.format),l.computeOuterLabelCoords(t),l.positionLabelGroups(t,"outer"),l.computeLabelLinePositions(t),t.options.labels.lines.enabled&&"none"!==t.options.labels.outer.format&&l.addLabelLines(t),l.positionLabelGroups(t,"inner"),l.fadeInLabelsAndLines(t),t.options.tooltips.enabled&&u.addTooltips(t),h.addSegmentEventHandlers(t)})};return d}),!function(t,e){"use strict";if("object"==typeof exports)module.exports=e(require("d3"));else if("function"==typeof define&&define.amd)define(["d3"],function(i){return t.dimple=e(i),t.dimple});else if(t.d3)t.dimple=e(t.d3);else{if(!console||!console.warn)throw"dimple requires d3 to run.  Are you missing a reference to the d3 library?";console.warn("dimple requires d3 to run.  Are you missing a reference to the d3 library?")}}(this,function(t){"use strict";var e={version:"2.1.6",plot:{},aggregateMethod:{}};return e.axis=function(i,s,n,a,r,o){this.chart=i,this.position=s,this.categoryFields=null===r||void 0===r?n:[].concat(r),this.measure=a,this.timeField=r,this.floatingBarWidth=5,this.hidden=!1,this.showPercent=!1,this.colors=null,this.overrideMin=null,this.overrideMax=null,this.shapes=null,this.showGridlines=null,this.gridlineShapes=null,this.titleShape=null,this.dateParseFormat=null,this.tickFormat=null,this.timePeriod=null,this.timeInterval=1,this.useLog=!1,this.logBase=10,this.title=void 0,this.clamp=!0,this.ticks=null,this.fontSize="10px",this.fontFamily="sans-serif",this.autoRotateLabel=null===o||void 0===o?!0:o,this._slaves=[],this._scale=null,this._min=0,this._max=0,this._previousOrigin=null,this._origin=null,this._orderRules=[],this._groupOrderRules=[],this._draw=null,this._getAxisData=function(){var t,e,i=[],s=!1;if(this.chart&&this.chart.series){for(t=0;t<this.chart.series.length;t+=1)e=this.chart.series[t],e[this.position]===this&&(e.data&&e.data.length>0?i=i.concat(e.data):s=!0);s&&this.chart.data&&(i=i.concat(this.chart.data))}return i},this._getFontSize=function(){var t;return t=this.fontSize&&"auto"!==this.fontSize.toString().toLowerCase()?isNaN(this.fontSize)?this.fontSize:this.fontSize+"px":(this.chart._heightPixels()/35>10?this.chart._heightPixels()/35:10)+"px"},this._getFormat=function(){var e,i,s,n,a,r,o;return null!==this.tickFormat&&void 0!==this.tickFormat?e=this._hasTimeField()?t.time.format(this.tickFormat):t.format(this.tickFormat):this.showPercent?e=t.format("%"):this.useLog&&null!==this.measure?e=function(e){var i=Math.floor(Math.abs(e),0).toString().length,s=Math.min(Math.floor((i-1)/3),4),n="kmBT".substring(s-1,s),a="0"===Math.round(e/Math.pow(1e3,s)*10).toString().slice(-1)?0:1;return 0===e?0:t.format(",."+a+"f")(e/Math.pow(1e3,s))+n}:null!==this.measure?(i=Math.floor(Math.abs(this._max),0).toString(),s=Math.floor(Math.abs(this._min),0).toString(),n=Math.max(s.length,i.length),n>3?(a=Math.min(Math.floor((n-1)/3),4),r="kmBT".substring(a-1,a),o=1>=n-3*a?1:0,e=function(e){return 0===e?0:t.format(",."+o+"f")(e/Math.pow(1e3,a))+r}):(o=-Math.floor(Math.log(this._tick_step)/Math.LN10),e=t.format(",."+o+"f"))):e=function(t){return t},e},this._getTimePeriod=function(){var e=this.timePeriod,i=30,s=this._max-this._min;return this._hasTimeField()&&!this.timePeriod&&(e=i>=s/1e3?t.time.seconds:i>=s/6e4?t.time.minutes:i>=s/36e5?t.time.hours:i>=s/864e5?t.time.days:i>=s/6048e5?t.time.weeks:i>=s/26298e5?t.time.months:t.time.years),e},this._getTooltipText=function(e,i){if(this._hasTimeField())i[this.position+"Field"][0]&&e.push(this.timeField+": "+this._getFormat()(i[this.position+"Field"][0]));else if(this._hasCategories())this.categoryFields.forEach(function(t,s){null!==t&&void 0!==t&&i[this.position+"Field"][s]&&e.push(t+(i[this.position+"Field"][s]!==t?": "+i[this.position+"Field"][s]:""))},this);else if(this._hasMeasure())switch(this.position){case"x":e.push(this.measure+": "+this._getFormat()(i.width));break;case"y":e.push(this.measure+": "+this._getFormat()(i.height));break;case"p":e.push(this.measure+": "+this._getFormat()(i.angle)+" ("+t.format("%")(i.piePct)+")");break;default:e.push(this.measure+": "+this._getFormat()(i[this.position+"Value"]))}},this._getTopMaster=function(){var t=this;return null!==this.master&&void 0!==this.master&&(t=this.master._getTopMaster()),t},this._hasCategories=function(){return null!==this.categoryFields&&void 0!==this.categoryFields&&this.categoryFields.length>0},this._hasMeasure=function(){return null!==this.measure&&void 0!==this.measure},this._hasTimeField=function(){return null!==this.timeField&&void 0!==this.timeField},this._parseDate=function(e){var i;return i=null===this.dateParseFormat||void 0===this.dateParseFormat?isNaN(e)?Date.parse(e):new Date(e):t.time.format(this.dateParseFormat).parse(e)},this._update=function(i){var s,n,a,r,o=[],l=this.ticks||10,h=function(t,i,s){var n,a,r=t.categoryFields[0],o=t._getAxisData(),l=r,h=!1,c=!0,u=null;for(n=0;n<o.length;n+=1)if(u=t._parseDate(o[n][r]),null!==u&&void 0!==u&&isNaN(u)){c=!1;break}return c||t.chart.series.forEach(function(e){e[i]===t&&e[s]._hasMeasure()&&(l=e[s].measure,h=!0)},this),a=t._orderRules.concat({ordering:l,desc:h}),e._getOrderedList(o,r,a)};if(this._min=this.showPercent&&this._min<-1?-1:this._min,this._max=this.showPercent&&this._max>1?1:this._max,this._min=null!==this.overrideMin?this.overrideMin:this._min,this._max=null!==this.overrideMax?this.overrideMax:this._max,"x"!==this.position||null!==this._scale&&!i){if("y"!==this.position||null!==this._scale&&!i)this.position.length>0&&"z"===this.position[0]&&null===this._scale?this._scale=this.useLog?t.scale.log().range([this.chart._heightPixels()/300,this.chart._heightPixels()/10]).domain([0===this._min?Math.pow(this.logBase,-1):this._min,0===this._max?-1*Math.pow(this.logBase,-1):this._max]).clamp(this.clamp).base(this.logBase):t.scale.linear().range([1,this.chart._heightPixels()/10]).domain([this._min,this._max]).clamp(this.clamp):this.position.length>0&&"p"===this.position[0]&&null===this._scale?this._scale=this.useLog?t.scale.log().range([0,360]).domain([0===this._min?Math.pow(this.logBase,-1):this._min,0===this._max?-1*Math.pow(this.logBase,-1):this._max]).clamp(this.clamp).base(this.logBase):t.scale.linear().range([0,360]).domain([this._min,this._max]).clamp(this.clamp):this.position.length>0&&"c"===this.position[0]&&null===this._scale&&(this._scale=t.scale.linear().range([0,null===this.colors||1===this.colors.length?1:this.colors.length-1]).domain([this._min,this._max]).clamp(this.clamp));else if(this._hasTimeField()?this._scale=t.time.scale().range([this.chart._yPixels()+this.chart._heightPixels(),this.chart._yPixels()]).domain([this._min,this._max]).clamp(this.clamp):this.useLog?this._scale=t.scale.log().range([this.chart._yPixels()+this.chart._heightPixels(),this.chart._yPixels()]).domain([0===this._min?Math.pow(this.logBase,-1):this._min,0===this._max?-1*Math.pow(this.logBase,-1):this._max]).clamp(this.clamp).base(this.logBase).nice():null===this.measure||void 0===this.measure?(o=h(this,"y","x"),null!==this._slaves&&void 0!==this._slaves&&this._slaves.forEach(function(t){o=o.concat(h(t,"y","x"))},this),this._scale=t.scale.ordinal().rangePoints([this.chart._yPixels()+this.chart._heightPixels(),this.chart._yPixels()]).domain(o.concat([""]))):this._scale=t.scale.linear().range([this.chart._yPixels()+this.chart._heightPixels(),this.chart._yPixels()]).domain([this._min,this._max]).clamp(this.clamp).nice(),!this.hidden)switch(this.chart._axisIndex(this,"y")){case 0:this._draw=t.svg.axis().orient("left").scale(this._scale),this.ticks&&this._draw.ticks(l);break;case 1:this._draw=t.svg.axis().orient("right").scale(this._scale),this.ticks&&this._draw.ticks(l)}}else if(this._hasTimeField()?this._scale=t.time.scale().range([this.chart._xPixels(),this.chart._xPixels()+this.chart._widthPixels()]).domain([this._min,this._max]).clamp(this.clamp):this.useLog?this._scale=t.scale.log().range([this.chart._xPixels(),this.chart._xPixels()+this.chart._widthPixels()]).domain([0===this._min?Math.pow(this.logBase,-1):this._min,0===this._max?-1*Math.pow(this.logBase,-1):this._max]).clamp(this.clamp).base(this.logBase).nice():null===this.measure||void 0===this.measure?(o=h(this,"x","y"),null!==this._slaves&&void 0!==this._slaves&&this._slaves.forEach(function(t){o=o.concat(h(t,"x","y"))},this),this._scale=t.scale.ordinal().rangePoints([this.chart._xPixels(),this.chart._xPixels()+this.chart._widthPixels()]).domain(o.concat([""]))):this._scale=t.scale.linear().range([this.chart._xPixels(),this.chart._xPixels()+this.chart._widthPixels()]).domain([this._min,this._max]).clamp(this.clamp).nice(),!this.hidden)switch(this.chart._axisIndex(this,"x")){case 0:this._draw=t.svg.axis().orient("bottom").scale(this._scale),this.ticks&&this._draw.ticks(l);break;case 1:this._draw=t.svg.axis().orient("top").scale(this._scale),this.ticks&&this._draw.ticks(l)}return null!==this._slaves&&void 0!==this._slaves&&this._slaves.length>0&&this._slaves.forEach(function(t){t._scale=this._scale},this),null!==i&&void 0!==i&&i!==!1||this._hasTimeField()||null===this._scale||null===this._scale.ticks||void 0===this._scale.ticks||!(this._scale.ticks(l).length>0)||"x"!==this.position&&"y"!==this.position||(s=this._scale.ticks(l),n=s[1]-s[0],a=((this._max-this._min)%n).toFixed(0),this._tick_step=n,0!==a&&(this._max=Math.ceil(this._max/n)*n,this._min=Math.floor(this._min/n)*n,this._update(!0))),r=this._scale.copy()(null!==o&&void 0!==o&&o.length>0?o[0]:this._min>0?this._min:this._max<0?this._max:0),this._origin!==r&&(this._previousOrigin=null===this._origin?r:this._origin,this._origin=r),this},this.addGroupOrderRule=function(t,e){this._groupOrderRules.push({ordering:t,desc:e})},this.addOrderRule=function(t,e){this._orderRules.push({ordering:t,desc:e})}},e.chart=function(i,s){this.svg=i,this.x="10%",this.y="10%",this.width="80%",this.height="80%",this.data=s,this.noFormats=!1,this.axes=[],this.series=[],this.legends=[],this.storyboard=null,this.titleShape=null,this.shapes=null,this.ease="cubic-in-out",this.staggerDraw=!1,this._group=i.append("g"),this._tooltipGroup=null,this._assignedColors={},this._assignedClasses={},this._nextColor=0,this._nextClass=0,this._axisIndex=function(t,e){var i=0,s=0,n=-1;for(i=0;i<this.axes.length;i+=1){if(this.axes[i]===t){n=s;break}(null===e||void 0===e||e[0]===this.axes[i].position[0])&&(s+=1)}return n},this._getAllData=function(){var t=[];return null!==this.data&&void 0!==this.data&&this.data.length>0&&(t=t.concat(this.data)),null!==this.series&&void 0!==this.series&&this.series.length>0&&this.series.forEach(function(e){null!==e.data&&void 0!==e.data&&e.data.length>0&&(t=t.concat(e.data))}),t},this._getData=function(i,s,n,a,r,o,l,h,c,u){var d,p,f=[],g=function(t,e){var i=[];return null!==t&&(t._hasTimeField()?i.push(t._parseDate(e[t.timeField])):t._hasCategories()&&t.categoryFields.forEach(function(t){i.push(e[t])},this)),i},m={x:!1,y:!1,z:!1,p:!1,c:!1},y={x:[],y:[]},_={x:[],y:[],z:[],p:[]},x={min:null,max:null},v={x:[],y:[],z:[],p:[]},b=[],C={},F={x:0,y:0,z:0,p:0},w="",P=[],k=[],S=[],L="",M=[],z="",T=[],B="",O=[],A=[],D=i,H=[];this.storyboard&&this.storyboard.categoryFields.length>0&&(w=this.storyboard.categoryFields[0],P=e._getOrderedList(D,w,this.storyboard._orderRules)),o&&o._hasCategories()&&o._hasMeasure()&&(L=o.categoryFields[0],M=e._getOrderedList(D,L,o._orderRules.concat([{ordering:o.measure,desc:!0}]))),l&&l._hasCategories()&&l._hasMeasure()&&(z=l.categoryFields[0],T=e._getOrderedList(D,z,l._orderRules.concat([{ordering:l.measure,desc:!0}]))),c&&c._hasCategories()&&c._hasMeasure()&&(B=c.categoryFields[0],O=e._getOrderedList(D,B,c._orderRules.concat([{ordering:c.measure,desc:!0}]))),D.length>0&&s&&s.length>0&&(A=[].concat(a),k=[],s.forEach(function(t){void 0!==D[0][t]&&k.push(t)},this),c&&c._hasMeasure()?A.push({ordering:c.measure,desc:!0}):u&&u._hasMeasure()?A.push({ordering:u.measure,desc:!0}):h&&h._hasMeasure()?A.push({ordering:h.measure,desc:!0}):o&&o._hasMeasure()?A.push({ordering:o.measure,desc:!0}):l&&l._hasMeasure()&&A.push({ordering:l.measure,desc:!0}),S=e._getOrderedList(D,k,A)),D.sort(function(t,e){var i,s,n,a,r,o,l=0;if(""!==w&&(l=P.indexOf(t[w])-P.indexOf(e[w])),""!==L&&0===l&&(l=M.indexOf(t[L])-M.indexOf(e[L])),""!==z&&0===l&&(l=T.indexOf(t[z])-T.indexOf(e[z])),""!==B&&0===l&&(l=O.indexOf(t[B])-T.indexOf(e[B])),k&&k.length>0&&0===l)for(i=[].concat(k),l=0,n=0;n<S.length;n+=1){for(s=[].concat(S[n]),r=!0,o=!0,a=0;a<i.length;a+=1)r=r&&t[i[a]]===s[a],o=o&&e[i[a]]===s[a];if(r&&o){l=0;break}if(r){l=-1;break}if(o){l=1;break}}return l}),D.forEach(function(t){var e,i,a,r,d,p=-1,y=g(o,t),_=g(l,t),x=g(h,t),v=g(c,t),b=[];if(s&&0!==s.length)for(a=0;a<s.length;a+=1)b.push(void 0===t[s[a]]?s[a]:t[s[a]]);else b=["All"];for(e=b.join("/")+"_"+y.join("/")+"_"+_.join("/")+"_"+v.join("/")+"_"+x.join("/"),i=0;i<f.length;i+=1)if(f[i].key===e){p=i;break}-1===p&&(r={key:e,aggField:b,xField:y,xValue:null,xCount:0,yField:_,yValue:null,yCount:0,pField:v,pValue:null,pCount:0,zField:x,zValue:null,zCount:0,cValue:0,cCount:0,x:0,y:0,xOffset:0,yOffset:0,width:0,height:0,cx:0,cy:0,xBound:0,yBound:0,xValueList:[],yValueList:[],zValueList:[],pValueList:[],cValueList:[],fill:{},stroke:{}},f.push(r),p=f.length-1),d=function(e,i){var s,a,r=!0,o={value:0,count:1},l={value:0,count:1},h="";null!==i&&(s=i.getFrameValue(),i.categoryFields.forEach(function(e,i){i>0&&(h+="/"),h+=t[e],r=h===s},this)),null!==e&&void 0!==e&&r&&(a=f[p],e._hasMeasure()&&null!==t[e.measure]&&void 0!==t[e.measure]&&(-1===a[e.position+"ValueList"].indexOf(t[e.measure])&&a[e.position+"ValueList"].push(t[e.measure]),isNaN(parseFloat(t[e.measure]))&&(m[e.position]=!0),o.value=a[e.position+"Value"],o.count=a[e.position+"Count"],l.value=t[e.measure],a[e.position+"Value"]=n(o,l),a[e.position+"Count"]+=1))},d(o,this.storyboard),d(l,this.storyboard),d(h,this.storyboard),d(c,this.storyboard),d(u,this.storyboard)},this),o&&o._hasCategories()&&o.categoryFields.length>1&&void 0!==y.x&&(H=[],l._hasMeasure()&&H.push({ordering:l.measure,desc:!0}),y.x=e._getOrderedList(D,o.categoryFields[1],o._groupOrderRules.concat(H))),l&&l._hasCategories()&&l.categoryFields.length>1&&void 0!==y.y&&(H=[],o._hasMeasure()&&H.push({ordering:o.measure,desc:!0}),y.y=e._getOrderedList(D,l.categoryFields[1],l._groupOrderRules.concat(H)),y.y.reverse()),f.forEach(function(t){null!==o&&(m.x===!0&&(t.xValue=t.xValueList.length),d=(_.x[t.xField.join("/")]||0)+(l._hasMeasure()?Math.abs(t.yValue):0),_.x[t.xField.join("/")]=d),null!==l&&(m.y===!0&&(t.yValue=t.yValueList.length),d=(_.y[t.yField.join("/")]||0)+(o._hasMeasure()?Math.abs(t.xValue):0),_.y[t.yField.join("/")]=d),null!==c&&(m.p===!0&&(t.pValue=t.pValueList.length),d=(_.p[t.pField.join("/")]||0)+(c._hasMeasure()?Math.abs(t.pValue):0),_.p[t.pField.join("/")]=d),null!==h&&(m.z===!0&&(t.zValue=t.zValueList.length),d=(_.z[t.zField.join("/")]||0)+(h._hasMeasure()?Math.abs(t.zValue):0),_.z[t.zField.join("/")]=d),null!==u&&((null===x.min||t.cValue<x.min)&&(x.min=t.cValue),(null===x.max||t.cValue>x.max)&&(x.max=t.cValue))},this);for(p in _.x)_.x.hasOwnProperty(p)&&(F.x+=_.x[p]);for(p in _.y)_.y.hasOwnProperty(p)&&(F.y+=_.y[p]);for(p in _.p)_.p.hasOwnProperty(p)&&(F.p+=_.p[p]);for(p in _.z)_.z.hasOwnProperty(p)&&(F.z+=_.z[p]);return f.forEach(function(e){var i,s,n,a,d,p=function(t,i,s){var n,a,o,l,h;null!==t&&void 0!==t&&(l=t.position,t._hasCategories()?t._hasMeasure()?(n=e[t.position+"Field"].join("/"),a=t.showPercent?_[t.position][n]/F[t.position]:_[t.position][n],-1===b.indexOf(n)&&(C[n]=a+(b.length>0?C[b[b.length-1]]:0),b.push(n)),o=e[l+"Bound"]=e["c"+l]="x"!==l&&"y"!==l||!r?a:C[n],e[s]=a,e[l]=o-("x"===l&&a>=0||"y"===l&&0>=a?a:0)):(e[l]=e["c"+l]=e[l+"Field"][0],e[s]=1,void 0!==y[l]&&null!==y[l]&&y[l].length>=2&&(e[l+"Offset"]=y[l].indexOf(e[l+"Field"][1]),e[s]=1/y[l].length)):(a=t.showPercent?e[l+"Value"]/_[i][e[i+"Field"].join("/")]:e[l+"Value"],n=e[i+"Field"].join("/")+(e[l+"Value"]>=0),h=v[l][n]=(null===v[l][n]||void 0===v[l][n]||"z"===l||"p"===l?0:v[l][n])+a,o=e[l+"Bound"]=e["c"+l]="x"!==l&&"y"!==l||!r?a:h,e[s]=a,e[l]=o-("x"===l&&a>=0||"y"===l&&0>=a?a:0)))};p(o,"y","width"),p(l,"x","height"),p(h,"z","r"),p(c,"p","angle"),null!==u&&null!==x.min&&null!==x.max&&(x.min===x.max&&(x.min-=.5,x.max+=.5),x.min=u.overrideMin||x.min,x.max=u.overrideMax||x.max,e.cValue=e.cValue>x.max?x.max:e.cValue<x.min?x.min:e.cValue,n=t.scale.linear().range([0,null===u.colors||1===u.colors.length?1:u.colors.length-1]).domain([x.min,x.max]),a=n(e.cValue),d=a-Math.floor(a),e.cValue===x.max&&(d=1),u.colors&&1===u.colors.length?(i=t.rgb(u.colors[0]),s=t.rgb(this.getColor(e.aggField.slice(-1)[0]).fill)):u.colors&&u.colors.length>1?(i=t.rgb(u.colors[Math.floor(a)]),s=t.rgb(u.colors[Math.ceil(a)])):(i=t.rgb("white"),s=t.rgb(this.getColor(e.aggField.slice(-1)[0]).fill)),i.r=Math.floor(i.r+(s.r-i.r)*d),i.g=Math.floor(i.g+(s.g-i.g)*d),i.b=Math.floor(i.b+(s.b-i.b)*d),e.fill=i.toString(),e.stroke=i.darker(.5).toString())},this),f},this._getDelay=function(t,i,s){return function(n){var a=0;return s&&i.staggerDraw&&(s.x._hasCategories()?a=e._helpers.cx(n,i,s)/i._widthPixels()*t:s.y._hasCategories()&&(a=(1-e._helpers.cy(n,i,s)/i._heightPixels())*t)),a}},this._getSeriesData=function(){null!==this.series&&void 0!==this.series&&this.series.forEach(function(t){var e,i,s,n,a,r,o=t.data||this.data||[],l=[].concat(t.categoryFields||"All"),h=this._getData(o,l,t.aggregate,t._orderRules,t._isStacked(),t.x,t.y,t.z,t.p,t.c),c=[],u={},d=t.startAngle*(Math.PI/180)||0,p=(t.endAngle||360)*(Math.PI/180);if(d>p&&(d-=2*Math.PI),t.p&&l.length>0){if(t.x&&t.y){for(l.pop(),c=this._getData(o,["__dimple_placeholder__"].concat(l),t.aggregate,t._orderRules,t._isStacked(),t.x,t.y,t.z,t.p,t.c),e=0;e<h.length;e+=1)for(s=["__dimple_placeholder__"].concat(h[e].aggField),s.pop(),t.x&&t.x._hasCategories()&&(s=s.concat(h[e].xField)),t.y&&t.y._hasCategories()&&(s=s.concat(h[e].yField)),n=s.join("|"),i=0;i<c.length;i+=1)if(a=[].concat(c[i].aggField),t.x&&t.x._hasCategories()&&(a=a.concat(c[i].xField)),t.y&&t.y._hasCategories()&&(a=a.concat(c[i].yField)),r=a.join("|"),n===r){h[e].xField=c[i].xField,h[e].xValue=c[i].xValue,h[e].xCount=c[i].xCount,h[e].yField=c[i].yField,h[e].yValue=c[i].yValue,h[e].yCount=c[i].yCount,h[e].zField=c[i].zField,h[e].zValue=c[i].zValue,h[e].zCount=c[i].zCount,h[e].x=c[i].x,h[e].y=c[i].y,h[e].r=c[i].r,h[e].xOffset=c[i].xOffset,h[e].yOffset=c[i].yOffset,h[e].width=c[i].width,h[e].height=c[i].height,h[e].cx=c[i].cx,h[e].cy=c[i].cy,h[e].xBound=c[i].xBound,h[e].yBound=c[i].yBound,h[e].xValueList=c[i].xValueList,h[e].yValueList=c[i].yValueList,h[e].zValueList=c[i].zValueList,h[e].cValueList=c[i].cValueList,h[e].pieKey=c[i].key,h[e].value=h.pValue,u[c[i].key]||(u[c[i].key]={total:0,angle:d}),u[c[i].key].total+=h[e].pValue;break}}else for(e=0;e<h.length;e+=1)h[e].pieKey="All",h[e].value=h.pValue,u[h[e].pieKey]||(u[h[e].pieKey]={total:0,angle:d}),u[h[e].pieKey].total+=h[e].pValue;for(e=0;e<h.length;e+=1)h[e].piePct=h[e].pValue/u[h[e].pieKey].total,h[e].startAngle=u[h[e].pieKey].angle,h[e].endAngle=h[e].startAngle+h[e].piePct*(p-d),u[h[e].pieKey].angle=h[e].endAngle}t._positionData=h},this)},this._handleTransition=function(t,e,i,s){var n=null;return n=0===e?t:t.transition().duration(e).delay(i._getDelay(e,i,s)).ease(i.ease)},this._heightPixels=function(){return e._parseYPosition(this.height,this.svg.node())},this._registerEventHandlers=function(i){null!==i._eventHandlers&&i._eventHandlers.length>0&&i._eventHandlers.forEach(function(s){var n,a=function(n){var a=new e.eventArgs;null!==i.chart.storyboard&&(a.frameValue=i.chart.storyboard.getFrameValue()),a.seriesValue=n.aggField,a.xValue=n.x,a.yValue=n.y,a.zValue=n.z,a.pValue=n.p,a.colorValue=n.cValue,a.seriesShapes=i.shapes,a.selectedShape=t.select(this),s.handler(a)};if(null!==s.handler&&"function"==typeof s.handler)if(null!==i._markers&&void 0!==i._markers)for(n in i._markers)i._markers.hasOwnProperty(n)&&i._markers[n].on(s.event,a);else i.shapes.on(s.event,a)},this)},this._widthPixels=function(){return e._parseXPosition(this.width,this.svg.node())},this._xPixels=function(){return e._parseXPosition(this.x,this.svg.node())},this._yPixels=function(){return e._parseYPosition(this.y,this.svg.node())},this.addAxis=function(t,i,s,n){var a=null,r=null;if(null!==i&&void 0!==i&&(i=[].concat(i)),"string"==typeof t||t instanceof String)a=new e.axis(this,t,i,s,n),this.axes.push(a);else{if(r=t,a=new e.axis(this,r.position,i,s,n),a._hasMeasure()!==r._hasMeasure())throw"You have specified a composite axis where some but not all axes have a measure - this is not supported, all axes must be of the same type.";if(a._hasTimeField()!==r._hasTimeField())throw"You have specified a composite axis where some but not all axes have a time field - this is not supported, all axes must be of the same type.";if((null===a.categoryFields||void 0===a.categoryFields?0:a.categoryFields.length)!==(null===r.categoryFields||void 0===r.categoryFields?0:r.categoryFields.length))throw"You have specified a composite axis where axes have differing numbers of category fields - this is not supported, all axes must be of the same type.";r._slaves.push(a)}return a},this.addCategoryAxis=function(t,e){return this.addAxis(t,e,null)},this.addColorAxis=function(t,e){var i=this.addAxis("c",null,t);return i.colors=null===e||void 0===e?null:[].concat(e),i},this.addLegend=function(t,i,s,n,a,r){r=null===r||void 0===r?this.series:[].concat(r),a=null===a||void 0===a?"left":a;var o=new e.legend(this,t,i,s,n,a,r);return this.legends.push(o),o},this.addLogAxis=function(t,e,i){var s=this.addAxis(t,null,e,null);return null!==i&&void 0!==i&&(s.logBase=i),s.useLog=!0,s},this.addMeasureAxis=function(t,e){return this.addAxis(t,null,e)},this.addPctAxis=function(t,e,i){var s=null;return s=null!==i&&void 0!==i?this.addAxis(t,i,e):this.addMeasureAxis(t,e),s.showPercent=!0,s},this.addSeries=function(t,i,s){(null===s||void 0===s)&&(s=this.axes),(null===i||void 0===i)&&(i=e.plot.bubble);var n,a=null,r=null,o=null,l=null,h=null;return s.forEach(function(t){null!==t&&i.supportedAxes.indexOf(t.position)>-1&&(null===a&&"x"===t.position[0]?a=t:null===r&&"y"===t.position[0]?r=t:null===o&&"z"===t.position[0]?o=t:null===l&&"c"===t.position[0]?l=t:null===l&&"p"===t.position[0]&&(h=t))},this),t&&(t=[].concat(t)),n=new e.series(this,t,a,r,o,l,h,i,e.aggregateMethod.sum,i.stacked),this.series.push(n),n},this.addTimeAxis=function(t,e,i,s){var n=this.addAxis(t,null,null,e);return n.tickFormat=s,n.dateParseFormat=i,n},this.assignClass=function(t,e){return this._assignedClasses[t]=e,this._assignedClasses[t]},this.assignColor=function(t,i,s,n){return this._assignedColors[t]=new e.color(i,s,n),this._assignedColors[t]},this.customClassList={axisLine:"dimple-custom-axis-line",axisLabel:"dimple-custom-axis-label",axisTitle:"dimple-custom-axis-title",tooltipBox:"dimple-custom-tooltip-box",tooltipLabel:"dimple-custom-tooltip-label",tooltipDropLine:"dimple-custom-tooltip-dropline",lineMarker:"dimple-custom-line-marker",legendLabel:"dimple-custom-legend-label",legendKey:"dimple-custom-legend-key",areaSeries:"dimple-custom-series-area",barSeries:"dimple-custom-series-bar",bubbleSeries:"dimple-custom-series-bubble",lineSeries:"dimple-custom-series-line",pieSeries:"dimple-custom-series-pie",gridline:"dimple-custom-gridline",colorClasses:["dimple-custom-format-1","dimple-custom-format-2","dimple-custom-format-3","dimple-custom-format-4","dimple-custom-format-5","dimple-custom-format-6","dimple-custom-format-7","dimple-custom-format-8","dimple-custom-format-9","dimple-custom-format-10"]},this.defaultColors=[new e.color("#80B1D3"),new e.color("#FB8072"),new e.color("#FDB462"),new e.color("#B3DE69"),new e.color("#FFED6F"),new e.color("#BC80BD"),new e.color("#8DD3C7"),new e.color("#CCEBC5"),new e.color("#FFFFB3"),new e.color("#BEBADA"),new e.color("#FCCDE5"),new e.color("#D9D9D9")],this.draw=function(e,i){e=e||0;var s,n,a=null,r=null,o=!1,l=!1,h=this._xPixels(),c=this._yPixels(),u=this._widthPixels(),d=this._heightPixels();return(void 0===i||null===i||i===!1)&&this._getSeriesData(),this.axes.forEach(function(t){t._scale=null},this),this.axes.forEach(function(t){if(t._min=0,t._max=0,n=[],t._hasMeasure()){var e=!1;this.series.forEach(function(i){if(i._deepMatch(t)){var s=i._axisBounds(t.position);t._min>s.min&&(t._min=s.min),t._max<s.max&&(t._max=s.max),e=!0}},this),e||this._getAllData().forEach(function(e){t._min>e[t.measure]&&(t._min=e[t.measure]),t._max<e[t.measure]&&(t._max=e[t.measure])},this)}else t._hasTimeField()?(t._min=null,t._max=null,this.series.forEach(function(e){e._deepMatch(t)&&null!==e[t.position].timeField&&void 0!==e[t.position].timeField&&-1===n.indexOf(e[t.position].timeField)&&n.push(e[t.position].timeField)},this),t._getAxisData().forEach(function(e){n.forEach(function(i){var s=t._parseDate(e[i]);(null===t._min||s<t._min)&&(t._min=s),(null===t._max||s>t._max)&&(t._max=s)},this)},this)):t._hasCategories()&&(t._min=0,s=[],this.series.forEach(function(e){e._deepMatch(t)&&null!==e[t.position].categoryFields[0]&&void 0!==e[t.position].categoryFields[0]&&-1===n.indexOf(e[t.position].categoryFields[0])&&n.push(e[t.position].categoryFields[0])},this),t._getAxisData().forEach(function(t){n.forEach(function(e){-1===s.indexOf(t[e])&&s.push(t[e])},this)},this),t._max=s.length);null!==t._slaves&&void 0!==t._slaves&&t._slaves.length>0&&t._slaves.forEach(function(e){e._min=t._min,e._max=t._max},this),t._update(),null===a&&"x"===t.position?a=t:null===r&&"y"===t.position&&(r=t)},this),this.axes.forEach(function(i){var s=!1,n=null,p=0,f=null,g=!1,m=0,y={l:null,t:null,r:null,b:null},_=0,x=0,v="",b=this,C=function(t){var i;return i=null===n||0===e||s?t:b._handleTransition(t,e,b)},F=function(){var e=t.select(this).selectAll("text");return!i.measure&&i._max>0&&("x"===i.position?e.attr("x",u/i._max/2):"y"===i.position&&e.attr("y",-1*(d/i._max)/2)),i.categoryFields&&i.categoryFields.length>0&&(i!==a||null!==r.categoryFields&&0!==r.categoryFields.length||e.attr("y",c+d-r._scale(0)+9),i!==r||null!==a.categoryFields&&0!==a.categoryFields.length||e.attr("x",-1*(a._scale(0)-h)-9)),this},w=function(e){return function(){var i=t.select(this).attr("class")||"";return-1===i.indexOf(e)&&(i+=" "+e),i.trim()}};null===i.gridlineShapes?(i.showGridlines||null===i.showGridlines&&!i._hasCategories()&&(!o&&"x"===i.position||!l&&"y"===i.position))&&(i.gridlineShapes=this._group.append("g").attr("class","dimple-gridline"),"x"===i.position?o=!0:l=!0):"x"===i.position?o=!0:l=!0,null===i.shapes&&(i.shapes=this._group.append("g").attr("class","dimple-axis dimple-axis-"+i.position).each(function(){b.noFormats||t.select(this).style("font-family",i.fontFamily).style("font-size",i._getFontSize())}),s=!0),i===a&&null!==r?(n="translate(0, "+(null===r.categoryFields||0===r.categoryFields.length?r._scale(0):c+d)+")",f="translate(0, "+(i===a?c+d:c)+")",p=-d):i===r&&null!==a?(n="translate("+(null===a.categoryFields||0===a.categoryFields.length?a._scale(0):h)+", 0)",f="translate("+(i===r?h:h+u)+", 0)",p=-u):"x"===i.position?(f=n="translate(0, "+(i===a?c+d:c)+")",p=-d):"y"===i.position&&(f=n="translate("+(i===r?h:h+u)+", 0)",p=-u),null!==n&&null!==i._draw&&(i._hasTimeField()?C(i.shapes).call(i._draw.ticks(i._getTimePeriod(),i.timeInterval).tickFormat(i._getFormat())).attr("transform",n).each(F):i.useLog?C(i.shapes).call(i._draw.ticks(4,i._getFormat())).attr("transform",n).each(F):C(i.shapes).call(i._draw.tickFormat(i._getFormat())).attr("transform",n).each(F),null!==i.gridlineShapes&&C(i.gridlineShapes).call(i._draw.tickSize(p,0,0).tickFormat("")).attr("transform",f)),C(i.shapes.selectAll("text")).attr("class",w(b.customClassList.axisLabel)).call(function(){b.noFormats||this.style("font-family",i.fontFamily).style("font-size",i._getFontSize())}),C(i.shapes.selectAll("path, line")).attr("class",w(b.customClassList.axisLine)).call(function(){b.noFormats||this.style("fill","none").style("stroke","black").style("shape-rendering","crispEdges")}),null!==i.gridlineShapes&&C(i.gridlineShapes.selectAll("line")).attr("class",w(b.customClassList.gridline)).call(function(){b.noFormats||this.style("fill","none").style("stroke","lightgray").style("opacity",.8)}),(null===i.measure||void 0===i.measure)&&(i.autoRotateLabel?i===a?(m=0,i.shapes.selectAll("text").each(function(){var t=this.getComputedTextLength();m=t>m?t:m}),m>u/i.shapes.selectAll("text")[0].length?(g=!0,i.shapes.selectAll("text").style("text-anchor","start").each(function(){var e=this.getBBox();t.select(this).attr("transform","rotate(90,"+e.x+","+(e.y+e.height/2)+") translate(-5, 0)")})):(g=!1,i.shapes.selectAll("text").style("text-anchor","middle").attr("transform",""))):"x"===i.position&&(m=0,i.shapes.selectAll("text").each(function(){var t=this.getComputedTextLength();m=t>m?t:m}),m>u/i.shapes.selectAll("text")[0].length?(g=!0,i.shapes.selectAll("text").style("text-anchor","end").each(function(){var e=this.getBBox();

t.select(this).attr("transform","rotate(90,"+(e.x+e.width)+","+(e.y+e.height/2)+") translate(5, 0)")})):(g=!1,i.shapes.selectAll("text").style("text-anchor","middle").attr("transform",""))):(g=!1,i.shapes.selectAll("text").style("text-anchor","middle").attr("transform",""))),null!==i.titleShape&&void 0!==i.titleShape&&i.titleShape.remove(),i.shapes.selectAll("text").each(function(){var t=this.getBBox();(null===y.l||-9-t.width<y.l)&&(y.l=-9-t.width),(null===y.r||t.x+t.width>y.r)&&(y.r=t.x+t.width),g?((null===y.t||t.y+t.height-t.width<y.t)&&(y.t=t.y+t.height-t.width),(null===y.b||t.height+t.width>y.b)&&(y.b=t.height+t.width)):((null===y.t||t.y<y.t)&&(y.t=t.y),(null===y.b||9+t.height>y.b)&&(y.b=9+t.height))}),"x"===i.position?(x=i===a?c+d+y.b+5:c+y.t-10,_=h+u/2):"y"===i.position&&(_=i===r?h+y.l-10:h+u+y.r+20,x=c+d/2,v="rotate(270, "+_+", "+x+")"),i.hidden||"x"!==i.position&&"y"!==i.position||null===i.title||(i.titleShape=this._group.append("text").attr("class","dimple-axis dimple-title "+b.customClassList.axisTitle+" dimple-axis-"+i.position),i.titleShape.attr("x",_).attr("y",x).attr("text-anchor","middle").attr("transform",v).text(void 0!==i.title?i.title:null===i.categoryFields||void 0===i.categoryFields||0===i.categoryFields.length?i.measure:i.categoryFields.join("/")).each(function(){b.noFormats||t.select(this).style("font-family",i.fontFamily).style("font-size",i._getFontSize())}),i===a?i.titleShape.each(function(){t.select(this).attr("y",x+this.getBBox().height/1.65)}):i===r&&i.titleShape.each(function(){t.select(this).attr("x",_+this.getBBox().height/1.65)}))},this),this.series.forEach(function(t){t.plot.draw(this,t,e),this._registerEventHandlers(t)},this),this.legends.forEach(function(t){t._draw()},this),this.storyboard&&(this.storyboard._drawText(),this.storyboard.autoplay&&this.storyboard.startAnimation()),this},this.getClass=function(t){return this._assignedClasses[t]||(this._assignedClasses[t]=this.customClassList.colorClasses[this._nextClass],this._nextClass=(this._nextClass+1)%this.customClassList.colorClasses.length),this._assignedClasses[t]},this.getColor=function(t){return(null===this._assignedColors[t]||void 0===this._assignedColors[t])&&(this._assignedColors[t]=this.defaultColors[this._nextColor],this._nextColor=(this._nextColor+1)%this.defaultColors.length),this._assignedColors[t]},this.setBounds=function(t,i,s,n){return this.x=t,this.y=i,this.width=s,this.height=n,this._xPixels=function(){return e._parseXPosition(this.x,this.svg.node())},this.draw(0,!0),this._yPixels=function(){return e._parseYPosition(this.y,this.svg.node())},this._widthPixels=function(){return e._parseXPosition(this.width,this.svg.node())},this._heightPixels=function(){return e._parseYPosition(this.height,this.svg.node())},this},this.setMargins=function(t,i,s,n){return this.x=t,this.y=i,this.width=0,this.height=0,this._xPixels=function(){return e._parseXPosition(this.x,this.svg.node())},this._yPixels=function(){return e._parseYPosition(this.y,this.svg.node())},this._widthPixels=function(){return e._parentWidth(this.svg.node())-this._xPixels()-e._parseXPosition(s,this.svg.node())},this._heightPixels=function(){return e._parentHeight(this.svg.node())-this._yPixels()-e._parseYPosition(n,this.svg.node())},this.draw(0,!0),this},this.setStoryboard=function(t,i){return this.storyboard=new e.storyboard(this,t),null!==i&&void 0!==i&&(this.storyboard.onTick=i),this.storyboard}},e.color=function(e,i,s){this.fill=e,this.stroke=null===i||void 0===i?t.rgb(e).darker(.5).toString():i,this.opacity=null===s||void 0===s?.8:s},e.eventArgs=function(){this.seriesValue=null,this.xValue=null,this.yValue=null,this.zValue=null,this.pValue=null,this.colorValue=null,this.frameValue=null,this.seriesShapes=null,this.selectedShape=null},e.legend=function(i,s,n,a,r,o,l){this.chart=i,this.series=l,this.x=s,this.y=n,this.width=a,this.height=r,this.horizontalAlign=o,this.shapes=null,this.fontSize="10px",this.fontFamily="sans-serif",this._draw=function(){var i,s=this._getEntries(),n=0,a=0,r=0,o=0,l=15,h=9,c=5,u=this;this.shapes&&this.shapes.remove(),i=this.chart._group.selectAll(".dimple-dont-select-any").data(s).enter().append("g").attr("class",function(t){return"dimple-legend "+e._createClass(t.aggField)}).attr("opacity",1),i.append("text").attr("class",function(t){return"dimple-legend dimple-legend-text "+e._createClass(t.aggField)+" "+u.chart.customClassList.legendLabel}).text(function(t){return t.key}).call(function(){u.chart.noFormats||this.style("font-family",u.fontFamily).style("font-size",u._getFontSize()).style("shape-rendering","crispEdges")}).each(function(){var t=this.getBBox();t.width>n&&(n=t.width),t.height>a&&(a=t.height)}),i.append("rect").attr("class",function(t){return"dimple-legend dimple-legend-key "+e._createClass(t.aggField)}).attr("height",h).attr("width",l),a=(h>a?h:a)+u._getVerticalPadding(),n+=l+u._getHorizontalPadding(),i.each(function(i){r+n>u._widthPixels()&&(r=0,o+=a),o>u._heightPixels()?t.select(this).remove():(t.select(this).select("text").attr("x","left"===u.horizontalAlign?u._xPixels()+l+c+r:u._xPixels()+(u._widthPixels()-r-n)+l+c).attr("y",function(){return u._yPixels()+o+this.getBBox().height/1.65}).attr("width",u._widthPixels()).attr("height",u._heightPixels()),t.select(this).select("rect").attr("class",function(t){return"dimple-legend dimple-legend-key "+e._createClass(t.aggField)+" "+u.chart.customClassList.legendKey+" "+t.css}).attr("x","left"===u.horizontalAlign?u._xPixels()+r:u._xPixels()+(u._widthPixels()-r-n)).attr("y",u._yPixels()+o).attr("height",h).attr("width",l).call(function(){u.chart.noFormats||this.style("fill",i.fill).style("stroke",i.stroke).style("opacity",i.opacity).style("shape-rendering","crispEdges")}),r+=n)}),this.shapes=i},this._getEntries=function(){var t=[];return this.series&&this.series.forEach(function(e){var i=e._positionData;i.forEach(function(i){var s,n=-1,a=e.plot.grouped&&!e.x._hasCategories()&&!e.y._hasCategories()&&i.aggField.length<2?"All":i.aggField.slice(-1)[0];for(s=0;s<t.length;s+=1)if(t[s].key===a){n=s;break}-1===n&&e.chart._assignedColors[a]&&(t.push({key:a,fill:e.chart._assignedColors[a].fill,stroke:e.chart._assignedColors[a].stroke,opacity:e.chart._assignedColors[a].opacity,css:e.chart._assignedClasses[a],series:e,aggField:i.aggField}),n=t.length-1)})},this),t},this._getFontSize=function(){var t;return t=this.fontSize&&"auto"!==this.fontSize.toString().toLowerCase()?isNaN(this.fontSize)?this.fontSize:this.fontSize+"px":(this.chart._heightPixels()/35>10?this.chart._heightPixels()/35:10)+"px"},this._getHorizontalPadding=function(){var t;return t=isNaN(this.horizontalPadding)?20:this.horizontalPadding},this._getVerticalPadding=function(){var t;return t=isNaN(this.verticalPadding)?2:this.verticalPadding},this._heightPixels=function(){return e._parseYPosition(this.height,this.chart.svg.node())},this._widthPixels=function(){return e._parseXPosition(this.width,this.chart.svg.node())},this._xPixels=function(){return e._parseXPosition(this.x,this.chart.svg.node())},this._yPixels=function(){return e._parseYPosition(this.y,this.chart.svg.node())}},e.series=function(t,e,i,s,n,a,r,o,l,h){this.chart=t,this.x=i,this.y=s,this.z=n,this.c=a,this.p=r,this.plot=o,this.categoryFields=e,this.aggregate=l,this.stacked=h,this.barGap=.2,this.clusterBarGap=.1,this.lineWeight=2,this.lineMarkers=!1,this.afterDraw=null,this.interpolation="linear",this.tooltipFontSize="10px",this.tooltipFontFamily="sans-serif",this.radius="auto",this._eventHandlers=[],this._positionData=[],this._orderRules=[],this._axisBounds=function(t){var e,i,s,n={min:0,max:0},a=null,r=null,o=[],l=0,h=this._positionData;return"x"===t?(a=this.x,r=this.y):"y"===t?(a=this.y,r=this.x):"z"===t?a=this.z:"p"===t?a=this.p:"c"===t&&(a=this.c),a.showPercent?h.forEach(function(t){t[a.position+"Bound"]<n.min&&(n.min=t[a.position+"Bound"]),t[a.position+"Bound"]>n.max&&(n.max=t[a.position+"Bound"])},this):null===r||null===r.categoryFields||0===r.categoryFields.length?h.forEach(function(t){!this._isStacked()||"x"!==a.position&&"y"!==a.position?(t[a.position+"Value"]<n.min&&(n.min=t[a.position+"Value"]),t[a.position+"Value"]>n.max&&(n.max=t[a.position+"Value"])):t[a.position+"Value"]<0?n.min=n.min+t[a.position+"Value"]:n.max=n.max+t[a.position+"Value"]},this):(e=a.position+"Value",i=r.position+"Field",s=[],h.forEach(function(t){var n=t[i].join("/"),a=s.indexOf(n);-1===a&&(s.push(n),a=s.length-1),void 0===o[a]&&(o[a]={min:0,max:0},a>=l&&(l=a+1)),this.stacked?t[e]<0?o[a].min=o[a].min+t[e]:o[a].max=o[a].max+t[e]:(t[e]<o[a].min&&(o[a].min=t[e]),t[e]>o[a].max&&(o[a].max=t[e]))},this),o.forEach(function(t){void 0!==t&&(t.min<n.min&&(n.min=t.min),t.max>n.max&&(n.max=t.max))},this)),n},this._deepMatch=function(t){var e=!1;return this[t.position]===t?e=!0:void 0!==t._slaves&&null!==t._slaves&&t._slaves.length>0&&t._slaves.forEach(function(t){e=e||this._deepMatch(t)},this),e},this._dropLineOrigin=function(){var t=0,e=0,i={x:null,y:null},s={x:null,y:null};return this.chart.axes.forEach(function(t){"x"===t.position&&null===s.x?s.x=t._hasTimeField()?this.chart._xPixels():t._origin:"y"===t.position&&null===s.y&&(s.y=t._hasTimeField()?this.chart._yPixels()+this.chart._heightPixels():t._origin)},this),this.chart.axes.forEach(function(n){"x"!==n.position||this.x.hidden?"y"!==n.position||this.y.hidden||(this._deepMatch(n)&&(0===e?i.x=s.x:1===e&&(i.x=this.chart._xPixels()+this.chart._widthPixels())),e+=1):(this._deepMatch(n)&&(0===t?i.y=s.y:1===t&&(i.y=this.chart._yPixels())),t+=1)},this),i},this._getTooltipFontSize=function(){var t;return t=this.tooltipFontSize&&"auto"!==this.tooltipFontSize.toString().toLowerCase()?isNaN(this.tooltipFontSize)?this.tooltipFontSize:this.tooltipFontSize+"px":(this.chart._heightPixels()/35>10?this.chart._heightPixels()/35:10)+"px"},this._isStacked=function(){return this.stacked&&(this.x._hasCategories()||this.y._hasCategories())},this.addEventHandler=function(t,e){this._eventHandlers.push({event:t,handler:e})},this.addOrderRule=function(t,e){this._orderRules.push({ordering:t,desc:e})},this.getTooltipText=function(t){var e=[];return null!==this.categoryFields&&void 0!==this.categoryFields&&this.categoryFields.length>0&&this.categoryFields.forEach(function(i,s){null!==i&&void 0!==i&&null!==t.aggField[s]&&void 0!==t.aggField[s]&&e.push(i+(t.aggField[s]!==i?": "+t.aggField[s]:""))},this),this.p?(this.x&&this.x._hasCategories()&&this.x._getTooltipText(e,t),this.y&&this.y._hasCategories()&&this.y._getTooltipText(e,t),this.z&&this.z._hasCategories()&&this.z._getTooltipText(e,t),this.p._getTooltipText(e,t)):(this.x&&this.x._getTooltipText(e,t),this.y&&this.y._getTooltipText(e,t),this.z&&this.z._getTooltipText(e,t)),this.c&&this.c._getTooltipText(e,t),e.filter(function(t,i){return e.indexOf(t)===i})}},e.storyboard=function(t,e){null!==e&&void 0!==e&&(e=[].concat(e)),this.chart=t,this.categoryFields=e,this.autoplay=!0,this.frameDuration=3e3,this.storyLabel=null,this.onTick=null,this.fontSize="10px",this.fontFamily="sans-serif",this._frame=0,this._animationTimer=null,this._categories=[],this._cachedCategoryFields=[],this._orderRules=[],this._drawText=function(){if(!this.storyLabel){var t=this.chart,e=this,i=0;this.chart.axes.forEach(function(t){"x"===t.position&&(i+=1)},this),this.storyLabel=this.chart._group.append("text").attr("class","dimple-storyboard-label").attr("opacity",1).attr("x",this.chart._xPixels()+.01*this.chart._widthPixels()).attr("y",this.chart._yPixels()+(this.chart._heightPixels()/35>10?this.chart._heightPixels()/35:10)*(i>1?1.25:-1)).call(function(){t.noFormats||this.style("font-family",e.fontFamily).style("font-size",e._getFontSize())})}this.storyLabel.text(this.categoryFields.join("\\")+": "+this.getFrameValue())},this._getCategories=function(){return this._categoryFields!==this._cachedCategoryFields&&(this._categories=[],this.chart._getAllData().forEach(function(t){var e=-1,i="";null!==this.categoryFields&&(this.categoryFields.forEach(function(e,s){s>0&&(i+="/"),i+=t[e]},this),e=this._categories.indexOf(i),-1===e&&(this._categories.push(i),e=this._categories.length-1))},this),this._cachedCategoryFields=this._categoryFields),this._categories},this._getFontSize=function(){var t;return t=this.fontSize&&"auto"!==this.fontSize.toString().toLowerCase()?isNaN(this.fontSize)?this.fontSize:this.fontSize+"px":(this.chart._heightPixels()/35>10?this.chart._heightPixels()/35:10)+"px"},this._goToFrameIndex=function(t){this._frame=t%this._getCategories().length,this.chart.draw(this.frameDuration/2)},this.addOrderRule=function(t,e){this._orderRules.push({ordering:t,desc:e})},this.getFrameValue=function(){var t=null;return this._frame>=0&&this._getCategories().length>this._frame&&(t=this._getCategories()[this._frame]),t},this.goToFrame=function(t){if(this._getCategories().length>0){var e=this._getCategories().indexOf(t);this._goToFrameIndex(e)}},this.pauseAnimation=function(){null!==this._animationTimer&&(window.clearInterval(this._animationTimer),this._animationTimer=null)},this.startAnimation=function(){null===this._animationTimer&&(null!==this.onTick&&this.onTick(this.getFrameValue()),this._animationTimer=window.setInterval(function(t){return function(){t._goToFrameIndex(t._frame+1),null!==t.onTick&&t.onTick(t.getFrameValue()),t._drawText(t.frameDuration/2)}}(this),this.frameDuration))},this.stopAnimation=function(){null!==this._animationTimer&&(window.clearInterval(this._animationTimer),this._animationTimer=null,this._frame=0)}},e.aggregateMethod.avg=function(t,e){return t.value=null===t.value||void 0===t.value?0:parseFloat(t.value),t.count=null===t.count||void 0===t.count?1:parseFloat(t.count),e.value=null===e.value||void 0===e.value?0:parseFloat(e.value),e.count=null===e.count||void 0===e.count?1:parseFloat(e.count),(t.value*t.count+e.value*e.count)/(t.count+e.count)},e.aggregateMethod.count=function(t,e){return t.count=null===t.count||void 0===t.count?0:parseFloat(t.count),e.count=null===e.count||void 0===e.count?0:parseFloat(e.count),t.count+e.count},e.aggregateMethod.max=function(t,e){return t.value=null===t.value||void 0===t.value?0:parseFloat(t.value),e.value=null===e.value||void 0===e.value?0:parseFloat(e.value),t.value>e.value?t.value:e.value},e.aggregateMethod.min=function(t,e){return parseFloat(null===t.value?e.value:parseFloat(t.value)<parseFloat(e.value)?t.value:e.value)},e.aggregateMethod.sum=function(t,e){return t.value=null===t.value||void 0===t.value?0:parseFloat(t.value),e.value=null===e.value||void 0===e.value?0:parseFloat(e.value),t.value+e.value},e.plot.area={stacked:!0,grouped:!0,supportedAxes:["x","y","c"],draw:function(i,s,n){var a,r,o,l,h,c,u,d,p,f,g,m,y,_,x,v,b,C,F,w,P,k,S=s._positionData,L=[],M=null,z="dimple-series-"+i.series.indexOf(s),T=s.x._hasCategories()||s.y._hasCategories()?0:1,B=!1,O={},A=[],D=[],H=function(){return function(i,s,n,a){t.select(s).style("opacity",1),e._showPointTooltip(i,s,n,a)}},I=function(i){return function(s,n,a,r){t.select(n).style("opacity",r.lineMarkers||i.data.length<2?e._helpers.opacity(s,a,r):0),e._removeTooltip(s,n,a,r)}},E=function(t,a){e._drawMarkers(t,i,s,n,z,B,H(t),I(t),a)},G=function(t,n){var a;return"step"===s.interpolation&&s[t]._hasCategories()?(a=e._helpers[t](n,i,s)+("y"===t?e._helpers.height(n,i,s):0),s[t].categoryFields.length<2&&(a+=("y"===t?1:-1)*e._helpers[t+"Gap"](i,s))):a=e._helpers["c"+t](n,i,s),parseFloat(a)},V=function(e,i){return t.svg.line().x(function(t){return s.x._hasCategories()||!i?t.x:s.x[i]}).y(function(t){return s.y._hasCategories()||!i?t.y:s.y[i]}).interpolate(e)},N=function(t,e){return parseFloat(t)-parseFloat(e)},R=function(t,e){return parseFloat(t.x)-parseFloat(e.x)},W=function(t,e,i){var s,n,a=e[e.length-1],r=9999,o=a;for(s=0;s<t.length;s+=1)(t[s].x!==a.x||t[s].y!==a.y)&&(n=180-Math.atan2(t[s].x-a.x,t[s].y-a.y)*(180/Math.PI),n>i&&r>n&&(o=t[s],r=n));return e.push(o),r};for(a="step"===s.interpolation?"step-after":s.interpolation,f=e._getSeriesOrder(s.data||i.data,s),s.c&&(s.x._hasCategories()&&s.y._hasMeasure()||s.y._hasCategories()&&s.x._hasMeasure())&&(B=!0),s.x._hasCategories()?(P="x",k="y"):s.y._hasCategories()&&(P="y",k="x"),r=0;r<S.length;r+=1){for(h=[],u=-1,l=T;l<S[r].aggField.length;l+=1)h.push(S[r].aggField[l]);for(c=e._createClass(h),l=0;l<L.length;l+=1)if(L[l].keyString===c){u=l;break}-1===u&&(u=L.length,L.push({key:h,keyString:c,color:"white",data:[],points:[],area:{},entry:{},exit:{},group:P&&S[r][P+"Field"]&&S[r][P+"Field"].length>=2?S[r][P+"Field"][0]:"All"})),L[u].data.push(S[r])}for(f&&L.sort(function(t,i){return e._arrayIndexCompare(f,t.key,i.key)}),r=0;r<L.length;r+=1){for(L[r].data.sort(e._getSeriesSortPredicate(i,s,f)),o=0;o<L[r].data.length;o+=1)L[r].points.push({x:G("x",L[r].data[o]),y:G("y",L[r].data[o])}),P&&(O[L[r].group]||(O[L[r].group]={}),O[L[r].group][L[r].points[L[r].points.length-1][P]]=s[k]._origin);g=L[r].points,"step"===s.interpolation&&g.length>1&&P&&(s.x._hasCategories()?(g.push({x:2*g[g.length-1].x-g[g.length-2].x,y:g[g.length-1].y}),O[L[r].group][g[g.length-1][P]]=s[k]._origin):s.y._hasCategories()&&(g=[{x:g[0].x,y:2*g[0].y-g[1].y}].concat(g),O[L[r].group][g[0][P]]=s[k]._origin,L[r].points=g))}for(_ in O)if(O.hasOwnProperty(_)){A[_]=[];for(x in O[_])O[_].hasOwnProperty(x)&&A[_].push(parseFloat(x));A[_].sort(N)}for(r=0;r<L.length;r+=1){if(g=L[r].points,v=L[r].group,m=[],D=[],B&&e._addGradient(L[r].key,"fill-area-gradient-"+L[r].keyString,s.x._hasCategories()?s.x:s.y,S,i,n,"fill"),A[v]&&A[v].length>0)for(o=0,l=0;o<A[v].length;o+=1)A[v][o]>=g[0][P]&&A[v][o]<=g[g.length-1][P]&&(y={},y[P]=A[v][o],y[k]=O[v][A[v][o]],m.push(y),g[l][P]>A[v][o]?D.push(y):(D.push(g[l]),O[L[r].group][A[v][o]]=g[l][k],l+=1));else if(s._orderRules&&s._orderRules.length>0)D=g.concat(g[0]);else{g=g.sort(R),D.push(g[0]),w=0;do w=W(g,D,w);while(D.length<=g.length&&(D[0].x!==D[D.length-1].x||D[0].y!==D[D.length-1].y))}m=m.reverse(),b=V(a,"_previousOrigin")(D),C=V("step-after"===a?"step-before":"step-before"===a?"step-after":a,"_previousOrigin")(m),F=V("linear","_previousOrigin")(D),L[r].entry=b+(C&&C.length>0?"L"+C.substring(1):"")+(F&&F.length>0?"L"+F.substring(1,F.indexOf("L")):0),b=V(a)(D),C=V("step-after"===a?"step-before":"step-before"===a?"step-after":a)(m),F=V("linear")(D),L[r].update=b+(C&&C.length>0?"L"+C.substring(1):"")+(F&&F.length>0?"L"+F.substring(1,F.indexOf("L")):0),b=V(a,"_origin")(D),C=V("step-after"===a?"step-before":"step-before"===a?"step-after":a,"_origin")(m),F=V("linear","_origin")(D),L[r].exit=b+(C&&C.length>0?"L"+C.substring(1):"")+(F&&F.length>0?"L"+F.substring(1,F.indexOf("L")):0),L[r].color=i.getColor(L[r].key.length>0?L[r].key[L[r].key.length-1]:"All"),L[r].css=i.getClass(L[r].key.length>0?L[r].key[L[r].key.length-1]:"All")}null!==i._tooltipGroup&&void 0!==i._tooltipGroup&&i._tooltipGroup.remove(),M=null===s.shapes||void 0===s.shapes?i._group.selectAll("."+z).data(L):s.shapes.data(L,function(t){return t.key}),M.enter().append("path").attr("id",function(t){return e._createClass([t.key])}).attr("class",function(t){return z+" dimple-line "+t.keyString+" "+i.customClassList.areaSeries+" "+t.css}).attr("d",function(t){return t.entry}).call(function(){i.noFormats||this.attr("opacity",function(t){return B?1:t.color.opacity}).style("fill",function(t){return B?"url(#"+e._createClass(["fill-area-gradient-"+t.keyString])+")":t.color.fill}).style("stroke",function(t){return B?"url(#"+e._createClass(["stroke-area-gradient-"+t.keyString])+")":t.color.stroke}).style("stroke-width",s.lineWeight)}).each(function(t){t.markerData=t.data,E(t,this)}),d=i._handleTransition(M,n,i).attr("d",function(t){return t.update}).each(function(t){t.markerData=t.data,E(t,this)}),p=i._handleTransition(M.exit(),n,i).attr("d",function(t){return t.exit}).each(function(t){t.markerData=[],E(t,this)}),e._postDrawHandling(s,d,p,n),s.shapes=M}},e.plot.bar={stacked:!0,grouped:!1,supportedAxes:["x","y","c"],draw:function(t,i,s){var n,a,r=i._positionData,o=null,l=["dimple-series-"+t.series.indexOf(i),"dimple-bar"],h=!i._isStacked()&&i.x._hasMeasure(),c=!i._isStacked()&&i.y._hasMeasure(),u="none";i.x._hasCategories()&&i.y._hasCategories()?u="both":i.x._hasCategories()?u="x":i.y._hasCategories()&&(u="y"),null!==t._tooltipGroup&&void 0!==t._tooltipGroup&&t._tooltipGroup.remove(),o=null===i.shapes||void 0===i.shapes?t._group.selectAll("."+l.join(".")).data(r):i.shapes.data(r,function(t){return t.key}),o.enter().append("rect").attr("id",function(t){return e._createClass([t.key])}).attr("class",function(i){var s=[];return s=s.concat(i.aggField),s=s.concat(i.xField),s=s.concat(i.yField),l.join(" ")+" "+e._createClass(s)+" "+t.customClassList.barSeries+" "+e._helpers.css(i,t)}).attr("x",function(s){var n=i.x._previousOrigin;return"x"===u?n=e._helpers.x(s,t,i):"both"===u&&(n=e._helpers.cx(s,t,i)),n}).attr("y",function(s){var n=i.y._previousOrigin;return"y"===u?n=e._helpers.y(s,t,i):"both"===u&&(n=e._helpers.cy(s,t,i)),n}).attr("width",function(s){return"x"===u?e._helpers.width(s,t,i):0}).attr("height",function(s){return"y"===u?e._helpers.height(s,t,i):0}).on("mouseover",function(s){e._showBarTooltip(s,this,t,i)}).on("mouseleave",function(s){e._removeTooltip(s,this,t,i)}).call(function(){t.noFormats||this.attr("opacity",function(s){return e._helpers.opacity(s,t,i)}).style("fill",function(s){return e._helpers.fill(s,t,i)}).style("stroke",function(s){return e._helpers.stroke(s,t,i)})}),n=t._handleTransition(o,s,t,i).attr("x",function(s){return h?e._helpers.cx(s,t,i)-i.x.floatingBarWidth/2:e._helpers.x(s,t,i)}).attr("y",function(s){return c?e._helpers.cy(s,t,i)-i.y.floatingBarWidth/2:e._helpers.y(s,t,i)}).attr("width",function(s){return h?i.x.floatingBarWidth:e._helpers.width(s,t,i)}).attr("height",function(s){return c?i.y.floatingBarWidth:e._helpers.height(s,t,i)}).call(function(){t.noFormats||this.attr("fill",function(s){return e._helpers.fill(s,t,i)}).attr("stroke",function(s){return e._helpers.stroke(s,t,i)})}),a=t._handleTransition(o.exit(),s,t,i).attr("x",function(s){var n=i.x._origin;return"x"===u?n=e._helpers.x(s,t,i):"both"===u&&(n=e._helpers.cx(s,t,i)),n}).attr("y",function(s){var n=i.y._origin;return"y"===u?n=e._helpers.y(s,t,i):"both"===u&&(n=e._helpers.cy(s,t,i)),n}).attr("width",function(s){return"x"===u?e._helpers.width(s,t,i):0}).attr("height",function(s){return"y"===u?e._helpers.height(s,t,i):0}),e._postDrawHandling(i,n,a,s),i.shapes=o}},e.plot.bubble={stacked:!1,grouped:!1,supportedAxes:["x","y","z","c"],draw:function(t,i,s){var n,a,r=i._positionData,o=null,l=["dimple-series-"+t.series.indexOf(i),"dimple-bubble"];null!==t._tooltipGroup&&void 0!==t._tooltipGroup&&t._tooltipGroup.remove(),o=null===i.shapes||void 0===i.shapes?t._group.selectAll("."+l.join(".")).data(r):i.shapes.data(r,function(t){return t.key}),o.enter().append("circle").attr("id",function(t){return e._createClass([t.key])}).attr("class",function(i){var s=[];return s=s.concat(i.aggField),s=s.concat(i.xField),s=s.concat(i.yField),s=s.concat(i.zField),l.join(" ")+" "+e._createClass(s)+" "+t.customClassList.bubbleSeries+" "+e._helpers.css(i,t)}).attr("cx",function(s){return i.x._hasCategories()?e._helpers.cx(s,t,i):i.x._previousOrigin}).attr("cy",function(s){return i.y._hasCategories()?e._helpers.cy(s,t,i):i.y._previousOrigin}).attr("r",0).on("mouseover",function(s){e._showPointTooltip(s,this,t,i)}).on("mouseleave",function(s){e._removeTooltip(s,this,t,i)}).call(function(){t.noFormats||this.attr("opacity",function(s){return e._helpers.opacity(s,t,i)}).style("fill",function(s){return e._helpers.fill(s,t,i)}).style("stroke",function(s){return e._helpers.stroke(s,t,i)})}),n=t._handleTransition(o,s,t,i).attr("cx",function(s){return e._helpers.cx(s,t,i)}).attr("cy",function(s){return e._helpers.cy(s,t,i)}).attr("r",function(s){return e._helpers.r(s,t,i)}).call(function(){t.noFormats||this.attr("fill",function(s){return e._helpers.fill(s,t,i)}).attr("stroke",function(s){return e._helpers.stroke(s,t,i)})}),a=t._handleTransition(o.exit(),s,t,i).attr("r",0).attr("cx",function(s){return i.x._hasCategories()?e._helpers.cx(s,t,i):i.x._origin}).attr("cy",function(s){return i.y._hasCategories()?e._helpers.cy(s,t,i):i.y._origin}),e._postDrawHandling(i,n,a,s),i.shapes=o}},e.plot.line={stacked:!1,grouped:!0,supportedAxes:["x","y","c"],draw:function(i,s,n){var a,r,o,l,h,c,u,d,p,f,g=s._positionData,m=[],y=null,_="dimple-series-"+i.series.indexOf(s),x=s.x._hasCategories()||s.y._hasCategories()?0:1,v=!1,b=function(){return function(i,s,n,a){t.select(s).style("opacity",1),e._showPointTooltip(i,s,n,a)}},C=function(i){return function(s,n,a,r){t.select(n).style("opacity",r.lineMarkers||i.data.length<2?e._helpers.opacity(s,a,r):0),e._removeTooltip(s,n,a,r)}},F=function(t,a){e._drawMarkers(t,i,s,n,_,v,b(t),C(t),a)},w=function(t,n){var a;return"step"===s.interpolation&&s[t]._hasCategories()?(s.barGap=0,s.clusterBarGap=0,a=e._helpers[t](n,i,s)+("y"===t?e._helpers.height(n,i,s):0)):a=e._helpers["c"+t](n,i,s),parseFloat(a.toFixed(1))},P=function(e,i){return t.svg.line().x(function(t){return s.x._hasCategories()||!i?t.x:s.x[i]}).y(function(t){return s.y._hasCategories()||!i?t.y:s.y[i]}).interpolate(e)};for(a="step"===s.interpolation?"step-after":s.interpolation,f=e._getSeriesOrder(s.data||i.data,s),s.c&&(s.x._hasCategories()&&s.y._hasMeasure()||s.y._hasCategories()&&s.x._hasMeasure())&&(v=!0),r=0;r<g.length;r+=1){for(h=[],u=-1,l=x;l<g[r].aggField.length;l+=1)h.push(g[r].aggField[l]);for(c=e._createClass(h),l=0;l<m.length;l+=1)if(m[l].keyString===c){u=l;break}-1===u&&(u=m.length,m.push({key:h,keyString:c,color:"white",data:[],markerData:[],points:[],line:{},entry:{},exit:{}})),m[u].data.push(g[r])}for(f&&m.sort(function(t,i){return e._arrayIndexCompare(f,t.key,i.key)}),r=0;r<m.length;r+=1){for(m[r].data.sort(e._getSeriesSortPredicate(i,s,f)),v&&e._addGradient(m[r].key,"fill-line-gradient-"+m[r].keyString,s.x._hasCategories()?s.x:s.y,g,i,n,"fill"),o=0;o<m[r].data.length;o+=1)m[r].points.push({x:w("x",m[r].data[o]),y:w("y",m[r].data[o])});"step"===s.interpolation&&m[r].points.length>1&&(s.x._hasCategories()?m[r].points.push({x:2*m[r].points[m[r].points.length-1].x-m[r].points[m[r].points.length-2].x,y:m[r].points[m[r].points.length-1].y}):s.y._hasCategories()&&(m[r].points=[{x:m[r].points[0].x,y:2*m[r].points[0].y-m[r].points[1].y}].concat(m[r].points))),m[r].entry=P(a,"_previousOrigin")(m[r].points),m[r].update=P(a)(m[r].points),m[r].exit=P(a,"_origin")(m[r].points),m[r].color=i.getColor(m[r].key.length>0?m[r].key[m[r].key.length-1]:"All"),m[r].css=i.getClass(m[r].key.length>0?m[r].key[m[r].key.length-1]:"All")}null!==i._tooltipGroup&&void 0!==i._tooltipGroup&&i._tooltipGroup.remove(),y=null===s.shapes||void 0===s.shapes?i._group.selectAll("."+_).data(m):s.shapes.data(m,function(t){return t.key}),y.enter().append("path").attr("id",function(t){return e._createClass([t.key])}).attr("class",function(t){return _+" dimple-line "+t.keyString+" "+i.customClassList.lineSeries+" "+t.css}).attr("d",function(t){return t.entry}).call(function(){i.noFormats||this.attr("opacity",function(t){return v?1:t.color.opacity}).style("fill","none").style("stroke",function(t){return v?"url(#"+e._createClass(["fill-line-gradient-"+t.keyString])+")":t.color.stroke}).style("stroke-width",s.lineWeight)}).each(function(t){t.markerData=t.data,F(t,this)}),d=i._handleTransition(y,n,i).attr("d",function(t){return t.update}).each(function(t){t.markerData=t.data,F(t,this)}),p=i._handleTransition(y.exit(),n,i).attr("d",function(t){return t.exit}).each(function(t){t.markerData=[],F(t,this)}),e._postDrawHandling(s,d,p,n),s.shapes=y}},e.plot.pie={stacked:!1,grouped:!1,supportedAxes:["x","y","c","z","p"],draw:function(i,s,n){var a,r,o=s._positionData,l=null,h=["dimple-series-"+i.series.indexOf(s),"dimple-pie"],c=function(t){var n;return n=s.x&&s.y?e._helpers.r(t,i,s):i._widthPixels()<i._heightPixels()?i._widthPixels()/2:i._heightPixels()/2},u=function(t){var i=c(t);return s.outerRadius&&(i=e._parsePosition(s.outerRadius,i)),Math.max(i,0)},d=function(t){var i=0;return s.innerRadius&&(i=e._parsePosition(s.innerRadius,c(t))),Math.max(i,0)},p=function(e){var i;return(i=t.svg.arc().innerRadius(d(e)).outerRadius(u(e)))(e)},f=function(e){e.innerRadius=d(e),e.outerRadius=u(e);var i,s=t.interpolate(this._current,e);return i=t.svg.arc().innerRadius(function(t){return t.innerRadius}).outerRadius(function(t){return t.outerRadius}),this._current=s(0),function(t){return i(s(t))}},g=function(t){return function(n){var a,r;return s.x&&s.y?(a=!t||s.x._hasCategories()?e._helpers.cx(n,i,s):s.x._previousOrigin,r=!t||s.y._hasCategories()?e._helpers.cy(n,i,s):s.y._previousOrigin):(a=i._xPixels()+i._widthPixels()/2,r=i._yPixels()+i._heightPixels()/2),"translate("+a+","+r+")"}};null!==i._tooltipGroup&&void 0!==i._tooltipGroup&&i._tooltipGroup.remove(),l=null===s.shapes||void 0===s.shapes?i._group.selectAll("."+h.join(".")).data(o):s.shapes.data(o,function(t){return t.key}),l.enter().append("path").attr("id",function(t){return e._createClass([t.key])}).attr("class",function(t){var s=[];return s=s.concat(t.aggField),s=s.concat(t.pField),h.join(" ")+" "+e._createClass(s)+" "+i.customClassList.pieSeries+" "+e._helpers.css(t,i)}).attr("d",p).on("mouseover",function(t){e._showBarTooltip(t,this,i,s)}).on("mouseleave",function(t){e._removeTooltip(t,this,i,s)}).call(function(){i.noFormats||this.attr("opacity",function(t){return e._helpers.opacity(t,i,s)}).style("fill",function(t){return e._helpers.fill(t,i,s)}).style("stroke",function(t){return e._helpers.stroke(t,i,s)})}).attr("transform",g(!0)).each(function(t){this._current=t,t.innerRadius=d(t),t.outerRadius=u(t)}),a=i._handleTransition(l,n,i,s).call(function(){n&&n>0?this.attrTween("d",f):this.attr("d",p),i.noFormats||this.attr("fill",function(t){return e._helpers.fill(t,i,s)}).attr("stroke",function(t){return e._helpers.stroke(t,i,s)})}).attr("transform",g(!1)),r=i._handleTransition(l.exit(),n,i,s).attr("transform",g(!0)).attr("d",p),e._postDrawHandling(s,a,r,n),s.shapes=l}},e._addGradient=function(t,i,s,n,a,r,o){var l=[].concat(t),h=a.svg.select("#"+e._createClass([i])),c=[],u=s.position+"Field",d=!0,p=[];n.forEach(function(t){-1===c.indexOf(t[u])&&t.aggField.join("_")===l.join("_")&&c.push(t[u])},this),c=c.sort(function(t,e){return s._scale(t)-s._scale(e)}),null===h.node()&&(d=!1,h=a.svg.append("defs").append("linearGradient").attr("id",e._createClass([i])).attr("gradientUnits","userSpaceOnUse").attr("x1","x"===s.position?s._scale(c[0])+a._widthPixels()/c.length/2:0).attr("y1","y"===s.position?s._scale(c[0])-a._heightPixels()/c.length/2:0).attr("x2","x"===s.position?s._scale(c[c.length-1])+a._widthPixels()/c.length/2:0).attr("y2","y"===s.position?s._scale(c[c.length-1])-a._heightPixels()/c.length/2:0)),c.forEach(function(t,e){var i={},s=0;for(s=0;s<n.length;s+=1)if(n[s].aggField.join("_")===l.join("_")&&n[s][u].join("_")===t.join("_")){i=n[s];break}p.push({offset:Math.round(e/(c.length-1)*100)+"%",color:i[o]})},this),d?a._handleTransition(h.selectAll("stop").data(p),r,a).attr("offset",function(t){return t.offset}).attr("stop-color",function(t){return t.color}):h.selectAll("stop").data(p).enter().append("stop").attr("offset",function(t){return t.offset}).attr("stop-color",function(t){return t.color})},e._arrayIndexCompare=function(t,e,i){var s,n,a,r,o,l;for(n=0;n<t.length;n+=1){for(r=!0,o=!0,l=[].concat(t[n]),a=0;a<e.length;a+=1)r=r&&e[a]===l[a];for(a=0;a<i.length;a+=1)o=o&&i[a]===l[a];if(r&&o){s=0;break}if(r){s=-1;break}if(o){s=1;break}}return s},e._createClass=function(t){var e,i,s=[];if(i=function(t){var e=t.charCodeAt(0),i="-";return e>=65&&90>=e&&(i=t.toLowerCase()),i},t.length>0)for(e=0;e<t.length;e+=1)t[e]&&s.push("dimple-"+t[e].toString().replace(/[^a-z0-9]/g,i));else s=["dimple-all"];return s.join(" ")},e._drawMarkerBacks=function(i,s,n,a,r,o){var l,h,c,u=["dimple-marker-back",r,i.keyString];n.lineMarkers&&(l=null===n._markerBacks||void 0===n._markerBacks||void 0===n._markerBacks[i.keyString]?s._group.selectAll("."+u.join(".")).data(i.markerData):n._markerBacks[i.keyString].data(i.markerData,function(t){return t.key;

}),c=o.nextSibling&&o.nextSibling.id?l.enter().insert("circle","#"+o.nextSibling.id):l.enter().append("circle"),c.attr("id",function(t){return e._createClass([t.key+" Marker Back"])}).attr("class",function(t){var i=[];return n.x._hasCategories()&&(i=i.concat(t.xField)),n.y._hasCategories()&&(i=i.concat(t.yField)),e._createClass(i)+" "+u.join(" ")}).attr("cx",function(t){return n.x._hasCategories()?e._helpers.cx(t,s,n):n.x._previousOrigin}).attr("cy",function(t){return n.y._hasCategories()?e._helpers.cy(t,s,n):n.y._previousOrigin}).attr("r",0).attr("fill","white").attr("stroke","none"),s._handleTransition(l,a,s).attr("cx",function(t){return e._helpers.cx(t,s,n)}).attr("cy",function(t){return e._helpers.cy(t,s,n)}).attr("r",2+n.lineWeight),h=s._handleTransition(l.exit(),a,s).attr("cx",function(t){return n.x._hasCategories()?e._helpers.cx(t,s,n):n.x._origin}).attr("cy",function(t){return n.y._hasCategories()?e._helpers.cy(t,s,n):n.y._origin}).attr("r",0),0===a?h.remove():h.each("end",function(){t.select(this).remove()}),(void 0===n._markerBacks||null===n._markerBacks)&&(n._markerBacks={}),n._markerBacks[i.keyString]=l)},e._drawMarkers=function(i,s,n,a,r,o,l,h,c){var u,d,p,f=["dimple-marker",r,i.keyString];u=null===n._markers||void 0===n._markers||void 0===n._markers[i.keyString]?s._group.selectAll("."+f.join(".")).data(i.markerData):n._markers[i.keyString].data(i.markerData,function(t){return t.key}),p=c.nextSibling&&c.nextSibling.id?u.enter().insert("circle","#"+c.nextSibling.id):u.enter().append("circle"),p.attr("id",function(t){return e._createClass([t.key+" Marker"])}).attr("class",function(t){var i=[],a=s.getClass(t.aggField.length>0?t.aggField[t.aggField.length-1]:"All");return n.x._hasCategories()&&(i=i.concat(t.xField)),n.y._hasCategories()&&(i=i.concat(t.yField)),e._createClass(i)+" "+f.join(" ")+" "+s.customClassList.lineMarker+" "+a}).on("mouseover",function(t){l(t,this,s,n)}).on("mouseleave",function(t){h(t,this,s,n)}).attr("cx",function(t){return n.x._hasCategories()?e._helpers.cx(t,s,n):n.x._previousOrigin}).attr("cy",function(t){return n.y._hasCategories()?e._helpers.cy(t,s,n):n.y._previousOrigin}).attr("r",0).attr("opacity",n.lineMarkers||i.data.length<2?i.color.opacity:0).call(function(){s.noFormats||this.attr("fill","white").style("stroke-width",n.lineWeight).attr("stroke",function(t){return o?e._helpers.fill(t,s,n):i.color.stroke})}),s._handleTransition(u,a,s).attr("cx",function(t){return e._helpers.cx(t,s,n)}).attr("cy",function(t){return e._helpers.cy(t,s,n)}).attr("r",2+n.lineWeight).attr("opacity",n.lineMarkers||i.data.length<2?i.color.opacity:0).call(function(){s.noFormats||this.attr("fill","white").style("stroke-width",n.lineWeight).attr("stroke",function(t){return o?e._helpers.fill(t,s,n):i.color.stroke})}),d=s._handleTransition(u.exit(),a,s).attr("cx",function(t){return n.x._hasCategories()?e._helpers.cx(t,s,n):n.x._origin}).attr("cy",function(t){return n.y._hasCategories()?e._helpers.cy(t,s,n):n.y._origin}).attr("r",0),0===a?d.remove():d.each("end",function(){t.select(this).remove()}),(void 0===n._markers||null===n._markers)&&(n._markers={}),n._markers[i.keyString]=u,e._drawMarkerBacks(i,s,n,a,r,c)},e._getOrderedList=function(t,i,s){var n,a=[],r=[],o=[].concat(i),l=[].concat(i),h=[];return null!==s&&void 0!==s&&(h=h.concat(s)),h=h.concat({ordering:o,desc:!1}),h.forEach(function(e){var i,s=[],n=[];if("function"==typeof e.ordering){if(t&&t.length>0)for(i in t[0])t[0].hasOwnProperty(i)&&-1===l.indexOf(i)&&l.push(i)}else if(e.ordering instanceof Array){for(i=0;i<e.ordering.length;i+=1)t&&t.length>0&&t[0].hasOwnProperty(e.ordering[i])&&n.push(e.ordering[i]),s.push(e.ordering[i]);n.length>s.length/2?l.concat(n):e.values=s}else l.push(e.ordering)},this),n=e._rollUp(t,o,l),h.length>=1&&(h.forEach(function(t){var e=null===t.desc||void 0===t.desc?!1:t.desc,i=t.ordering,s=[],n=function(t){var e,i=0;for(e=0;e<t.length;e+=1){if(isNaN(t[e])){i=void 0;break}i+=parseFloat(t[e])}return i},r=function(t,e){var i=0,s=n(t),a=n(e);return isNaN(s)||isNaN(a)?isNaN(Date.parse(t[0]))||isNaN(Date.parse(e[0]))?t[0]<e[0]?i=-1:t[0]>e[0]&&(i=1):i=Date.parse(t[0])-Date.parse(e[0]):i=parseFloat(s)-parseFloat(a),i};"function"==typeof i?a.push(function(t,s){return(e?-1:1)*i(t,s)}):t.values&&t.values.length>0?(t.values.forEach(function(t){s.push([].concat(t).join("|"))},this),a.push(function(t,i){var n,a,r,l="",h="";for(r=0;r<o.length;r+=1)r>0&&(l+="|",h+="|"),l+=t[o[r]],h+=i[o[r]];return n=s.indexOf(l),a=s.indexOf(h),n=0>n?e?-1:s.length:n,a=0>a?e?-1:s.length:a,(e?-1:1)*(n-a)})):[].concat(t.ordering).forEach(function(t){a.push(function(i,s){var n=0;return void 0!==i[t]&&void 0!==s[t]&&(n=r([].concat(i[t]),[].concat(s[t]))),(e?-1:1)*n})})}),n.sort(function(t,e){for(var i=0,s=0;i<a.length&&0===s;)s=a[i](t,e),i+=1;return s}),n.forEach(function(t){var e,i=[];if(1===o.length)r.push(t[o[0]]);else{for(e=0;e<o.length;e+=1)i.push(t[o[e]]);r.push(i)}},this)),r},e._getSeriesOrder=function(t,i){var s=[].concat(i._orderRules),n=i.categoryFields,a=[];return null!==n&&void 0!==n&&n.length>0&&(null!==i.c&&void 0!==i.c&&i.c._hasMeasure()&&s.push({ordering:i.c.measure,desc:!0}),i.x._hasMeasure()&&s.push({ordering:i.x.measure,desc:!0}),i.y._hasMeasure()&&s.push({ordering:i.y.measure,desc:!0}),a=e._getOrderedList(t,n,s)),a},e._getSeriesSortPredicate=function(t,i,s){return function(n,a){var r=0;return i.x._hasCategories()&&(r=e._helpers.cx(n,t,i)-e._helpers.cx(a,t,i)),0===r&&i.y._hasCategories()&&(r=e._helpers.cy(n,t,i)-e._helpers.cy(a,t,i)),0===r&&s&&(r=e._arrayIndexCompare(s,n.aggField,a.aggField)),r}},e._helpers={cx:function(t,i,s){var n=0;return n=null!==s.x.measure&&void 0!==s.x.measure?s.x._scale(t.cx):s.x._hasCategories()&&s.x.categoryFields.length>=2?s.x._scale(t.cx)+e._helpers.xGap(i,s)+(t.xOffset+.5)*(i._widthPixels()/s.x._max-2*e._helpers.xGap(i,s))*t.width:s.x._scale(t.cx)+i._widthPixels()/s.x._max/2},cy:function(t,i,s){var n=0;return n=null!==s.y.measure&&void 0!==s.y.measure?s.y._scale(t.cy):null!==s.y.categoryFields&&void 0!==s.y.categoryFields&&s.y.categoryFields.length>=2?s.y._scale(t.cy)-i._heightPixels()/s.y._max+e._helpers.yGap(i,s)+(t.yOffset+.5)*(i._heightPixels()/s.y._max-2*e._helpers.yGap(i,s))*t.height:s.y._scale(t.cy)-i._heightPixels()/s.y._max/2},r:function(t,e,i){var s=0,n=1;return null===i.z||void 0===i.z?s=i.radius&&"auto"!==i.radius?i.radius:5:(i.radius&&"auto"!==i.radius&&i.radius>1&&(n=i.radius/i.z._scale(i.z._max)),s=i.z._hasMeasure()?i.z._scale(t.r)*n:i.z._scale(e._heightPixels()/100)*n),s},xGap:function(t,e){var i=0;return(null===e.x.measure||void 0===e.x.measure)&&e.barGap>0&&(i=t._widthPixels()/e.x._max*(e.barGap>.99?.99:e.barGap)/2),i},xClusterGap:function(t,i,s){var n=0;return null!==s.x.categoryFields&&void 0!==s.x.categoryFields&&s.x.categoryFields.length>=2&&s.clusterBarGap>0&&!s.x._hasMeasure()&&(n=t.width*(i._widthPixels()/s.x._max-2*e._helpers.xGap(i,s))*(s.clusterBarGap>.99?.99:s.clusterBarGap)/2),n},yGap:function(t,e){var i=0;return(null===e.y.measure||void 0===e.y.measure)&&e.barGap>0&&(i=t._heightPixels()/e.y._max*(e.barGap>.99?.99:e.barGap)/2),i},yClusterGap:function(t,i,s){var n=0;return null!==s.y.categoryFields&&void 0!==s.y.categoryFields&&s.y.categoryFields.length>=2&&s.clusterBarGap>0&&!s.y._hasMeasure()&&(n=t.height*(i._heightPixels()/s.y._max-2*e._helpers.yGap(i,s))*(s.clusterBarGap>.99?.99:s.clusterBarGap)/2),n},x:function(t,i,s){var n=0;return n=s.x._hasTimeField()?s.x._scale(t.x)-e._helpers.width(t,i,s)/2:null!==s.x.measure&&void 0!==s.x.measure?s.x._scale(t.x):s.x._scale(t.x)+e._helpers.xGap(i,s)+t.xOffset*(e._helpers.width(t,i,s)+2*e._helpers.xClusterGap(t,i,s))+e._helpers.xClusterGap(t,i,s)},y:function(t,i,s){var n=0;return n=s.y._hasTimeField()?s.y._scale(t.y)-e._helpers.height(t,i,s)/2:null!==s.y.measure&&void 0!==s.y.measure?s.y._scale(t.y):s.y._scale(t.y)-i._heightPixels()/s.y._max+e._helpers.yGap(i,s)+t.yOffset*(e._helpers.height(t,i,s)+2*e._helpers.yClusterGap(t,i,s))+e._helpers.yClusterGap(t,i,s)},width:function(t,i,s){var n=0;return n=null!==s.x.measure&&void 0!==s.x.measure?Math.abs(s.x._scale(t.x<0?t.x-t.width:t.x+t.width)-s.x._scale(t.x)):s.x._hasTimeField()?s.x.floatingBarWidth:t.width*(i._widthPixels()/s.x._max-2*e._helpers.xGap(i,s))-2*e._helpers.xClusterGap(t,i,s)},height:function(t,i,s){var n=0;return n=s.y._hasTimeField()?s.y.floatingBarWidth:null!==s.y.measure&&void 0!==s.y.measure?Math.abs(s.y._scale(t.y)-s.y._scale(t.y<=0?t.y+t.height:t.y-t.height)):t.height*(i._heightPixels()/s.y._max-2*e._helpers.yGap(i,s))-2*e._helpers.yClusterGap(t,i,s)},opacity:function(t,e,i){var s=0;return s=null!==i.c&&void 0!==i.c?t.opacity:e.getColor(t.aggField.slice(-1)[0]).opacity},fill:function(t,e,i){var s=0;return s=null!==i.c&&void 0!==i.c?t.fill:e.getColor(t.aggField.slice(-1)[0]).fill},stroke:function(t,e,i){var s=0;return s=null!==i.c&&void 0!==i.c?t.stroke:e.getColor(t.aggField.slice(-1)[0]).stroke},css:function(t,e){return e.getClass(t.aggField.slice(-1)[0])}},e._parentHeight=function(t){var i=t.offsetHeight;return(0>=i||null===i||void 0===i)&&(i=t.clientHeight),(0>=i||null===i||void 0===i)&&(i=null===t.parentNode||void 0===t.parentNode?0:e._parentHeight(t.parentNode)),i},e._parentWidth=function(t){var i=t.offsetWidth;return(!i||0>i)&&(i=t.clientWidth),(!i||0>i)&&(i=t.parentNode?e._parentWidth(t.parentNode):0),i},e._parsePosition=function(t,e){var i,s=0;return t&&(i=t.toString().split(","),i.forEach(function(i){i&&(isNaN(i)?"%"===i.slice(-1)?s+=e*(parseFloat(i.slice(0,i.length-1))/100):"px"===i.slice(-2)?s+=parseFloat(i.slice(0,i.length-2)):s=t:s+=parseFloat(i))},this)),0>s&&(s=e+s),s},e._parseXPosition=function(t,i){return e._parsePosition(t,e._parentWidth(i))},e._parseYPosition=function(t,i){return e._parsePosition(t,e._parentHeight(i))},e._postDrawHandling=function(e,i,s,n){0===n?(i.each(function(t,i){null!==e.afterDraw&&void 0!==e.afterDraw&&e.afterDraw(this,t,i)}),s.remove()):(i.each("end",function(t,i){null!==e.afterDraw&&void 0!==e.afterDraw&&e.afterDraw(this,t,i)}),s.each("end",function(){t.select(this).remove()}))},e._removeTooltip=function(t,e,i,s){i._tooltipGroup&&i._tooltipGroup.remove()},e._rollUp=function(t,e,i){var s=[];return e=null!==e&&void 0!==e?[].concat(e):[],t.forEach(function(t){var n=-1,a={},r=!0;s.forEach(function(i,s){-1===n&&(r=!0,e.forEach(function(e){r=r&&t[e]===i[e]},this),r&&(n=s))},this),-1!==n?a=s[n]:(e.forEach(function(e){a[e]=t[e]},this),s.push(a),n=s.length-1),i.forEach(function(i){-1===e.indexOf(i)&&(void 0===a[i]&&(a[i]=[]),a[i]=a[i].concat(t[i]))},this),s[n]=a},this),s},e._showBarTooltip=function(e,i,s,n){var a,r,o,l,h,c,u=5,d=10,p=750,f=t.select(i),g=f.node().getBBox().x,m=f.node().getBBox().y,y=f.node().getBBox().width,_=f.node().getBBox().height,x=f.attr("opacity"),v=f.attr("fill"),b=n._dropLineOrigin(),C=t.rgb(t.rgb(v).r+.6*(255-t.rgb(v).r),t.rgb(v).g+.6*(255-t.rgb(v).g),t.rgb(v).b+.6*(255-t.rgb(v).b)),F=t.rgb(t.rgb(v).r+.8*(255-t.rgb(v).r),t.rgb(v).g+.8*(255-t.rgb(v).g),t.rgb(v).b+.8*(255-t.rgb(v).b)),w=n.getTooltipText(e),P=0,k=0,S=0,L=function(t,e){var i=f.node().getCTM(),n=s.svg.node().createSVGPoint();return n.x=t||0,n.y=e||0,n.matrixTransform(i)};null!==s._tooltipGroup&&void 0!==s._tooltipGroup&&s._tooltipGroup.remove(),s._tooltipGroup=s.svg.append("g"),n.p||(c=n._isStacked()?1:y/2,n.x._hasCategories()||null===b.y||s._tooltipGroup.append("line").attr("class","dimple-tooltip-dropline "+s.customClassList.tooltipDropLine).attr("x1",g<n.x._origin?g+c:g+y-c).attr("y1",m<b.y?m+_:m).attr("x2",g<n.x._origin?g+c:g+y-c).attr("y2",m<b.y?m+_:m).call(function(){s.noFormats||this.style("fill","none").style("stroke",v).style("stroke-width",2).style("stroke-dasharray","3, 3").style("opacity",x)}).transition().delay(p/2).duration(p/2).ease("linear").attr("y2",m<b.y?b.y-1:b.y+1),c=n._isStacked()?1:_/2,n.y._hasCategories()||null===b.x||s._tooltipGroup.append("line").attr("class","dimple-tooltip-dropline "+s.customClassList.tooltipDropLine).attr("x1",g<b.x?g+y:g).attr("y1",m<n.y._origin?m+c:m+_-c).attr("x2",g<b.x?g+y:g).attr("y2",m<n.y._origin?m+c:m+_-c).call(function(){s.noFormats||this.style("fill","none").style("stroke",v).style("stroke-width",2).style("stroke-dasharray","3, 3").style("opacity",x)}).transition().delay(p/2).duration(p/2).ease("linear").attr("x2",g<b.x?b.x-1:b.x+1)),a=s._tooltipGroup.append("g"),r=a.append("rect").attr("class","dimple-tooltip "+s.customClassList.tooltipBox),a.selectAll(".dimple-dont-select-any").data(w).enter().append("text").attr("class","dimple-tooltip "+s.customClassList.tooltipLabel).text(function(t){return t}).call(function(){s.noFormats||this.style("font-family",n.tooltipFontFamily).style("font-size",n._getTooltipFontSize())}),a.each(function(){k=this.getBBox().width>k?this.getBBox().width:k,S=this.getBBox().width>S?this.getBBox().height:S}),a.selectAll("text").attr("x",0).attr("y",function(){return P+=this.getBBox().height,P-this.getBBox().height/2}),r.attr("x",-u).attr("y",-u).attr("height",Math.floor(P+u)-.5).attr("width",k+2*u).attr("rx",5).attr("ry",5).call(function(){s.noFormats||this.style("fill",F).style("stroke",C).style("stroke-width",2).style("opacity",.95)}),L(g+y+u+d+k).x<parseFloat(s.svg.node().getBBox().width)?(o=g+y+u+d,l=m+_/2-(P-(S-u))/2):L(g-(u+d+k)).x>0?(o=g-(u+d+k),l=m+_/2-(P-(S-u))/2):L(0,m+_+P+d+u).y<parseFloat(s.svg.node().getBBox().height)?(o=g+y/2-(2*u+k)/2,o=o>0?o:d,o=o+k<parseFloat(s.svg.node().getBBox().width)?o:parseFloat(s.svg.node().getBBox().width)-k-d,l=m+_+2*u):(o=g+y/2-(2*u+k)/2,o=o>0?o:d,o=o+k<parseFloat(s.svg.node().getBBox().width)?o:parseFloat(s.svg.node().getBBox().width)-k-d,l=m-P-(S-u)),h=L(o,l),a.attr("transform","translate("+h.x+" , "+h.y+")")},e._showPointTooltip=function(i,s,n,a){var r,o,l,h,c=5,u=10,d=750,p=t.select(s),f=parseFloat(p.attr("cx")),g=parseFloat(p.attr("cy")),m=parseFloat(p.attr("r")),y=e._helpers.opacity(i,n,a),_=p.attr("stroke"),x=a._dropLineOrigin(),v=t.rgb(t.rgb(_).r+.6*(255-t.rgb(_).r),t.rgb(_).g+.6*(255-t.rgb(_).g),t.rgb(_).b+.6*(255-t.rgb(_).b)),b=t.rgb(t.rgb(_).r+.8*(255-t.rgb(_).r),t.rgb(_).g+.8*(255-t.rgb(_).g),t.rgb(_).b+.8*(255-t.rgb(_).b)),C=0,F=0,w=0,P=a.getTooltipText(i);null!==n._tooltipGroup&&void 0!==n._tooltipGroup&&n._tooltipGroup.remove(),n._tooltipGroup=n.svg.append("g"),n._tooltipGroup.append("circle").attr("cx",f).attr("cy",g).attr("r",m).call(function(){n.noFormats||this.attr("opacity",0).style("fill","none").style("stroke",_).style("stroke-width",1)}).transition().duration(d/2).ease("linear").attr("r",m+a.lineWeight+2).call(function(){n.noFormats||this.attr("opacity",1).style("stroke-width",2)}),null!==x.y&&n._tooltipGroup.append("line").attr("class","dimple-tooltip-dropline "+n.customClassList.tooltipDropLine).attr("x1",f).attr("y1",g<x.y?g+m+a.lineWeight+2:g-m-a.lineWeight-2).attr("x2",f).attr("y2",g<x.y?g+m+a.lineWeight+2:g-m-a.lineWeight-2).call(function(){n.noFormats||this.style("fill","none").style("stroke",_).style("stroke-width",2).style("stroke-dasharray","3, 3").style("opacity",y)}).transition().delay(d/2).duration(d/2).ease("linear").attr("y2",g<x.y?x.y-1:x.y+1),null!==x.x&&n._tooltipGroup.append("line").attr("class","dimple-tooltip-dropline "+n.customClassList.tooltipDropLine).attr("x1",f<x.x?f+m+a.lineWeight+2:f-m-a.lineWeight-2).attr("y1",g).attr("x2",f<x.x?f+m+a.lineWeight+2:f-m-a.lineWeight-2).attr("y2",g).call(function(){n.noFormats||this.style("fill","none").style("stroke",_).style("stroke-width",2).style("stroke-dasharray","3, 3").style("opacity",y)}).transition().delay(d/2).duration(d/2).ease("linear").attr("x2",f<x.x?x.x-1:x.x+1),r=n._tooltipGroup.append("g"),o=r.append("rect").attr("class","dimple-tooltip "+n.customClassList.tooltipBox),r.selectAll(".dont-select-any").data(P).enter().append("text").attr("class","dimple-tooltip "+n.customClassList.tooltipLabel).text(function(t){return t}).call(function(){n.noFormats||this.style("font-family",a.tooltipFontFamily).style("font-size",a._getTooltipFontSize())}),r.each(function(){F=this.getBBox().width>F?this.getBBox().width:F,w=this.getBBox().width>w?this.getBBox().height:w}),r.selectAll("text").attr("x",0).attr("y",function(){return C+=this.getBBox().height,C-this.getBBox().height/2}),o.attr("x",-c).attr("y",-c).attr("height",Math.floor(C+c)-.5).attr("width",F+2*c).attr("rx",5).attr("ry",5).call(function(){n.noFormats||this.style("fill",b).style("stroke",v).style("stroke-width",2).style("opacity",.95)}),f+m+c+u+F<parseFloat(n.svg.node().getBBox().width)?(l=f+m+c+u,h=g-(C-(w-c))/2):f-m-(c+u+F)>0?(l=f-m-(c+u+F),h=g-(C-(w-c))/2):g+m+C+u+c<parseFloat(n.svg.node().getBBox().height)?(l=f-(2*c+F)/2,l=l>0?l:u,l=l+F<parseFloat(n.svg.node().getBBox().width)?l:parseFloat(n.svg.node().getBBox().width)-F-u,h=g+m+2*c):(l=f-(2*c+F)/2,l=l>0?l:u,l=l+F<parseFloat(n.svg.node().getBBox().width)?l:parseFloat(n.svg.node().getBBox().width)-F-u,h=g-C-(w-c)),r.attr("transform","translate("+l+" , "+h+")")},e.filterData=function(t,e,i){var s=t;return null!==e&&null!==i&&(null!==i&&void 0!==i&&(i=[].concat(i)),s=[],t.forEach(function(t){null===t[e]?s.push(t):i.indexOf([].concat(t[e]).join("/"))>-1&&s.push(t)},this)),s},e.getUniqueValues=function(t,e){var i=[];return null!==e&&void 0!==e&&(e=[].concat(e),t.forEach(function(t){var s="";e.forEach(function(e,i){i>0&&(s+="/"),s+=t[e]},this),-1===i.indexOf(s)&&i.push(s)},this)),i},e.newSvg=function(e,i,s){var n=null;if((null===e||void 0===e)&&(e="body"),n=t.select(e),n.empty())throw"The '"+e+"' selector did not match any elements.  Please prefix with '#' to select by id or '.' to select by class";return n.append("svg").attr("width",i).attr("height",s)},e}),!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.ProgressBar=t()}}(function(){var t;return function e(t,i,s){function n(r,o){if(!i[r]){if(!t[r]){var l="function"==typeof require&&require;if(!o&&l)return l(r,!0);if(a)return a(r,!0);var h=new Error("Cannot find module '"+r+"'");throw h.code="MODULE_NOT_FOUND",h}var c=i[r]={exports:{}};t[r][0].call(c.exports,function(e){var i=t[r][1][e];return n(i?i:e)},c,c.exports,e,t,i,s)}return i[r].exports}for(var a="function"==typeof require&&require,r=0;r<s.length;r++)n(s[r]);return n}({1:[function(e,i,s){(function(){var e=this,n=function(){"use strict";function n(){}function a(t,e){var i;for(i in t)Object.hasOwnProperty.call(t,i)&&e(i)}function r(t,e){return a(e,function(i){t[i]=e[i]}),t}function o(t,e){a(e,function(i){"undefined"==typeof t[i]&&(t[i]=e[i])})}function l(t,e,i,s,n,a,r){var o,l,c,u=a>t?0:(t-a)/n;for(o in e)e.hasOwnProperty(o)&&(l=r[o],c="function"==typeof l?l:f[l],e[o]=h(i[o],s[o],c,u));return e}function h(t,e,i,s){return t+(e-t)*i(s)}function c(t,e){var i=p.prototype.filter,s=t._filterArgs;a(i,function(n){"undefined"!=typeof i[n][e]&&i[n][e].apply(t,s)})}function u(t,e,i,s,n,a,r,o,h,u,d){b=e+i+s,C=Math.min(d||v(),b),F=C>=b,w=s-(b-C),t.isPlaying()&&!F?(t._scheduleId=u(t._timeoutHandler,_),c(t,"beforeTween"),e+i>C?l(1,n,a,r,1,1,o):l(C,n,a,r,s,e+i,o),c(t,"afterTween"),h(n,t._attachment,w)):t.isPlaying()&&F&&(h(r,t._attachment,w),t.stop(!0))}function d(t,e){var i={},s=typeof e;return"string"===s||"function"===s?a(t,function(t){i[t]=e}):a(t,function(t){i[t]||(i[t]=e[t]||m)}),i}function p(t,e){this._currentState=t||{},this._configured=!1,this._scheduleFunction=g,"undefined"!=typeof e&&this.setConfig(e)}var f,g,m="linear",y=500,_=1e3/60,x=Date.now?Date.now:function(){return+new Date},v="undefined"!=typeof SHIFTY_DEBUG_NOW?SHIFTY_DEBUG_NOW:x;g="undefined"!=typeof window?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||window.mozCancelRequestAnimationFrame&&window.mozRequestAnimationFrame||setTimeout:setTimeout;var b,C,F,w;return p.prototype.tween=function(t){return this._isTweening?this:(void 0===t&&this._configured||this.setConfig(t),this._timestamp=v(),this._start(this.get(),this._attachment),this.resume())},p.prototype.setConfig=function(t){t=t||{},this._configured=!0,this._attachment=t.attachment,this._pausedAtTime=null,this._scheduleId=null,this._delay=t.delay||0,this._start=t.start||n,this._step=t.step||n,this._finish=t.finish||n,this._duration=t.duration||y,this._currentState=r({},t.from)||this.get(),this._originalState=this.get(),this._targetState=r({},t.to)||this.get();var e=this;this._timeoutHandler=function(){u(e,e._timestamp,e._delay,e._duration,e._currentState,e._originalState,e._targetState,e._easing,e._step,e._scheduleFunction)};var i=this._currentState,s=this._targetState;return o(s,i),this._easing=d(i,t.easing||m),this._filterArgs=[i,this._originalState,s,this._easing],c(this,"tweenCreated"),this},p.prototype.get=function(){return r({},this._currentState)},p.prototype.set=function(t){this._currentState=t},p.prototype.pause=function(){return this._pausedAtTime=v(),this._isPaused=!0,this},p.prototype.resume=function(){return this._isPaused&&(this._timestamp+=v()-this._pausedAtTime),this._isPaused=!1,this._isTweening=!0,this._timeoutHandler(),this},p.prototype.seek=function(t){t=Math.max(t,0);var e=v();return this._timestamp+t===0?this:(this._timestamp=e-t,this.isPlaying()||(this._isTweening=!0,this._isPaused=!1,u(this,this._timestamp,this._delay,this._duration,this._currentState,this._originalState,this._targetState,this._easing,this._step,this._scheduleFunction,e),this.pause()),this)},p.prototype.stop=function(t){return this._isTweening=!1,this._isPaused=!1,this._timeoutHandler=n,(e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.oCancelAnimationFrame||e.msCancelAnimationFrame||e.mozCancelRequestAnimationFrame||e.clearTimeout)(this._scheduleId),t&&(c(this,"beforeTween"),l(1,this._currentState,this._originalState,this._targetState,1,0,this._easing),c(this,"afterTween"),c(this,"afterTweenEnd"),this._finish.call(this,this._currentState,this._attachment)),this},p.prototype.isPlaying=function(){return this._isTweening&&!this._isPaused},p.prototype.setScheduleFunction=function(t){this._scheduleFunction=t},p.prototype.dispose=function(){var t;for(t in this)this.hasOwnProperty(t)&&delete this[t]},p.prototype.filter={},p.prototype.formula={linear:function(t){return t}},f=p.prototype.formula,r(p,{now:v,each:a,tweenProps:l,tweenProp:h,applyFilter:c,shallowCopy:r,defaults:o,composeEasingObject:d}),"function"==typeof SHIFTY_DEBUG_NOW&&(e.timeoutHandler=u),"object"==typeof s?i.exports=p:"function"==typeof t&&t.amd?t(function(){return p}):"undefined"==typeof e.Tweenable&&(e.Tweenable=p),p}();!function(){n.shallowCopy(n.prototype.formula,{easeInQuad:function(t){return Math.pow(t,2)},easeOutQuad:function(t){return-(Math.pow(t-1,2)-1)},easeInOutQuad:function(t){return(t/=.5)<1?.5*Math.pow(t,2):-.5*((t-=2)*t-2)},easeInCubic:function(t){return Math.pow(t,3)},easeOutCubic:function(t){return Math.pow(t-1,3)+1},easeInOutCubic:function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)},easeInQuart:function(t){return Math.pow(t,4)},easeOutQuart:function(t){return-(Math.pow(t-1,4)-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*Math.pow(t,4):-.5*((t-=2)*Math.pow(t,3)-2)},easeInQuint:function(t){return Math.pow(t,5)},easeOutQuint:function(t){return Math.pow(t-1,5)+1},easeInOutQuint:function(t){return(t/=.5)<1?.5*Math.pow(t,5):.5*(Math.pow(t-2,5)+2)},easeInSine:function(t){return-Math.cos(t*(Math.PI/2))+1},easeOutSine:function(t){return Math.sin(t*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},easeInExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},easeOutExpo:function(t){return 1===t?1:-Math.pow(2,-10*t)+1},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},easeInCirc:function(t){return-(Math.sqrt(1-t*t)-1)},easeOutCirc:function(t){return Math.sqrt(1-Math.pow(t-1,2))},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeOutBounce:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInBack:function(t){var e=1.70158;return t*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?.5*t*t*(((e*=1.525)+1)*t-e):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},elastic:function(t){return-1*Math.pow(4,-8*t)*Math.sin(2*(6*t-1)*Math.PI/2)+1},swingFromTo:function(t){var e=1.70158;return(t/=.5)<1?.5*t*t*(((e*=1.525)+1)*t-e):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},swingFrom:function(t){var e=1.70158;return t*t*((e+1)*t-e)},swingTo:function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},bounce:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bouncePast:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?2-(7.5625*(t-=1.5/2.75)*t+.75):2.5/2.75>t?2-(7.5625*(t-=2.25/2.75)*t+.9375):2-(7.5625*(t-=2.625/2.75)*t+.984375)},easeFromTo:function(t){return(t/=.5)<1?.5*Math.pow(t,4):-.5*((t-=2)*Math.pow(t,3)-2)},easeFrom:function(t){return Math.pow(t,4)},easeTo:function(t){return Math.pow(t,.25)}})}(),function(){function t(t,e,i,s,n,a){function r(t){return((p*t+f)*t+g)*t}function o(t){return((m*t+y)*t+_)*t}function l(t){return(3*p*t+2*f)*t+g}function h(t){return 1/(200*t)}function c(t,e){return o(d(t,e))}function u(t){return t>=0?t:0-t}function d(t,e){var i,s,n,a,o,h;for(n=t,h=0;8>h;h++){if(a=r(n)-t,u(a)<e)return n;if(o=l(n),u(o)<1e-6)break;n-=a/o}if(i=0,s=1,n=t,i>n)return i;if(n>s)return s;for(;s>i;){if(a=r(n),u(a-t)<e)return n;t>a?i=n:s=n,n=.5*(s-i)+i}return n}var p=0,f=0,g=0,m=0,y=0,_=0;return g=3*e,f=3*(s-e)-g,p=1-g-f,_=3*i,y=3*(n-i)-_,m=1-_-y,c(t,h(a))}function e(e,i,s,n){return function(a){return t(a,e,i,s,n,1)}}n.setBezierFunction=function(t,i,s,a,r){var o=e(i,s,a,r);return o.displayName=t,o.x1=i,o.y1=s,o.x2=a,o.y2=r,n.prototype.formula[t]=o},n.unsetBezierFunction=function(t){delete n.prototype.formula[t]}}(),function(){function t(t,e,i,s,a,r){return n.tweenProps(s,e,t,i,1,r,a)}var e=new n;e._filterArgs=[],n.interpolate=function(i,s,a,r,o){var l=n.shallowCopy({},i),h=o||0,c=n.composeEasingObject(i,r||"linear");e.set({});var u=e._filterArgs;u.length=0,u[0]=l,u[1]=i,u[2]=s,u[3]=c,n.applyFilter(e,"tweenCreated"),n.applyFilter(e,"beforeTween");var d=t(i,l,s,a,c,h);return n.applyFilter(e,"afterTween"),d}}(),function(t){function e(t,e){var i,s=[],n=t.length;for(i=0;n>i;i++)s.push("_"+e+"_"+i);return s}function i(t){var e=t.match(b);return e?(1===e.length||t[0].match(v))&&e.unshift(""):e=["",""],e.join(k)}function s(e){t.each(e,function(t){var i=e[t];"string"==typeof i&&i.match(P)&&(e[t]=n(i))})}function n(t){return l(P,t,a)}function a(t){var e=r(t);return"rgb("+e[0]+","+e[1]+","+e[2]+")"}function r(t){return t=t.replace(/#/,""),3===t.length&&(t=t.split(""),t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),S[0]=o(t.substr(0,2)),S[1]=o(t.substr(2,2)),S[2]=o(t.substr(4,2)),S}function o(t){return parseInt(t,16)}function l(t,e,i){var s=e.match(t),n=e.replace(t,k);if(s)for(var a,r=s.length,o=0;r>o;o++)a=s.shift(),n=n.replace(k,i(a));return n}function h(t){return l(F,t,c)}function c(t){for(var e=t.match(C),i=e.length,s=t.match(w)[0],n=0;i>n;n++)s+=parseInt(e[n],10)+",";return s=s.slice(0,-1)+")"}function u(s){var n={};return t.each(s,function(t){var a=s[t];if("string"==typeof a){var r=y(a);n[t]={formatString:i(a),chunkNames:e(r,t)}}}),n}function d(e,i){t.each(i,function(t){for(var s=e[t],n=y(s),a=n.length,r=0;a>r;r++)e[i[t].chunkNames[r]]=+n[r];delete e[t]})}function p(e,i){t.each(i,function(t){var s=e[t],n=f(e,i[t].chunkNames),a=g(n,i[t].chunkNames);s=m(i[t].formatString,a),e[t]=h(s)})}function f(t,e){for(var i,s={},n=e.length,a=0;n>a;a++)i=e[a],s[i]=t[i],delete t[i];return s}function g(t,e){L.length=0;for(var i=e.length,s=0;i>s;s++)L.push(t[e[s]]);return L}function m(t,e){for(var i=t,s=e.length,n=0;s>n;n++)i=i.replace(k,+e[n].toFixed(4));return i}function y(t){return t.match(C)}function _(e,i){t.each(i,function(t){var s,n=i[t],a=n.chunkNames,r=a.length,o=e[t];if("string"==typeof o){var l=o.split(" "),h=l[l.length-1];for(s=0;r>s;s++)e[a[s]]=l[s]||h}else for(s=0;r>s;s++)e[a[s]]=o;delete e[t]})}function x(e,i){t.each(i,function(t){var s=i[t],n=s.chunkNames,a=n.length,r=e[n[0]],o=typeof r;if("string"===o){for(var l="",h=0;a>h;h++)l+=" "+e[n[h]],delete e[n[h]];e[t]=l.substr(1)}else e[t]=r})}var v=/(\d|\-|\.)/,b=/([^\-0-9\.]+)/g,C=/[0-9.\-]+/g,F=new RegExp("rgb\\("+C.source+/,\s*/.source+C.source+/,\s*/.source+C.source+"\\)","g"),w=/^.*\(/,P=/#([0-9]|[a-f]){3,6}/gi,k="VAL",S=[],L=[];t.prototype.filter.token={tweenCreated:function(t,e,i,n){s(t),s(e),s(i),this._tokenData=u(t)},beforeTween:function(t,e,i,s){_(s,this._tokenData),d(t,this._tokenData),d(e,this._tokenData),d(i,this._tokenData)},afterTween:function(t,e,i,s){p(t,this._tokenData),p(e,this._tokenData),p(i,this._tokenData),x(s,this._tokenData)}}}(n)}).call(null)},{}],2:[function(t,e,i){var s=t("./shape"),n=t("./utils"),a=function(t,e){this._pathTemplate="M 50,50 m 0,-{radius} a {radius},{radius} 0 1 1 0,{2radius} a {radius},{radius} 0 1 1 0,-{2radius}",s.apply(this,arguments)};a.prototype=new s,a.prototype.constructor=a,a.prototype._pathString=function(t){var e=t.strokeWidth;t.trailWidth&&t.trailWidth>t.strokeWidth&&(e=t.trailWidth);var i=50-e/2;return n.render(this._pathTemplate,{radius:i,"2radius":2*i})},a.prototype._trailString=function(t){return this._pathString(t)},e.exports=a},{"./shape":7,"./utils":8}],3:[function(t,e,i){var s=t("./shape"),n=t("./utils"),a=function(t,e){this._pathTemplate="M 0,{center} L 100,{center}",s.apply(this,arguments)};a.prototype=new s,a.prototype.constructor=a,a.prototype._initializeSvg=function(t,e){t.setAttribute("viewBox","0 0 100 "+e.strokeWidth),t.setAttribute("preserveAspectRatio","none")},a.prototype._pathString=function(t){return n.render(this._pathTemplate,{center:t.strokeWidth/2})},a.prototype._trailString=function(t){return this._pathString(t)},e.exports=a},{"./shape":7,"./utils":8}],4:[function(t,e,i){e.exports={Line:t("./line"),Circle:t("./circle"),SemiCircle:t("./semicircle"),Path:t("./path"),Shape:t("./shape"),utils:t("./utils")}},{"./circle":2,"./line":3,"./path":5,"./semicircle":6,"./shape":7,"./utils":8}],5:[function(t,e,i){var s=t("shifty"),n=t("./utils"),a={easeIn:"easeInCubic",easeOut:"easeOutCubic",easeInOut:"easeInOutCubic"},r=function(t,e){e=n.extend({duration:800,easing:"linear",from:{},to:{},step:function(){}},e);var i;i=n.isString(t)?document.querySelector(t):t,this.path=i,this._opts=e,this._tweenable=null;var s=this.path.getTotalLength();this.path.style.strokeDasharray=s+" "+s,this.set(0)};r.prototype.value=function(){var t=this._getComputedDashOffset(),e=this.path.getTotalLength(),i=1-t/e;return parseFloat(i.toFixed(6),10)},r.prototype.set=function(t){this.stop(),this.path.style.strokeDashoffset=this._progressToOffset(t);var e=this._opts.step;if(n.isFunction(e)){var i=this._easing(this._opts.easing),s=this._calculateTo(t,i),a=this._opts.shape||this;e(s,a,this._opts.attachment)}},r.prototype.stop=function(){this._stopTween(),this.path.style.strokeDashoffset=this._getComputedDashOffset()},r.prototype.animate=function(t,e,i){e=e||{},n.isFunction(e)&&(i=e,e={});var a=n.extend({},e),r=n.extend({},this._opts);e=n.extend(r,e);var o=this._easing(e.easing),l=this._resolveFromAndTo(t,o,a);this.stop(),this.path.getBoundingClientRect();var h=this._getComputedDashOffset(),c=this._progressToOffset(t),u=this;this._tweenable=new s,this._tweenable.tween({from:n.extend({offset:h},l.from),to:n.extend({offset:c},l.to),duration:e.duration,easing:o,step:function(t){u.path.style.strokeDashoffset=t.offset;var i=e.shape||u;e.step(t,i,e.attachment)},finish:function(t){n.isFunction(i)&&i()}})},r.prototype._getComputedDashOffset=function(){var t=window.getComputedStyle(this.path,null);return parseFloat(t.getPropertyValue("stroke-dashoffset"),10)},r.prototype._progressToOffset=function(t){
var e=this.path.getTotalLength();return e-t*e},r.prototype._resolveFromAndTo=function(t,e,i){return i.from&&i.to?{from:i.from,to:i.to}:{from:this._calculateFrom(e),to:this._calculateTo(t,e)}},r.prototype._calculateFrom=function(t){return s.interpolate(this._opts.from,this._opts.to,this.value(),t)},r.prototype._calculateTo=function(t,e){return s.interpolate(this._opts.from,this._opts.to,t,e)},r.prototype._stopTween=function(){null!==this._tweenable&&(this._tweenable.stop(),this._tweenable.dispose(),this._tweenable=null)},r.prototype._easing=function(t){return a.hasOwnProperty(t)?a[t]:t},e.exports=r},{"./utils":8,shifty:1}],6:[function(t,e,i){var s=t("./shape"),n=t("./circle"),a=t("./utils"),r=function(t,e){this._pathTemplate="M 50,50 m -{radius},0 a {radius},{radius} 0 1 1 {2radius},0",s.apply(this,arguments)};r.prototype=new s,r.prototype.constructor=r,r.prototype._initializeSvg=function(t,e){t.setAttribute("viewBox","0 0 100 50")},r.prototype._initializeTextElement=function(t,e,i){t.text.style&&(i.style.top="auto",i.style.bottom="0",t.text.alignToBottom?a.setStyle(i,"transform","translate(-50%, 0)"):a.setStyle(i,"transform","translate(-50%, 50%)"))},r.prototype._pathString=n.prototype._pathString,r.prototype._trailString=n.prototype._trailString,e.exports=r},{"./circle":2,"./shape":7,"./utils":8}],7:[function(t,e,i){var s=t("./path"),n=t("./utils"),a="Object is destroyed",r=function o(t,e){if(!(this instanceof o))throw new Error("Constructor was called without new keyword");if(0!==arguments.length){this._opts=n.extend({color:"#555",strokeWidth:1,trailColor:null,trailWidth:null,fill:null,text:{style:{color:null,position:"absolute",left:"50%",top:"50%",padding:0,margin:0,transform:{prefix:!0,value:"translate(-50%, -50%)"}},alignToBottom:!0,value:"",className:"progressbar-text"},svgStyle:{display:"block",width:"100%"}},e,!0);var i,a=this._createSvgView(this._opts);if(i=n.isString(t)?document.querySelector(t):t,!i)throw new Error("Container does not exist: "+t);this._container=i,this._container.appendChild(a.svg),this._opts.svgStyle&&n.setStyles(a.svg,this._opts.svgStyle),this.text=null,this._opts.text.value&&(this.text=this._createTextElement(this._opts,this._container),this._container.appendChild(this.text)),this.svg=a.svg,this.path=a.path,this.trail=a.trail;var r=n.extend({attachment:void 0,shape:this},this._opts);this._progressPath=new s(a.path,r)}};r.prototype.animate=function(t,e,i){if(null===this._progressPath)throw new Error(a);this._progressPath.animate(t,e,i)},r.prototype.stop=function(){if(null===this._progressPath)throw new Error(a);void 0!==this._progressPath&&this._progressPath.stop()},r.prototype.destroy=function(){if(null===this._progressPath)throw new Error(a);this.stop(),this.svg.parentNode.removeChild(this.svg),this.svg=null,this.path=null,this.trail=null,this._progressPath=null,null!==this.text&&(this.text.parentNode.removeChild(this.text),this.text=null)},r.prototype.set=function(t){if(null===this._progressPath)throw new Error(a);this._progressPath.set(t)},r.prototype.value=function(){if(null===this._progressPath)throw new Error(a);return void 0===this._progressPath?0:this._progressPath.value()},r.prototype.setText=function(t){if(null===this._progressPath)throw new Error(a);null===this.text&&(this.text=this._createTextElement(this._opts,this._container),this._container.appendChild(this.text)),this.text.removeChild(this.text.firstChild),this.text.appendChild(document.createTextNode(t))},r.prototype._createSvgView=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");this._initializeSvg(e,t);var i=null;(t.trailColor||t.trailWidth)&&(i=this._createTrail(t),e.appendChild(i));var s=this._createPath(t);return e.appendChild(s),{svg:e,path:s,trail:i}},r.prototype._initializeSvg=function(t,e){t.setAttribute("viewBox","0 0 100 100")},r.prototype._createPath=function(t){var e=this._pathString(t);return this._createPathElement(e,t)},r.prototype._createTrail=function(t){var e=this._trailString(t),i=n.extend({},t);return i.trailColor||(i.trailColor="#eee"),i.trailWidth||(i.trailWidth=i.strokeWidth),i.color=i.trailColor,i.strokeWidth=i.trailWidth,i.fill=null,this._createPathElement(e,i)},r.prototype._createPathElement=function(t,e){var i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttribute("d",t),i.setAttribute("stroke",e.color),i.setAttribute("stroke-width",e.strokeWidth),e.fill?i.setAttribute("fill",e.fill):i.setAttribute("fill-opacity","0"),i},r.prototype._createTextElement=function(t,e){var i=document.createElement("p");i.appendChild(document.createTextNode(t.text.value));var s=t.text.style;return s&&(e.style.position="relative",n.setStyles(i,s),s.color||(i.style.color=t.color)),i.className=t.text.className,this._initializeTextElement(t,e,i),i},r.prototype._initializeTextElement=function(t,e,i){},r.prototype._pathString=function(t){throw new Error("Override this function for each progress bar")},r.prototype._trailString=function(t){throw new Error("Override this function for each progress bar")},e.exports=r},{"./path":5,"./utils":8}],8:[function(t,e,i){function s(t,e,i){t=t||{},e=e||{},i=i||!1;for(var n in e)if(e.hasOwnProperty(n)){var a=t[n],r=e[n];t[n]=i&&u(a)&&u(r)?s(a,r,i):r}return t}function n(t,e){var i=t;for(var s in e)if(e.hasOwnProperty(s)){var n=e[s],a="\\{"+s+"\\}",r=new RegExp(a,"g");i=i.replace(r,n)}return i}function a(t,e,i){for(var s=0;s<p.length;++s){var n=p[s];t.style[n+o(e)]=i}t.style[e]=i}function r(t,e){d(e,function(e,i){null!==e&&void 0!==e&&(u(e)&&e.prefix===!0?a(t,i,e.value):t.style[i]=e)})}function o(t){return t.charAt(0).toUpperCase()+t.slice(1)}function l(t){return"string"==typeof t||t instanceof String}function h(t){return"function"==typeof t}function c(t){return"[object Array]"===Object.prototype.toString.call(t)}function u(t){if(c(t))return!1;var e=typeof t;return"object"===e&&!!t}function d(t,e){for(var i in t)if(t.hasOwnProperty(i)){var s=t[i];e(s,i)}}var p="Webkit Moz O ms".split(" ");e.exports={extend:s,render:n,setStyle:a,setStyles:r,capitalize:o,isString:l,isFunction:h,isObject:u,forEachObject:d}},{}]},{},[4])(4)}),!function(t,e){"use strict";if("object"==typeof exports)module.exports=e(require("d3"));else if("function"==typeof define&&define.amd)define(["d3"],function(i){return t.dimple=e(i),t.dimple});else if(t.d3)t.dimple=e(t.d3);else{if(!console||!console.warn)throw"dimple requires d3 to run.  Are you missing a reference to the d3 library?";console.warn("dimple requires d3 to run.  Are you missing a reference to the d3 library?")}}(this,function(t){"use strict";var e={version:"2.1.6",plot:{},aggregateMethod:{}};return e.axis=function(i,s,n,a,r,o){this.chart=i,this.position=s,this.categoryFields=null===r||void 0===r?n:[].concat(r),this.measure=a,this.timeField=r,this.floatingBarWidth=5,this.hidden=!1,this.showPercent=!1,this.colors=null,this.overrideMin=null,this.overrideMax=null,this.shapes=null,this.showGridlines=null,this.gridlineShapes=null,this.titleShape=null,this.dateParseFormat=null,this.tickFormat=null,this.timePeriod=null,this.timeInterval=1,this.useLog=!1,this.logBase=10,this.title=void 0,this.clamp=!0,this.ticks=null,this.fontSize="10px",this.fontFamily="sans-serif",this.autoRotateLabel=null===o||void 0===o?!0:o,this._slaves=[],this._scale=null,this._min=0,this._max=0,this._previousOrigin=null,this._origin=null,this._orderRules=[],this._groupOrderRules=[],this._draw=null,this._getAxisData=function(){var t,e,i=[],s=!1;if(this.chart&&this.chart.series){for(t=0;t<this.chart.series.length;t+=1)e=this.chart.series[t],e[this.position]===this&&(e.data&&e.data.length>0?i=i.concat(e.data):s=!0);s&&this.chart.data&&(i=i.concat(this.chart.data))}return i},this._getFontSize=function(){var t;return t=this.fontSize&&"auto"!==this.fontSize.toString().toLowerCase()?isNaN(this.fontSize)?this.fontSize:this.fontSize+"px":(this.chart._heightPixels()/35>10?this.chart._heightPixels()/35:10)+"px"},this._getFormat=function(){var e,i,s,n,a,r,o;return null!==this.tickFormat&&void 0!==this.tickFormat?e=this._hasTimeField()?t.time.format(this.tickFormat):t.format(this.tickFormat):this.showPercent?e=t.format("%"):this.useLog&&null!==this.measure?e=function(e){var i=Math.floor(Math.abs(e),0).toString().length,s=Math.min(Math.floor((i-1)/3),4),n="kmBT".substring(s-1,s),a="0"===Math.round(e/Math.pow(1e3,s)*10).toString().slice(-1)?0:1;return 0===e?0:t.format(",."+a+"f")(e/Math.pow(1e3,s))+n}:null!==this.measure?(i=Math.floor(Math.abs(this._max),0).toString(),s=Math.floor(Math.abs(this._min),0).toString(),n=Math.max(s.length,i.length),n>3?(a=Math.min(Math.floor((n-1)/3),4),r="kmBT".substring(a-1,a),o=1>=n-3*a?1:0,e=function(e){return 0===e?0:t.format(",."+o+"f")(e/Math.pow(1e3,a))+r}):(o=-Math.floor(Math.log(this._tick_step)/Math.LN10),e=t.format(",."+o+"f"))):e=function(t){return t},e},this._getTimePeriod=function(){var e=this.timePeriod,i=30,s=this._max-this._min;return this._hasTimeField()&&!this.timePeriod&&(e=i>=s/1e3?t.time.seconds:i>=s/6e4?t.time.minutes:i>=s/36e5?t.time.hours:i>=s/864e5?t.time.days:i>=s/6048e5?t.time.weeks:i>=s/26298e5?t.time.months:t.time.years),e},this._getTooltipText=function(e,i){if(this._hasTimeField())i[this.position+"Field"][0]&&e.push(this.timeField+": "+this._getFormat()(i[this.position+"Field"][0]));else if(this._hasCategories())this.categoryFields.forEach(function(t,s){null!==t&&void 0!==t&&i[this.position+"Field"][s]&&e.push(t+(i[this.position+"Field"][s]!==t?": "+i[this.position+"Field"][s]:""))},this);else if(this._hasMeasure())switch(this.position){case"x":e.push(this.measure+": "+this._getFormat()(i.width));break;case"y":e.push(this.measure+": "+this._getFormat()(i.height));break;case"p":e.push(this.measure+": "+this._getFormat()(i.angle)+" ("+t.format("%")(i.piePct)+")");break;default:e.push(this.measure+": "+this._getFormat()(i[this.position+"Value"]))}},this._getTopMaster=function(){var t=this;return null!==this.master&&void 0!==this.master&&(t=this.master._getTopMaster()),t},this._hasCategories=function(){return null!==this.categoryFields&&void 0!==this.categoryFields&&this.categoryFields.length>0},this._hasMeasure=function(){return null!==this.measure&&void 0!==this.measure},this._hasTimeField=function(){return null!==this.timeField&&void 0!==this.timeField},this._parseDate=function(e){var i;return i=null===this.dateParseFormat||void 0===this.dateParseFormat?isNaN(e)?Date.parse(e):new Date(e):t.time.format(this.dateParseFormat).parse(e)},this._update=function(i){var s,n,a,r,o=[],l=this.ticks||10,h=function(t,i,s){var n,a,r=t.categoryFields[0],o=t._getAxisData(),l=r,h=!1,c=!0,u=null;for(n=0;n<o.length;n+=1)if(u=t._parseDate(o[n][r]),null!==u&&void 0!==u&&isNaN(u)){c=!1;break}return c||t.chart.series.forEach(function(e){e[i]===t&&e[s]._hasMeasure()&&(l=e[s].measure,h=!0)},this),a=t._orderRules.concat({ordering:l,desc:h}),e._getOrderedList(o,r,a)};if(this._min=this.showPercent&&this._min<-1?-1:this._min,this._max=this.showPercent&&this._max>1?1:this._max,this._min=null!==this.overrideMin?this.overrideMin:this._min,this._max=null!==this.overrideMax?this.overrideMax:this._max,"x"!==this.position||null!==this._scale&&!i){if("y"!==this.position||null!==this._scale&&!i)this.position.length>0&&"z"===this.position[0]&&null===this._scale?this._scale=this.useLog?t.scale.log().range([this.chart._heightPixels()/300,this.chart._heightPixels()/10]).domain([0===this._min?Math.pow(this.logBase,-1):this._min,0===this._max?-1*Math.pow(this.logBase,-1):this._max]).clamp(this.clamp).base(this.logBase):t.scale.linear().range([1,this.chart._heightPixels()/10]).domain([this._min,this._max]).clamp(this.clamp):this.position.length>0&&"p"===this.position[0]&&null===this._scale?this._scale=this.useLog?t.scale.log().range([0,360]).domain([0===this._min?Math.pow(this.logBase,-1):this._min,0===this._max?-1*Math.pow(this.logBase,-1):this._max]).clamp(this.clamp).base(this.logBase):t.scale.linear().range([0,360]).domain([this._min,this._max]).clamp(this.clamp):this.position.length>0&&"c"===this.position[0]&&null===this._scale&&(this._scale=t.scale.linear().range([0,null===this.colors||1===this.colors.length?1:this.colors.length-1]).domain([this._min,this._max]).clamp(this.clamp));else if(this._hasTimeField()?this._scale=t.time.scale().range([this.chart._yPixels()+this.chart._heightPixels(),this.chart._yPixels()]).domain([this._min,this._max]).clamp(this.clamp):this.useLog?this._scale=t.scale.log().range([this.chart._yPixels()+this.chart._heightPixels(),this.chart._yPixels()]).domain([0===this._min?Math.pow(this.logBase,-1):this._min,0===this._max?-1*Math.pow(this.logBase,-1):this._max]).clamp(this.clamp).base(this.logBase).nice():null===this.measure||void 0===this.measure?(o=h(this,"y","x"),null!==this._slaves&&void 0!==this._slaves&&this._slaves.forEach(function(t){o=o.concat(h(t,"y","x"))},this),this._scale=t.scale.ordinal().rangePoints([this.chart._yPixels()+this.chart._heightPixels(),this.chart._yPixels()]).domain(o.concat([""]))):this._scale=t.scale.linear().range([this.chart._yPixels()+this.chart._heightPixels(),this.chart._yPixels()]).domain([this._min,this._max]).clamp(this.clamp).nice(),!this.hidden)switch(this.chart._axisIndex(this,"y")){case 0:this._draw=t.svg.axis().orient("left").scale(this._scale),this.ticks&&this._draw.ticks(l);break;case 1:this._draw=t.svg.axis().orient("right").scale(this._scale),this.ticks&&this._draw.ticks(l)}}else if(this._hasTimeField()?this._scale=t.time.scale().range([this.chart._xPixels(),this.chart._xPixels()+this.chart._widthPixels()]).domain([this._min,this._max]).clamp(this.clamp):this.useLog?this._scale=t.scale.log().range([this.chart._xPixels(),this.chart._xPixels()+this.chart._widthPixels()]).domain([0===this._min?Math.pow(this.logBase,-1):this._min,0===this._max?-1*Math.pow(this.logBase,-1):this._max]).clamp(this.clamp).base(this.logBase).nice():null===this.measure||void 0===this.measure?(o=h(this,"x","y"),null!==this._slaves&&void 0!==this._slaves&&this._slaves.forEach(function(t){o=o.concat(h(t,"x","y"))},this),this._scale=t.scale.ordinal().rangePoints([this.chart._xPixels(),this.chart._xPixels()+this.chart._widthPixels()]).domain(o.concat([""]))):this._scale=t.scale.linear().range([this.chart._xPixels(),this.chart._xPixels()+this.chart._widthPixels()]).domain([this._min,this._max]).clamp(this.clamp).nice(),!this.hidden)switch(this.chart._axisIndex(this,"x")){case 0:this._draw=t.svg.axis().orient("bottom").scale(this._scale),this.ticks&&this._draw.ticks(l);break;case 1:this._draw=t.svg.axis().orient("top").scale(this._scale),this.ticks&&this._draw.ticks(l)}return null!==this._slaves&&void 0!==this._slaves&&this._slaves.length>0&&this._slaves.forEach(function(t){t._scale=this._scale},this),null!==i&&void 0!==i&&i!==!1||this._hasTimeField()||null===this._scale||null===this._scale.ticks||void 0===this._scale.ticks||!(this._scale.ticks(l).length>0)||"x"!==this.position&&"y"!==this.position||(s=this._scale.ticks(l),n=s[1]-s[0],a=((this._max-this._min)%n).toFixed(0),this._tick_step=n,0!==a&&(this._max=Math.ceil(this._max/n)*n,this._min=Math.floor(this._min/n)*n,this._update(!0))),r=this._scale.copy()(null!==o&&void 0!==o&&o.length>0?o[0]:this._min>0?this._min:this._max<0?this._max:0),this._origin!==r&&(this._previousOrigin=null===this._origin?r:this._origin,this._origin=r),this},this.addGroupOrderRule=function(t,e){this._groupOrderRules.push({ordering:t,desc:e})},this.addOrderRule=function(t,e){this._orderRules.push({ordering:t,desc:e})}},e.chart=function(i,s){this.svg=i,this.x="10%",this.y="10%",this.width="80%",this.height="80%",this.data=s,this.noFormats=!1,this.axes=[],this.series=[],this.legends=[],this.storyboard=null,this.titleShape=null,this.shapes=null,this.ease="cubic-in-out",this.staggerDraw=!1,this._group=i.append("g"),this._tooltipGroup=null,this._assignedColors={},this._assignedClasses={},this._nextColor=0,this._nextClass=0,this._axisIndex=function(t,e){var i=0,s=0,n=-1;for(i=0;i<this.axes.length;i+=1){if(this.axes[i]===t){n=s;break}(null===e||void 0===e||e[0]===this.axes[i].position[0])&&(s+=1)}return n},this._getAllData=function(){var t=[];return null!==this.data&&void 0!==this.data&&this.data.length>0&&(t=t.concat(this.data)),null!==this.series&&void 0!==this.series&&this.series.length>0&&this.series.forEach(function(e){null!==e.data&&void 0!==e.data&&e.data.length>0&&(t=t.concat(e.data))}),t},this._getData=function(i,s,n,a,r,o,l,h,c,u){var d,p,f=[],g=function(t,e){var i=[];return null!==t&&(t._hasTimeField()?i.push(t._parseDate(e[t.timeField])):t._hasCategories()&&t.categoryFields.forEach(function(t){i.push(e[t])},this)),i},m={x:!1,y:!1,z:!1,p:!1,c:!1},y={x:[],y:[]},_={x:[],y:[],z:[],p:[]},x={min:null,max:null},v={x:[],y:[],z:[],p:[]},b=[],C={},F={x:0,y:0,z:0,p:0},w="",P=[],k=[],S=[],L="",M=[],z="",T=[],B="",O=[],A=[],D=i,H=[];this.storyboard&&this.storyboard.categoryFields.length>0&&(w=this.storyboard.categoryFields[0],P=e._getOrderedList(D,w,this.storyboard._orderRules)),o&&o._hasCategories()&&o._hasMeasure()&&(L=o.categoryFields[0],M=e._getOrderedList(D,L,o._orderRules.concat([{ordering:o.measure,desc:!0}]))),l&&l._hasCategories()&&l._hasMeasure()&&(z=l.categoryFields[0],T=e._getOrderedList(D,z,l._orderRules.concat([{ordering:l.measure,desc:!0}]))),c&&c._hasCategories()&&c._hasMeasure()&&(B=c.categoryFields[0],O=e._getOrderedList(D,B,c._orderRules.concat([{ordering:c.measure,desc:!0}]))),D.length>0&&s&&s.length>0&&(A=[].concat(a),k=[],s.forEach(function(t){void 0!==D[0][t]&&k.push(t)},this),c&&c._hasMeasure()?A.push({ordering:c.measure,desc:!0}):u&&u._hasMeasure()?A.push({ordering:u.measure,desc:!0}):h&&h._hasMeasure()?A.push({ordering:h.measure,desc:!0}):o&&o._hasMeasure()?A.push({ordering:o.measure,desc:!0}):l&&l._hasMeasure()&&A.push({ordering:l.measure,desc:!0}),S=e._getOrderedList(D,k,A)),D.sort(function(t,e){var i,s,n,a,r,o,l=0;if(""!==w&&(l=P.indexOf(t[w])-P.indexOf(e[w])),""!==L&&0===l&&(l=M.indexOf(t[L])-M.indexOf(e[L])),""!==z&&0===l&&(l=T.indexOf(t[z])-T.indexOf(e[z])),""!==B&&0===l&&(l=O.indexOf(t[B])-T.indexOf(e[B])),k&&k.length>0&&0===l)for(i=[].concat(k),l=0,n=0;n<S.length;n+=1){for(s=[].concat(S[n]),r=!0,o=!0,a=0;a<i.length;a+=1)r=r&&t[i[a]]===s[a],o=o&&e[i[a]]===s[a];if(r&&o){l=0;break}if(r){l=-1;break}if(o){l=1;break}}return l}),D.forEach(function(t){var e,i,a,r,d,p=-1,y=g(o,t),_=g(l,t),x=g(h,t),v=g(c,t),b=[];if(s&&0!==s.length)for(a=0;a<s.length;a+=1)b.push(void 0===t[s[a]]?s[a]:t[s[a]]);else b=["All"];for(e=b.join("/")+"_"+y.join("/")+"_"+_.join("/")+"_"+v.join("/")+"_"+x.join("/"),i=0;i<f.length;i+=1)if(f[i].key===e){p=i;break}-1===p&&(r={key:e,aggField:b,xField:y,xValue:null,xCount:0,yField:_,yValue:null,yCount:0,pField:v,pValue:null,pCount:0,zField:x,zValue:null,zCount:0,cValue:0,cCount:0,x:0,y:0,xOffset:0,yOffset:0,width:0,height:0,cx:0,cy:0,xBound:0,yBound:0,xValueList:[],yValueList:[],zValueList:[],pValueList:[],cValueList:[],fill:{},stroke:{}},f.push(r),p=f.length-1),d=function(e,i){var s,a,r=!0,o={value:0,count:1},l={value:0,count:1},h="";null!==i&&(s=i.getFrameValue(),i.categoryFields.forEach(function(e,i){i>0&&(h+="/"),h+=t[e],r=h===s},this)),null!==e&&void 0!==e&&r&&(a=f[p],e._hasMeasure()&&null!==t[e.measure]&&void 0!==t[e.measure]&&(-1===a[e.position+"ValueList"].indexOf(t[e.measure])&&a[e.position+"ValueList"].push(t[e.measure]),isNaN(parseFloat(t[e.measure]))&&(m[e.position]=!0),o.value=a[e.position+"Value"],o.count=a[e.position+"Count"],l.value=t[e.measure],a[e.position+"Value"]=n(o,l),a[e.position+"Count"]+=1))},d(o,this.storyboard),d(l,this.storyboard),d(h,this.storyboard),d(c,this.storyboard),d(u,this.storyboard)},this),o&&o._hasCategories()&&o.categoryFields.length>1&&void 0!==y.x&&(H=[],l._hasMeasure()&&H.push({ordering:l.measure,desc:!0}),y.x=e._getOrderedList(D,o.categoryFields[1],o._groupOrderRules.concat(H))),l&&l._hasCategories()&&l.categoryFields.length>1&&void 0!==y.y&&(H=[],o._hasMeasure()&&H.push({ordering:o.measure,desc:!0}),y.y=e._getOrderedList(D,l.categoryFields[1],l._groupOrderRules.concat(H)),y.y.reverse()),f.forEach(function(t){null!==o&&(m.x===!0&&(t.xValue=t.xValueList.length),d=(_.x[t.xField.join("/")]||0)+(l._hasMeasure()?Math.abs(t.yValue):0),_.x[t.xField.join("/")]=d),null!==l&&(m.y===!0&&(t.yValue=t.yValueList.length),d=(_.y[t.yField.join("/")]||0)+(o._hasMeasure()?Math.abs(t.xValue):0),_.y[t.yField.join("/")]=d),null!==c&&(m.p===!0&&(t.pValue=t.pValueList.length),d=(_.p[t.pField.join("/")]||0)+(c._hasMeasure()?Math.abs(t.pValue):0),_.p[t.pField.join("/")]=d),null!==h&&(m.z===!0&&(t.zValue=t.zValueList.length),d=(_.z[t.zField.join("/")]||0)+(h._hasMeasure()?Math.abs(t.zValue):0),_.z[t.zField.join("/")]=d),null!==u&&((null===x.min||t.cValue<x.min)&&(x.min=t.cValue),(null===x.max||t.cValue>x.max)&&(x.max=t.cValue))},this);for(p in _.x)_.x.hasOwnProperty(p)&&(F.x+=_.x[p]);for(p in _.y)_.y.hasOwnProperty(p)&&(F.y+=_.y[p]);for(p in _.p)_.p.hasOwnProperty(p)&&(F.p+=_.p[p]);for(p in _.z)_.z.hasOwnProperty(p)&&(F.z+=_.z[p]);return f.forEach(function(e){var i,s,n,a,d,p=function(t,i,s){var n,a,o,l,h;null!==t&&void 0!==t&&(l=t.position,t._hasCategories()?t._hasMeasure()?(n=e[t.position+"Field"].join("/"),a=t.showPercent?_[t.position][n]/F[t.position]:_[t.position][n],-1===b.indexOf(n)&&(C[n]=a+(b.length>0?C[b[b.length-1]]:0),b.push(n)),o=e[l+"Bound"]=e["c"+l]="x"!==l&&"y"!==l||!r?a:C[n],e[s]=a,e[l]=o-("x"===l&&a>=0||"y"===l&&0>=a?a:0)):(e[l]=e["c"+l]=e[l+"Field"][0],e[s]=1,void 0!==y[l]&&null!==y[l]&&y[l].length>=2&&(e[l+"Offset"]=y[l].indexOf(e[l+"Field"][1]),e[s]=1/y[l].length)):(a=t.showPercent?e[l+"Value"]/_[i][e[i+"Field"].join("/")]:e[l+"Value"],n=e[i+"Field"].join("/")+(e[l+"Value"]>=0),h=v[l][n]=(null===v[l][n]||void 0===v[l][n]||"z"===l||"p"===l?0:v[l][n])+a,o=e[l+"Bound"]=e["c"+l]="x"!==l&&"y"!==l||!r?a:h,e[s]=a,e[l]=o-("x"===l&&a>=0||"y"===l&&0>=a?a:0)))};p(o,"y","width"),p(l,"x","height"),p(h,"z","r"),p(c,"p","angle"),null!==u&&null!==x.min&&null!==x.max&&(x.min===x.max&&(x.min-=.5,x.max+=.5),x.min=u.overrideMin||x.min,x.max=u.overrideMax||x.max,e.cValue=e.cValue>x.max?x.max:e.cValue<x.min?x.min:e.cValue,n=t.scale.linear().range([0,null===u.colors||1===u.colors.length?1:u.colors.length-1]).domain([x.min,x.max]),a=n(e.cValue),d=a-Math.floor(a),e.cValue===x.max&&(d=1),u.colors&&1===u.colors.length?(i=t.rgb(u.colors[0]),s=t.rgb(this.getColor(e.aggField.slice(-1)[0]).fill)):u.colors&&u.colors.length>1?(i=t.rgb(u.colors[Math.floor(a)]),s=t.rgb(u.colors[Math.ceil(a)])):(i=t.rgb("white"),s=t.rgb(this.getColor(e.aggField.slice(-1)[0]).fill)),i.r=Math.floor(i.r+(s.r-i.r)*d),i.g=Math.floor(i.g+(s.g-i.g)*d),i.b=Math.floor(i.b+(s.b-i.b)*d),e.fill=i.toString(),e.stroke=i.darker(.5).toString())},this),f},this._getDelay=function(t,i,s){return function(n){var a=0;return s&&i.staggerDraw&&(s.x._hasCategories()?a=e._helpers.cx(n,i,s)/i._widthPixels()*t:s.y._hasCategories()&&(a=(1-e._helpers.cy(n,i,s)/i._heightPixels())*t)),a}},this._getSeriesData=function(){null!==this.series&&void 0!==this.series&&this.series.forEach(function(t){var e,i,s,n,a,r,o=t.data||this.data||[],l=[].concat(t.categoryFields||"All"),h=this._getData(o,l,t.aggregate,t._orderRules,t._isStacked(),t.x,t.y,t.z,t.p,t.c),c=[],u={},d=t.startAngle*(Math.PI/180)||0,p=(t.endAngle||360)*(Math.PI/180);if(d>p&&(d-=2*Math.PI),t.p&&l.length>0){if(t.x&&t.y){for(l.pop(),c=this._getData(o,["__dimple_placeholder__"].concat(l),t.aggregate,t._orderRules,t._isStacked(),t.x,t.y,t.z,t.p,t.c),e=0;e<h.length;e+=1)for(s=["__dimple_placeholder__"].concat(h[e].aggField),s.pop(),t.x&&t.x._hasCategories()&&(s=s.concat(h[e].xField)),t.y&&t.y._hasCategories()&&(s=s.concat(h[e].yField)),n=s.join("|"),i=0;i<c.length;i+=1)if(a=[].concat(c[i].aggField),t.x&&t.x._hasCategories()&&(a=a.concat(c[i].xField)),t.y&&t.y._hasCategories()&&(a=a.concat(c[i].yField)),r=a.join("|"),n===r){h[e].xField=c[i].xField,h[e].xValue=c[i].xValue,h[e].xCount=c[i].xCount,h[e].yField=c[i].yField,h[e].yValue=c[i].yValue,h[e].yCount=c[i].yCount,h[e].zField=c[i].zField,h[e].zValue=c[i].zValue,h[e].zCount=c[i].zCount,h[e].x=c[i].x,h[e].y=c[i].y,h[e].r=c[i].r,h[e].xOffset=c[i].xOffset,h[e].yOffset=c[i].yOffset,h[e].width=c[i].width,h[e].height=c[i].height,h[e].cx=c[i].cx,h[e].cy=c[i].cy,h[e].xBound=c[i].xBound,h[e].yBound=c[i].yBound,h[e].xValueList=c[i].xValueList,h[e].yValueList=c[i].yValueList,h[e].zValueList=c[i].zValueList,h[e].cValueList=c[i].cValueList,h[e].pieKey=c[i].key,h[e].value=h.pValue,u[c[i].key]||(u[c[i].key]={total:0,angle:d}),u[c[i].key].total+=h[e].pValue;break}}else for(e=0;e<h.length;e+=1)h[e].pieKey="All",h[e].value=h.pValue,u[h[e].pieKey]||(u[h[e].pieKey]={total:0,angle:d}),u[h[e].pieKey].total+=h[e].pValue;for(e=0;e<h.length;e+=1)h[e].piePct=h[e].pValue/u[h[e].pieKey].total,h[e].startAngle=u[h[e].pieKey].angle,h[e].endAngle=h[e].startAngle+h[e].piePct*(p-d),u[h[e].pieKey].angle=h[e].endAngle}t._positionData=h},this)},this._handleTransition=function(t,e,i,s){var n=null;return n=0===e?t:t.transition().duration(e).delay(i._getDelay(e,i,s)).ease(i.ease)},this._heightPixels=function(){return e._parseYPosition(this.height,this.svg.node())},this._registerEventHandlers=function(i){null!==i._eventHandlers&&i._eventHandlers.length>0&&i._eventHandlers.forEach(function(s){var n,a=function(n){var a=new e.eventArgs;null!==i.chart.storyboard&&(a.frameValue=i.chart.storyboard.getFrameValue()),a.seriesValue=n.aggField,a.xValue=n.x,a.yValue=n.y,a.zValue=n.z,a.pValue=n.p,a.colorValue=n.cValue,a.seriesShapes=i.shapes,a.selectedShape=t.select(this),s.handler(a)};if(null!==s.handler&&"function"==typeof s.handler)if(null!==i._markers&&void 0!==i._markers)for(n in i._markers)i._markers.hasOwnProperty(n)&&i._markers[n].on(s.event,a);else i.shapes.on(s.event,a)},this)},this._widthPixels=function(){return e._parseXPosition(this.width,this.svg.node())},this._xPixels=function(){return e._parseXPosition(this.x,this.svg.node())},this._yPixels=function(){return e._parseYPosition(this.y,this.svg.node())},this.addAxis=function(t,i,s,n){var a=null,r=null;if(null!==i&&void 0!==i&&(i=[].concat(i)),"string"==typeof t||t instanceof String)a=new e.axis(this,t,i,s,n),this.axes.push(a);else{if(r=t,a=new e.axis(this,r.position,i,s,n),a._hasMeasure()!==r._hasMeasure())throw"You have specified a composite axis where some but not all axes have a measure - this is not supported, all axes must be of the same type.";if(a._hasTimeField()!==r._hasTimeField())throw"You have specified a composite axis where some but not all axes have a time field - this is not supported, all axes must be of the same type.";if((null===a.categoryFields||void 0===a.categoryFields?0:a.categoryFields.length)!==(null===r.categoryFields||void 0===r.categoryFields?0:r.categoryFields.length))throw"You have specified a composite axis where axes have differing numbers of category fields - this is not supported, all axes must be of the same type.";r._slaves.push(a)}return a},this.addCategoryAxis=function(t,e){return this.addAxis(t,e,null)},this.addColorAxis=function(t,e){var i=this.addAxis("c",null,t);return i.colors=null===e||void 0===e?null:[].concat(e),i},this.addLegend=function(t,i,s,n,a,r){r=null===r||void 0===r?this.series:[].concat(r),a=null===a||void 0===a?"left":a;var o=new e.legend(this,t,i,s,n,a,r);return this.legends.push(o),o},this.addLogAxis=function(t,e,i){var s=this.addAxis(t,null,e,null);return null!==i&&void 0!==i&&(s.logBase=i),s.useLog=!0,s},this.addMeasureAxis=function(t,e){return this.addAxis(t,null,e)},this.addPctAxis=function(t,e,i){var s=null;return s=null!==i&&void 0!==i?this.addAxis(t,i,e):this.addMeasureAxis(t,e),s.showPercent=!0,s},this.addSeries=function(t,i,s){(null===s||void 0===s)&&(s=this.axes),(null===i||void 0===i)&&(i=e.plot.bubble);var n,a=null,r=null,o=null,l=null,h=null;return s.forEach(function(t){null!==t&&i.supportedAxes.indexOf(t.position)>-1&&(null===a&&"x"===t.position[0]?a=t:null===r&&"y"===t.position[0]?r=t:null===o&&"z"===t.position[0]?o=t:null===l&&"c"===t.position[0]?l=t:null===l&&"p"===t.position[0]&&(h=t))},this),t&&(t=[].concat(t)),n=new e.series(this,t,a,r,o,l,h,i,e.aggregateMethod.sum,i.stacked),this.series.push(n),n},this.addTimeAxis=function(t,e,i,s){var n=this.addAxis(t,null,null,e);return n.tickFormat=s,n.dateParseFormat=i,n},this.assignClass=function(t,e){return this._assignedClasses[t]=e,this._assignedClasses[t]},this.assignColor=function(t,i,s,n){return this._assignedColors[t]=new e.color(i,s,n),this._assignedColors[t]},this.customClassList={axisLine:"dimple-custom-axis-line",axisLabel:"dimple-custom-axis-label",axisTitle:"dimple-custom-axis-title",tooltipBox:"dimple-custom-tooltip-box",tooltipLabel:"dimple-custom-tooltip-label",tooltipDropLine:"dimple-custom-tooltip-dropline",lineMarker:"dimple-custom-line-marker",legendLabel:"dimple-custom-legend-label",legendKey:"dimple-custom-legend-key",areaSeries:"dimple-custom-series-area",barSeries:"dimple-custom-series-bar",bubbleSeries:"dimple-custom-series-bubble",lineSeries:"dimple-custom-series-line",pieSeries:"dimple-custom-series-pie",gridline:"dimple-custom-gridline",colorClasses:["dimple-custom-format-1","dimple-custom-format-2","dimple-custom-format-3","dimple-custom-format-4","dimple-custom-format-5","dimple-custom-format-6","dimple-custom-format-7","dimple-custom-format-8","dimple-custom-format-9","dimple-custom-format-10"]},this.defaultColors=[new e.color("#80B1D3"),new e.color("#FB8072"),new e.color("#FDB462"),new e.color("#B3DE69"),new e.color("#FFED6F"),new e.color("#BC80BD"),new e.color("#8DD3C7"),new e.color("#CCEBC5"),new e.color("#FFFFB3"),new e.color("#BEBADA"),new e.color("#FCCDE5"),new e.color("#D9D9D9")],this.draw=function(e,i){e=e||0;var s,n,a=null,r=null,o=!1,l=!1,h=this._xPixels(),c=this._yPixels(),u=this._widthPixels(),d=this._heightPixels();return(void 0===i||null===i||i===!1)&&this._getSeriesData(),this.axes.forEach(function(t){t._scale=null},this),this.axes.forEach(function(t){if(t._min=0,t._max=0,n=[],t._hasMeasure()){var e=!1;this.series.forEach(function(i){if(i._deepMatch(t)){var s=i._axisBounds(t.position);t._min>s.min&&(t._min=s.min),t._max<s.max&&(t._max=s.max),e=!0}},this),e||this._getAllData().forEach(function(e){t._min>e[t.measure]&&(t._min=e[t.measure]),t._max<e[t.measure]&&(t._max=e[t.measure])},this)}else t._hasTimeField()?(t._min=null,t._max=null,this.series.forEach(function(e){e._deepMatch(t)&&null!==e[t.position].timeField&&void 0!==e[t.position].timeField&&-1===n.indexOf(e[t.position].timeField)&&n.push(e[t.position].timeField)},this),t._getAxisData().forEach(function(e){n.forEach(function(i){var s=t._parseDate(e[i]);(null===t._min||s<t._min)&&(t._min=s),(null===t._max||s>t._max)&&(t._max=s)},this)},this)):t._hasCategories()&&(t._min=0,s=[],this.series.forEach(function(e){e._deepMatch(t)&&null!==e[t.position].categoryFields[0]&&void 0!==e[t.position].categoryFields[0]&&-1===n.indexOf(e[t.position].categoryFields[0])&&n.push(e[t.position].categoryFields[0])},this),t._getAxisData().forEach(function(t){n.forEach(function(e){-1===s.indexOf(t[e])&&s.push(t[e])},this)},this),t._max=s.length);null!==t._slaves&&void 0!==t._slaves&&t._slaves.length>0&&t._slaves.forEach(function(e){e._min=t._min,e._max=t._max},this),t._update(),null===a&&"x"===t.position?a=t:null===r&&"y"===t.position&&(r=t)},this),this.axes.forEach(function(i){var s=!1,n=null,p=0,f=null,g=!1,m=0,y={l:null,t:null,r:null,b:null},_=0,x=0,v="",b=this,C=function(t){var i;return i=null===n||0===e||s?t:b._handleTransition(t,e,b)},F=function(){var e=t.select(this).selectAll("text");return!i.measure&&i._max>0&&("x"===i.position?e.attr("x",u/i._max/2):"y"===i.position&&e.attr("y",-1*(d/i._max)/2)),i.categoryFields&&i.categoryFields.length>0&&(i!==a||null!==r.categoryFields&&0!==r.categoryFields.length||e.attr("y",c+d-r._scale(0)+9),i!==r||null!==a.categoryFields&&0!==a.categoryFields.length||e.attr("x",-1*(a._scale(0)-h)-9)),this},w=function(e){return function(){var i=t.select(this).attr("class")||"";return-1===i.indexOf(e)&&(i+=" "+e),i.trim()}};null===i.gridlineShapes?(i.showGridlines||null===i.showGridlines&&!i._hasCategories()&&(!o&&"x"===i.position||!l&&"y"===i.position))&&(i.gridlineShapes=this._group.append("g").attr("class","dimple-gridline"),
"x"===i.position?o=!0:l=!0):"x"===i.position?o=!0:l=!0,null===i.shapes&&(i.shapes=this._group.append("g").attr("class","dimple-axis dimple-axis-"+i.position).each(function(){b.noFormats||t.select(this).style("font-family",i.fontFamily).style("font-size",i._getFontSize())}),s=!0),i===a&&null!==r?(n="translate(0, "+(null===r.categoryFields||0===r.categoryFields.length?r._scale(0):c+d)+")",f="translate(0, "+(i===a?c+d:c)+")",p=-d):i===r&&null!==a?(n="translate("+(null===a.categoryFields||0===a.categoryFields.length?a._scale(0):h)+", 0)",f="translate("+(i===r?h:h+u)+", 0)",p=-u):"x"===i.position?(f=n="translate(0, "+(i===a?c+d:c)+")",p=-d):"y"===i.position&&(f=n="translate("+(i===r?h:h+u)+", 0)",p=-u),null!==n&&null!==i._draw&&(i._hasTimeField()?C(i.shapes).call(i._draw.ticks(i._getTimePeriod(),i.timeInterval).tickFormat(i._getFormat())).attr("transform",n).each(F):i.useLog?C(i.shapes).call(i._draw.ticks(4,i._getFormat())).attr("transform",n).each(F):C(i.shapes).call(i._draw.tickFormat(i._getFormat())).attr("transform",n).each(F),null!==i.gridlineShapes&&C(i.gridlineShapes).call(i._draw.tickSize(p,0,0).tickFormat("")).attr("transform",f)),C(i.shapes.selectAll("text")).attr("class",w(b.customClassList.axisLabel)).call(function(){b.noFormats||this.style("font-family",i.fontFamily).style("font-size",i._getFontSize())}),C(i.shapes.selectAll("path, line")).attr("class",w(b.customClassList.axisLine)).call(function(){b.noFormats||this.style("fill","none").style("stroke","black").style("shape-rendering","crispEdges")}),null!==i.gridlineShapes&&C(i.gridlineShapes.selectAll("line")).attr("class",w(b.customClassList.gridline)).call(function(){b.noFormats||this.style("fill","none").style("stroke","lightgray").style("opacity",.8)}),(null===i.measure||void 0===i.measure)&&(i.autoRotateLabel?i===a?(m=0,i.shapes.selectAll("text").each(function(){var t=this.getComputedTextLength();m=t>m?t:m}),m>u/i.shapes.selectAll("text")[0].length?(g=!0,i.shapes.selectAll("text").style("text-anchor","start").each(function(){var e=this.getBBox();t.select(this).attr("transform","rotate(90,"+e.x+","+(e.y+e.height/2)+") translate(-5, 0)")})):(g=!1,i.shapes.selectAll("text").style("text-anchor","middle").attr("transform",""))):"x"===i.position&&(m=0,i.shapes.selectAll("text").each(function(){var t=this.getComputedTextLength();m=t>m?t:m}),m>u/i.shapes.selectAll("text")[0].length?(g=!0,i.shapes.selectAll("text").style("text-anchor","end").each(function(){var e=this.getBBox();t.select(this).attr("transform","rotate(90,"+(e.x+e.width)+","+(e.y+e.height/2)+") translate(5, 0)")})):(g=!1,i.shapes.selectAll("text").style("text-anchor","middle").attr("transform",""))):(g=!1,i.shapes.selectAll("text").style("text-anchor","middle").attr("transform",""))),null!==i.titleShape&&void 0!==i.titleShape&&i.titleShape.remove(),i.shapes.selectAll("text").each(function(){var t=this.getBBox();(null===y.l||-9-t.width<y.l)&&(y.l=-9-t.width),(null===y.r||t.x+t.width>y.r)&&(y.r=t.x+t.width),g?((null===y.t||t.y+t.height-t.width<y.t)&&(y.t=t.y+t.height-t.width),(null===y.b||t.height+t.width>y.b)&&(y.b=t.height+t.width)):((null===y.t||t.y<y.t)&&(y.t=t.y),(null===y.b||9+t.height>y.b)&&(y.b=9+t.height))}),"x"===i.position?(x=i===a?c+d+y.b+5:c+y.t-10,_=h+u/2):"y"===i.position&&(_=i===r?h+y.l-10:h+u+y.r+20,x=c+d/2,v="rotate(270, "+_+", "+x+")"),i.hidden||"x"!==i.position&&"y"!==i.position||null===i.title||(i.titleShape=this._group.append("text").attr("class","dimple-axis dimple-title "+b.customClassList.axisTitle+" dimple-axis-"+i.position),i.titleShape.attr("x",_).attr("y",x).attr("text-anchor","middle").attr("transform",v).text(void 0!==i.title?i.title:null===i.categoryFields||void 0===i.categoryFields||0===i.categoryFields.length?i.measure:i.categoryFields.join("/")).each(function(){b.noFormats||t.select(this).style("font-family",i.fontFamily).style("font-size",i._getFontSize())}),i===a?i.titleShape.each(function(){t.select(this).attr("y",x+this.getBBox().height/1.65)}):i===r&&i.titleShape.each(function(){t.select(this).attr("x",_+this.getBBox().height/1.65)}))},this),this.series.forEach(function(t){t.plot.draw(this,t,e),this._registerEventHandlers(t)},this),this.legends.forEach(function(t){t._draw()},this),this.storyboard&&(this.storyboard._drawText(),this.storyboard.autoplay&&this.storyboard.startAnimation()),this},this.getClass=function(t){return this._assignedClasses[t]||(this._assignedClasses[t]=this.customClassList.colorClasses[this._nextClass],this._nextClass=(this._nextClass+1)%this.customClassList.colorClasses.length),this._assignedClasses[t]},this.getColor=function(t){return(null===this._assignedColors[t]||void 0===this._assignedColors[t])&&(this._assignedColors[t]=this.defaultColors[this._nextColor],this._nextColor=(this._nextColor+1)%this.defaultColors.length),this._assignedColors[t]},this.setBounds=function(t,i,s,n){return this.x=t,this.y=i,this.width=s,this.height=n,this._xPixels=function(){return e._parseXPosition(this.x,this.svg.node())},this.draw(0,!0),this._yPixels=function(){return e._parseYPosition(this.y,this.svg.node())},this._widthPixels=function(){return e._parseXPosition(this.width,this.svg.node())},this._heightPixels=function(){return e._parseYPosition(this.height,this.svg.node())},this},this.setMargins=function(t,i,s,n){return this.x=t,this.y=i,this.width=0,this.height=0,this._xPixels=function(){return e._parseXPosition(this.x,this.svg.node())},this._yPixels=function(){return e._parseYPosition(this.y,this.svg.node())},this._widthPixels=function(){return e._parentWidth(this.svg.node())-this._xPixels()-e._parseXPosition(s,this.svg.node())},this._heightPixels=function(){return e._parentHeight(this.svg.node())-this._yPixels()-e._parseYPosition(n,this.svg.node())},this.draw(0,!0),this},this.setStoryboard=function(t,i){return this.storyboard=new e.storyboard(this,t),null!==i&&void 0!==i&&(this.storyboard.onTick=i),this.storyboard}},e.color=function(e,i,s){this.fill=e,this.stroke=null===i||void 0===i?t.rgb(e).darker(.5).toString():i,this.opacity=null===s||void 0===s?.8:s},e.eventArgs=function(){this.seriesValue=null,this.xValue=null,this.yValue=null,this.zValue=null,this.pValue=null,this.colorValue=null,this.frameValue=null,this.seriesShapes=null,this.selectedShape=null},e.legend=function(i,s,n,a,r,o,l){this.chart=i,this.series=l,this.x=s,this.y=n,this.width=a,this.height=r,this.horizontalAlign=o,this.shapes=null,this.fontSize="10px",this.fontFamily="sans-serif",this._draw=function(){var i,s=this._getEntries(),n=0,a=0,r=0,o=0,l=15,h=9,c=5,u=this;this.shapes&&this.shapes.remove(),i=this.chart._group.selectAll(".dimple-dont-select-any").data(s).enter().append("g").attr("class",function(t){return"dimple-legend "+e._createClass(t.aggField)}).attr("opacity",1),i.append("text").attr("class",function(t){return"dimple-legend dimple-legend-text "+e._createClass(t.aggField)+" "+u.chart.customClassList.legendLabel}).text(function(t){return t.key}).call(function(){u.chart.noFormats||this.style("font-family",u.fontFamily).style("font-size",u._getFontSize()).style("shape-rendering","crispEdges")}).each(function(){var t=this.getBBox();t.width>n&&(n=t.width),t.height>a&&(a=t.height)}),i.append("rect").attr("class",function(t){return"dimple-legend dimple-legend-key "+e._createClass(t.aggField)}).attr("height",h).attr("width",l),a=(h>a?h:a)+u._getVerticalPadding(),n+=l+u._getHorizontalPadding(),i.each(function(i){r+n>u._widthPixels()&&(r=0,o+=a),o>u._heightPixels()?t.select(this).remove():(t.select(this).select("text").attr("x","left"===u.horizontalAlign?u._xPixels()+l+c+r:u._xPixels()+(u._widthPixels()-r-n)+l+c).attr("y",function(){return u._yPixels()+o+this.getBBox().height/1.65}).attr("width",u._widthPixels()).attr("height",u._heightPixels()),t.select(this).select("rect").attr("class",function(t){return"dimple-legend dimple-legend-key "+e._createClass(t.aggField)+" "+u.chart.customClassList.legendKey+" "+t.css}).attr("x","left"===u.horizontalAlign?u._xPixels()+r:u._xPixels()+(u._widthPixels()-r-n)).attr("y",u._yPixels()+o).attr("height",h).attr("width",l).call(function(){u.chart.noFormats||this.style("fill",i.fill).style("stroke",i.stroke).style("opacity",i.opacity).style("shape-rendering","crispEdges")}),r+=n)}),this.shapes=i},this._getEntries=function(){var t=[];return this.series&&this.series.forEach(function(e){var i=e._positionData;i.forEach(function(i){var s,n=-1,a=e.plot.grouped&&!e.x._hasCategories()&&!e.y._hasCategories()&&i.aggField.length<2?"All":i.aggField.slice(-1)[0];for(s=0;s<t.length;s+=1)if(t[s].key===a){n=s;break}-1===n&&e.chart._assignedColors[a]&&(t.push({key:a,fill:e.chart._assignedColors[a].fill,stroke:e.chart._assignedColors[a].stroke,opacity:e.chart._assignedColors[a].opacity,css:e.chart._assignedClasses[a],series:e,aggField:i.aggField}),n=t.length-1)})},this),t},this._getFontSize=function(){var t;return t=this.fontSize&&"auto"!==this.fontSize.toString().toLowerCase()?isNaN(this.fontSize)?this.fontSize:this.fontSize+"px":(this.chart._heightPixels()/35>10?this.chart._heightPixels()/35:10)+"px"},this._getHorizontalPadding=function(){var t;return t=isNaN(this.horizontalPadding)?20:this.horizontalPadding},this._getVerticalPadding=function(){var t;return t=isNaN(this.verticalPadding)?2:this.verticalPadding},this._heightPixels=function(){return e._parseYPosition(this.height,this.chart.svg.node())},this._widthPixels=function(){return e._parseXPosition(this.width,this.chart.svg.node())},this._xPixels=function(){return e._parseXPosition(this.x,this.chart.svg.node())},this._yPixels=function(){return e._parseYPosition(this.y,this.chart.svg.node())}},e.series=function(t,e,i,s,n,a,r,o,l,h){this.chart=t,this.x=i,this.y=s,this.z=n,this.c=a,this.p=r,this.plot=o,this.categoryFields=e,this.aggregate=l,this.stacked=h,this.barGap=.2,this.clusterBarGap=.1,this.lineWeight=2,this.lineMarkers=!1,this.afterDraw=null,this.interpolation="linear",this.tooltipFontSize="10px",this.tooltipFontFamily="sans-serif",this.radius="auto",this._eventHandlers=[],this._positionData=[],this._orderRules=[],this._axisBounds=function(t){var e,i,s,n={min:0,max:0},a=null,r=null,o=[],l=0,h=this._positionData;return"x"===t?(a=this.x,r=this.y):"y"===t?(a=this.y,r=this.x):"z"===t?a=this.z:"p"===t?a=this.p:"c"===t&&(a=this.c),a.showPercent?h.forEach(function(t){t[a.position+"Bound"]<n.min&&(n.min=t[a.position+"Bound"]),t[a.position+"Bound"]>n.max&&(n.max=t[a.position+"Bound"])},this):null===r||null===r.categoryFields||0===r.categoryFields.length?h.forEach(function(t){!this._isStacked()||"x"!==a.position&&"y"!==a.position?(t[a.position+"Value"]<n.min&&(n.min=t[a.position+"Value"]),t[a.position+"Value"]>n.max&&(n.max=t[a.position+"Value"])):t[a.position+"Value"]<0?n.min=n.min+t[a.position+"Value"]:n.max=n.max+t[a.position+"Value"]},this):(e=a.position+"Value",i=r.position+"Field",s=[],h.forEach(function(t){var n=t[i].join("/"),a=s.indexOf(n);-1===a&&(s.push(n),a=s.length-1),void 0===o[a]&&(o[a]={min:0,max:0},a>=l&&(l=a+1)),this.stacked?t[e]<0?o[a].min=o[a].min+t[e]:o[a].max=o[a].max+t[e]:(t[e]<o[a].min&&(o[a].min=t[e]),t[e]>o[a].max&&(o[a].max=t[e]))},this),o.forEach(function(t){void 0!==t&&(t.min<n.min&&(n.min=t.min),t.max>n.max&&(n.max=t.max))},this)),n},this._deepMatch=function(t){var e=!1;return this[t.position]===t?e=!0:void 0!==t._slaves&&null!==t._slaves&&t._slaves.length>0&&t._slaves.forEach(function(t){e=e||this._deepMatch(t)},this),e},this._dropLineOrigin=function(){var t=0,e=0,i={x:null,y:null},s={x:null,y:null};return this.chart.axes.forEach(function(t){"x"===t.position&&null===s.x?s.x=t._hasTimeField()?this.chart._xPixels():t._origin:"y"===t.position&&null===s.y&&(s.y=t._hasTimeField()?this.chart._yPixels()+this.chart._heightPixels():t._origin)},this),this.chart.axes.forEach(function(n){"x"!==n.position||this.x.hidden?"y"!==n.position||this.y.hidden||(this._deepMatch(n)&&(0===e?i.x=s.x:1===e&&(i.x=this.chart._xPixels()+this.chart._widthPixels())),e+=1):(this._deepMatch(n)&&(0===t?i.y=s.y:1===t&&(i.y=this.chart._yPixels())),t+=1)},this),i},this._getTooltipFontSize=function(){var t;return t=this.tooltipFontSize&&"auto"!==this.tooltipFontSize.toString().toLowerCase()?isNaN(this.tooltipFontSize)?this.tooltipFontSize:this.tooltipFontSize+"px":(this.chart._heightPixels()/35>10?this.chart._heightPixels()/35:10)+"px"},this._isStacked=function(){return this.stacked&&(this.x._hasCategories()||this.y._hasCategories())},this.addEventHandler=function(t,e){this._eventHandlers.push({event:t,handler:e})},this.addOrderRule=function(t,e){this._orderRules.push({ordering:t,desc:e})},this.getTooltipText=function(t){var e=[];return null!==this.categoryFields&&void 0!==this.categoryFields&&this.categoryFields.length>0&&this.categoryFields.forEach(function(i,s){null!==i&&void 0!==i&&null!==t.aggField[s]&&void 0!==t.aggField[s]&&e.push(i+(t.aggField[s]!==i?": "+t.aggField[s]:""))},this),this.p?(this.x&&this.x._hasCategories()&&this.x._getTooltipText(e,t),this.y&&this.y._hasCategories()&&this.y._getTooltipText(e,t),this.z&&this.z._hasCategories()&&this.z._getTooltipText(e,t),this.p._getTooltipText(e,t)):(this.x&&this.x._getTooltipText(e,t),this.y&&this.y._getTooltipText(e,t),this.z&&this.z._getTooltipText(e,t)),this.c&&this.c._getTooltipText(e,t),e.filter(function(t,i){return e.indexOf(t)===i})}},e.storyboard=function(t,e){null!==e&&void 0!==e&&(e=[].concat(e)),this.chart=t,this.categoryFields=e,this.autoplay=!0,this.frameDuration=3e3,this.storyLabel=null,this.onTick=null,this.fontSize="10px",this.fontFamily="sans-serif",this._frame=0,this._animationTimer=null,this._categories=[],this._cachedCategoryFields=[],this._orderRules=[],this._drawText=function(){if(!this.storyLabel){var t=this.chart,e=this,i=0;this.chart.axes.forEach(function(t){"x"===t.position&&(i+=1)},this),this.storyLabel=this.chart._group.append("text").attr("class","dimple-storyboard-label").attr("opacity",1).attr("x",this.chart._xPixels()+.01*this.chart._widthPixels()).attr("y",this.chart._yPixels()+(this.chart._heightPixels()/35>10?this.chart._heightPixels()/35:10)*(i>1?1.25:-1)).call(function(){t.noFormats||this.style("font-family",e.fontFamily).style("font-size",e._getFontSize())})}this.storyLabel.text(this.categoryFields.join("\\")+": "+this.getFrameValue())},this._getCategories=function(){return this._categoryFields!==this._cachedCategoryFields&&(this._categories=[],this.chart._getAllData().forEach(function(t){var e=-1,i="";null!==this.categoryFields&&(this.categoryFields.forEach(function(e,s){s>0&&(i+="/"),i+=t[e]},this),e=this._categories.indexOf(i),-1===e&&(this._categories.push(i),e=this._categories.length-1))},this),this._cachedCategoryFields=this._categoryFields),this._categories},this._getFontSize=function(){var t;return t=this.fontSize&&"auto"!==this.fontSize.toString().toLowerCase()?isNaN(this.fontSize)?this.fontSize:this.fontSize+"px":(this.chart._heightPixels()/35>10?this.chart._heightPixels()/35:10)+"px"},this._goToFrameIndex=function(t){this._frame=t%this._getCategories().length,this.chart.draw(this.frameDuration/2)},this.addOrderRule=function(t,e){this._orderRules.push({ordering:t,desc:e})},this.getFrameValue=function(){var t=null;return this._frame>=0&&this._getCategories().length>this._frame&&(t=this._getCategories()[this._frame]),t},this.goToFrame=function(t){if(this._getCategories().length>0){var e=this._getCategories().indexOf(t);this._goToFrameIndex(e)}},this.pauseAnimation=function(){null!==this._animationTimer&&(window.clearInterval(this._animationTimer),this._animationTimer=null)},this.startAnimation=function(){null===this._animationTimer&&(null!==this.onTick&&this.onTick(this.getFrameValue()),this._animationTimer=window.setInterval(function(t){return function(){t._goToFrameIndex(t._frame+1),null!==t.onTick&&t.onTick(t.getFrameValue()),t._drawText(t.frameDuration/2)}}(this),this.frameDuration))},this.stopAnimation=function(){null!==this._animationTimer&&(window.clearInterval(this._animationTimer),this._animationTimer=null,this._frame=0)}},e.aggregateMethod.avg=function(t,e){return t.value=null===t.value||void 0===t.value?0:parseFloat(t.value),t.count=null===t.count||void 0===t.count?1:parseFloat(t.count),e.value=null===e.value||void 0===e.value?0:parseFloat(e.value),e.count=null===e.count||void 0===e.count?1:parseFloat(e.count),(t.value*t.count+e.value*e.count)/(t.count+e.count)},e.aggregateMethod.count=function(t,e){return t.count=null===t.count||void 0===t.count?0:parseFloat(t.count),e.count=null===e.count||void 0===e.count?0:parseFloat(e.count),t.count+e.count},e.aggregateMethod.max=function(t,e){return t.value=null===t.value||void 0===t.value?0:parseFloat(t.value),e.value=null===e.value||void 0===e.value?0:parseFloat(e.value),t.value>e.value?t.value:e.value},e.aggregateMethod.min=function(t,e){return parseFloat(null===t.value?e.value:parseFloat(t.value)<parseFloat(e.value)?t.value:e.value)},e.aggregateMethod.sum=function(t,e){return t.value=null===t.value||void 0===t.value?0:parseFloat(t.value),e.value=null===e.value||void 0===e.value?0:parseFloat(e.value),t.value+e.value},e.plot.area={stacked:!0,grouped:!0,supportedAxes:["x","y","c"],draw:function(i,s,n){var a,r,o,l,h,c,u,d,p,f,g,m,y,_,x,v,b,C,F,w,P,k,S=s._positionData,L=[],M=null,z="dimple-series-"+i.series.indexOf(s),T=s.x._hasCategories()||s.y._hasCategories()?0:1,B=!1,O={},A=[],D=[],H=function(){return function(i,s,n,a){t.select(s).style("opacity",1),e._showPointTooltip(i,s,n,a)}},I=function(i){return function(s,n,a,r){t.select(n).style("opacity",r.lineMarkers||i.data.length<2?e._helpers.opacity(s,a,r):0),e._removeTooltip(s,n,a,r)}},E=function(t,a){e._drawMarkers(t,i,s,n,z,B,H(t),I(t),a)},G=function(t,n){var a;return"step"===s.interpolation&&s[t]._hasCategories()?(a=e._helpers[t](n,i,s)+("y"===t?e._helpers.height(n,i,s):0),s[t].categoryFields.length<2&&(a+=("y"===t?1:-1)*e._helpers[t+"Gap"](i,s))):a=e._helpers["c"+t](n,i,s),parseFloat(a)},V=function(e,i){return t.svg.line().x(function(t){return s.x._hasCategories()||!i?t.x:s.x[i]}).y(function(t){return s.y._hasCategories()||!i?t.y:s.y[i]}).interpolate(e)},N=function(t,e){return parseFloat(t)-parseFloat(e)},R=function(t,e){return parseFloat(t.x)-parseFloat(e.x)},W=function(t,e,i){var s,n,a=e[e.length-1],r=9999,o=a;for(s=0;s<t.length;s+=1)(t[s].x!==a.x||t[s].y!==a.y)&&(n=180-Math.atan2(t[s].x-a.x,t[s].y-a.y)*(180/Math.PI),n>i&&r>n&&(o=t[s],r=n));return e.push(o),r};for(a="step"===s.interpolation?"step-after":s.interpolation,f=e._getSeriesOrder(s.data||i.data,s),s.c&&(s.x._hasCategories()&&s.y._hasMeasure()||s.y._hasCategories()&&s.x._hasMeasure())&&(B=!0),s.x._hasCategories()?(P="x",k="y"):s.y._hasCategories()&&(P="y",k="x"),r=0;r<S.length;r+=1){for(h=[],u=-1,l=T;l<S[r].aggField.length;l+=1)h.push(S[r].aggField[l]);for(c=e._createClass(h),l=0;l<L.length;l+=1)if(L[l].keyString===c){u=l;break}-1===u&&(u=L.length,L.push({key:h,keyString:c,color:"white",data:[],points:[],area:{},entry:{},exit:{},group:P&&S[r][P+"Field"]&&S[r][P+"Field"].length>=2?S[r][P+"Field"][0]:"All"})),L[u].data.push(S[r])}for(f&&L.sort(function(t,i){return e._arrayIndexCompare(f,t.key,i.key)}),r=0;r<L.length;r+=1){for(L[r].data.sort(e._getSeriesSortPredicate(i,s,f)),o=0;o<L[r].data.length;o+=1)L[r].points.push({x:G("x",L[r].data[o]),y:G("y",L[r].data[o])}),P&&(O[L[r].group]||(O[L[r].group]={}),O[L[r].group][L[r].points[L[r].points.length-1][P]]=s[k]._origin);g=L[r].points,"step"===s.interpolation&&g.length>1&&P&&(s.x._hasCategories()?(g.push({x:2*g[g.length-1].x-g[g.length-2].x,y:g[g.length-1].y}),O[L[r].group][g[g.length-1][P]]=s[k]._origin):s.y._hasCategories()&&(g=[{x:g[0].x,y:2*g[0].y-g[1].y}].concat(g),O[L[r].group][g[0][P]]=s[k]._origin,L[r].points=g))}for(_ in O)if(O.hasOwnProperty(_)){A[_]=[];for(x in O[_])O[_].hasOwnProperty(x)&&A[_].push(parseFloat(x));A[_].sort(N)}for(r=0;r<L.length;r+=1){if(g=L[r].points,v=L[r].group,m=[],D=[],B&&e._addGradient(L[r].key,"fill-area-gradient-"+L[r].keyString,s.x._hasCategories()?s.x:s.y,S,i,n,"fill"),A[v]&&A[v].length>0)for(o=0,l=0;o<A[v].length;o+=1)A[v][o]>=g[0][P]&&A[v][o]<=g[g.length-1][P]&&(y={},y[P]=A[v][o],y[k]=O[v][A[v][o]],m.push(y),g[l][P]>A[v][o]?D.push(y):(D.push(g[l]),O[L[r].group][A[v][o]]=g[l][k],l+=1));else if(s._orderRules&&s._orderRules.length>0)D=g.concat(g[0]);else{g=g.sort(R),D.push(g[0]),w=0;do w=W(g,D,w);while(D.length<=g.length&&(D[0].x!==D[D.length-1].x||D[0].y!==D[D.length-1].y))}m=m.reverse(),b=V(a,"_previousOrigin")(D),C=V("step-after"===a?"step-before":"step-before"===a?"step-after":a,"_previousOrigin")(m),F=V("linear","_previousOrigin")(D),L[r].entry=b+(C&&C.length>0?"L"+C.substring(1):"")+(F&&F.length>0?"L"+F.substring(1,F.indexOf("L")):0),b=V(a)(D),C=V("step-after"===a?"step-before":"step-before"===a?"step-after":a)(m),F=V("linear")(D),L[r].update=b+(C&&C.length>0?"L"+C.substring(1):"")+(F&&F.length>0?"L"+F.substring(1,F.indexOf("L")):0),b=V(a,"_origin")(D),C=V("step-after"===a?"step-before":"step-before"===a?"step-after":a,"_origin")(m),F=V("linear","_origin")(D),L[r].exit=b+(C&&C.length>0?"L"+C.substring(1):"")+(F&&F.length>0?"L"+F.substring(1,F.indexOf("L")):0),L[r].color=i.getColor(L[r].key.length>0?L[r].key[L[r].key.length-1]:"All"),L[r].css=i.getClass(L[r].key.length>0?L[r].key[L[r].key.length-1]:"All")}null!==i._tooltipGroup&&void 0!==i._tooltipGroup&&i._tooltipGroup.remove(),M=null===s.shapes||void 0===s.shapes?i._group.selectAll("."+z).data(L):s.shapes.data(L,function(t){return t.key}),M.enter().append("path").attr("id",function(t){return e._createClass([t.key])}).attr("class",function(t){return z+" dimple-line "+t.keyString+" "+i.customClassList.areaSeries+" "+t.css}).attr("d",function(t){return t.entry}).call(function(){i.noFormats||this.attr("opacity",function(t){return B?1:t.color.opacity}).style("fill",function(t){return B?"url(#"+e._createClass(["fill-area-gradient-"+t.keyString])+")":t.color.fill}).style("stroke",function(t){return B?"url(#"+e._createClass(["stroke-area-gradient-"+t.keyString])+")":t.color.stroke}).style("stroke-width",s.lineWeight)}).each(function(t){t.markerData=t.data,E(t,this)}),d=i._handleTransition(M,n,i).attr("d",function(t){return t.update}).each(function(t){t.markerData=t.data,E(t,this)}),p=i._handleTransition(M.exit(),n,i).attr("d",function(t){return t.exit}).each(function(t){t.markerData=[],E(t,this)}),e._postDrawHandling(s,d,p,n),s.shapes=M}},e.plot.bar={stacked:!0,grouped:!1,supportedAxes:["x","y","c"],draw:function(t,i,s){var n,a,r=i._positionData,o=null,l=["dimple-series-"+t.series.indexOf(i),"dimple-bar"],h=!i._isStacked()&&i.x._hasMeasure(),c=!i._isStacked()&&i.y._hasMeasure(),u="none";i.x._hasCategories()&&i.y._hasCategories()?u="both":i.x._hasCategories()?u="x":i.y._hasCategories()&&(u="y"),null!==t._tooltipGroup&&void 0!==t._tooltipGroup&&t._tooltipGroup.remove(),o=null===i.shapes||void 0===i.shapes?t._group.selectAll("."+l.join(".")).data(r):i.shapes.data(r,function(t){return t.key}),o.enter().append("rect").attr("id",function(t){return e._createClass([t.key])}).attr("class",function(i){var s=[];return s=s.concat(i.aggField),s=s.concat(i.xField),s=s.concat(i.yField),l.join(" ")+" "+e._createClass(s)+" "+t.customClassList.barSeries+" "+e._helpers.css(i,t)}).attr("x",function(s){var n=i.x._previousOrigin;return"x"===u?n=e._helpers.x(s,t,i):"both"===u&&(n=e._helpers.cx(s,t,i)),n}).attr("y",function(s){var n=i.y._previousOrigin;return"y"===u?n=e._helpers.y(s,t,i):"both"===u&&(n=e._helpers.cy(s,t,i)),n}).attr("width",function(s){return"x"===u?e._helpers.width(s,t,i):0}).attr("height",function(s){return"y"===u?e._helpers.height(s,t,i):0}).on("mouseover",function(s){e._showBarTooltip(s,this,t,i)}).on("mouseleave",function(s){e._removeTooltip(s,this,t,i)}).call(function(){t.noFormats||this.attr("opacity",function(s){return e._helpers.opacity(s,t,i)}).style("fill",function(s){return e._helpers.fill(s,t,i)}).style("stroke",function(s){return e._helpers.stroke(s,t,i)})}),n=t._handleTransition(o,s,t,i).attr("x",function(s){return h?e._helpers.cx(s,t,i)-i.x.floatingBarWidth/2:e._helpers.x(s,t,i)}).attr("y",function(s){return c?e._helpers.cy(s,t,i)-i.y.floatingBarWidth/2:e._helpers.y(s,t,i)}).attr("width",function(s){return h?i.x.floatingBarWidth:e._helpers.width(s,t,i)}).attr("height",function(s){return c?i.y.floatingBarWidth:e._helpers.height(s,t,i)}).call(function(){t.noFormats||this.attr("fill",function(s){return e._helpers.fill(s,t,i)}).attr("stroke",function(s){return e._helpers.stroke(s,t,i)})}),a=t._handleTransition(o.exit(),s,t,i).attr("x",function(s){var n=i.x._origin;return"x"===u?n=e._helpers.x(s,t,i):"both"===u&&(n=e._helpers.cx(s,t,i)),n}).attr("y",function(s){var n=i.y._origin;return"y"===u?n=e._helpers.y(s,t,i):"both"===u&&(n=e._helpers.cy(s,t,i)),n}).attr("width",function(s){return"x"===u?e._helpers.width(s,t,i):0}).attr("height",function(s){return"y"===u?e._helpers.height(s,t,i):0}),e._postDrawHandling(i,n,a,s),i.shapes=o}},e.plot.bubble={stacked:!1,grouped:!1,supportedAxes:["x","y","z","c"],draw:function(t,i,s){var n,a,r=i._positionData,o=null,l=["dimple-series-"+t.series.indexOf(i),"dimple-bubble"];null!==t._tooltipGroup&&void 0!==t._tooltipGroup&&t._tooltipGroup.remove(),o=null===i.shapes||void 0===i.shapes?t._group.selectAll("."+l.join(".")).data(r):i.shapes.data(r,function(t){return t.key}),o.enter().append("circle").attr("id",function(t){return e._createClass([t.key])}).attr("class",function(i){var s=[];return s=s.concat(i.aggField),s=s.concat(i.xField),s=s.concat(i.yField),s=s.concat(i.zField),l.join(" ")+" "+e._createClass(s)+" "+t.customClassList.bubbleSeries+" "+e._helpers.css(i,t)}).attr("cx",function(s){return i.x._hasCategories()?e._helpers.cx(s,t,i):i.x._previousOrigin}).attr("cy",function(s){return i.y._hasCategories()?e._helpers.cy(s,t,i):i.y._previousOrigin}).attr("r",0).on("mouseover",function(s){e._showPointTooltip(s,this,t,i)}).on("mouseleave",function(s){e._removeTooltip(s,this,t,i)}).call(function(){t.noFormats||this.attr("opacity",function(s){return e._helpers.opacity(s,t,i)}).style("fill",function(s){return e._helpers.fill(s,t,i)}).style("stroke",function(s){return e._helpers.stroke(s,t,i)})}),n=t._handleTransition(o,s,t,i).attr("cx",function(s){return e._helpers.cx(s,t,i)}).attr("cy",function(s){return e._helpers.cy(s,t,i)}).attr("r",function(s){return e._helpers.r(s,t,i)}).call(function(){t.noFormats||this.attr("fill",function(s){return e._helpers.fill(s,t,i)}).attr("stroke",function(s){return e._helpers.stroke(s,t,i)})}),a=t._handleTransition(o.exit(),s,t,i).attr("r",0).attr("cx",function(s){return i.x._hasCategories()?e._helpers.cx(s,t,i):i.x._origin}).attr("cy",function(s){return i.y._hasCategories()?e._helpers.cy(s,t,i):i.y._origin}),e._postDrawHandling(i,n,a,s),i.shapes=o}},e.plot.line={stacked:!1,grouped:!0,supportedAxes:["x","y","c"],draw:function(i,s,n){var a,r,o,l,h,c,u,d,p,f,g=s._positionData,m=[],y=null,_="dimple-series-"+i.series.indexOf(s),x=s.x._hasCategories()||s.y._hasCategories()?0:1,v=!1,b=function(){return function(i,s,n,a){t.select(s).style("opacity",1),e._showPointTooltip(i,s,n,a)}},C=function(i){return function(s,n,a,r){t.select(n).style("opacity",r.lineMarkers||i.data.length<2?e._helpers.opacity(s,a,r):0),e._removeTooltip(s,n,a,r)}},F=function(t,a){e._drawMarkers(t,i,s,n,_,v,b(t),C(t),a)},w=function(t,n){var a;return"step"===s.interpolation&&s[t]._hasCategories()?(s.barGap=0,s.clusterBarGap=0,a=e._helpers[t](n,i,s)+("y"===t?e._helpers.height(n,i,s):0)):a=e._helpers["c"+t](n,i,s),parseFloat(a.toFixed(1))},P=function(e,i){return t.svg.line().x(function(t){return s.x._hasCategories()||!i?t.x:s.x[i]}).y(function(t){return s.y._hasCategories()||!i?t.y:s.y[i]}).interpolate(e)};for(a="step"===s.interpolation?"step-after":s.interpolation,f=e._getSeriesOrder(s.data||i.data,s),s.c&&(s.x._hasCategories()&&s.y._hasMeasure()||s.y._hasCategories()&&s.x._hasMeasure())&&(v=!0),r=0;r<g.length;r+=1){for(h=[],u=-1,l=x;l<g[r].aggField.length;l+=1)h.push(g[r].aggField[l]);for(c=e._createClass(h),l=0;l<m.length;l+=1)if(m[l].keyString===c){u=l;break}-1===u&&(u=m.length,m.push({key:h,keyString:c,color:"white",data:[],markerData:[],points:[],line:{},entry:{},exit:{}})),m[u].data.push(g[r])}for(f&&m.sort(function(t,i){return e._arrayIndexCompare(f,t.key,i.key)}),r=0;r<m.length;r+=1){for(m[r].data.sort(e._getSeriesSortPredicate(i,s,f)),v&&e._addGradient(m[r].key,"fill-line-gradient-"+m[r].keyString,s.x._hasCategories()?s.x:s.y,g,i,n,"fill"),o=0;o<m[r].data.length;o+=1)m[r].points.push({x:w("x",m[r].data[o]),y:w("y",m[r].data[o])});"step"===s.interpolation&&m[r].points.length>1&&(s.x._hasCategories()?m[r].points.push({x:2*m[r].points[m[r].points.length-1].x-m[r].points[m[r].points.length-2].x,y:m[r].points[m[r].points.length-1].y}):s.y._hasCategories()&&(m[r].points=[{x:m[r].points[0].x,y:2*m[r].points[0].y-m[r].points[1].y}].concat(m[r].points))),m[r].entry=P(a,"_previousOrigin")(m[r].points),m[r].update=P(a)(m[r].points),m[r].exit=P(a,"_origin")(m[r].points),m[r].color=i.getColor(m[r].key.length>0?m[r].key[m[r].key.length-1]:"All"),m[r].css=i.getClass(m[r].key.length>0?m[r].key[m[r].key.length-1]:"All")}null!==i._tooltipGroup&&void 0!==i._tooltipGroup&&i._tooltipGroup.remove(),y=null===s.shapes||void 0===s.shapes?i._group.selectAll("."+_).data(m):s.shapes.data(m,function(t){return t.key}),y.enter().append("path").attr("id",function(t){return e._createClass([t.key])}).attr("class",function(t){return _+" dimple-line "+t.keyString+" "+i.customClassList.lineSeries+" "+t.css}).attr("d",function(t){return t.entry}).call(function(){i.noFormats||this.attr("opacity",function(t){return v?1:t.color.opacity}).style("fill","none").style("stroke",function(t){return v?"url(#"+e._createClass(["fill-line-gradient-"+t.keyString])+")":t.color.stroke}).style("stroke-width",s.lineWeight)}).each(function(t){t.markerData=t.data,F(t,this)}),d=i._handleTransition(y,n,i).attr("d",function(t){return t.update}).each(function(t){t.markerData=t.data,F(t,this)}),p=i._handleTransition(y.exit(),n,i).attr("d",function(t){return t.exit}).each(function(t){t.markerData=[],F(t,this)}),e._postDrawHandling(s,d,p,n),s.shapes=y}},e.plot.pie={stacked:!1,grouped:!1,supportedAxes:["x","y","c","z","p"],draw:function(i,s,n){var a,r,o=s._positionData,l=null,h=["dimple-series-"+i.series.indexOf(s),"dimple-pie"],c=function(t){var n;return n=s.x&&s.y?e._helpers.r(t,i,s):i._widthPixels()<i._heightPixels()?i._widthPixels()/2:i._heightPixels()/2},u=function(t){var i=c(t);return s.outerRadius&&(i=e._parsePosition(s.outerRadius,i)),Math.max(i,0)},d=function(t){var i=0;return s.innerRadius&&(i=e._parsePosition(s.innerRadius,c(t))),Math.max(i,0)},p=function(e){var i;return(i=t.svg.arc().innerRadius(d(e)).outerRadius(u(e)))(e)},f=function(e){e.innerRadius=d(e),e.outerRadius=u(e);var i,s=t.interpolate(this._current,e);return i=t.svg.arc().innerRadius(function(t){return t.innerRadius}).outerRadius(function(t){return t.outerRadius}),this._current=s(0),function(t){return i(s(t))}},g=function(t){return function(n){var a,r;return s.x&&s.y?(a=!t||s.x._hasCategories()?e._helpers.cx(n,i,s):s.x._previousOrigin,r=!t||s.y._hasCategories()?e._helpers.cy(n,i,s):s.y._previousOrigin):(a=i._xPixels()+i._widthPixels()/2,r=i._yPixels()+i._heightPixels()/2),"translate("+a+","+r+")"}};null!==i._tooltipGroup&&void 0!==i._tooltipGroup&&i._tooltipGroup.remove(),l=null===s.shapes||void 0===s.shapes?i._group.selectAll("."+h.join(".")).data(o):s.shapes.data(o,function(t){return t.key}),l.enter().append("path").attr("id",function(t){return e._createClass([t.key])}).attr("class",function(t){var s=[];return s=s.concat(t.aggField),s=s.concat(t.pField),h.join(" ")+" "+e._createClass(s)+" "+i.customClassList.pieSeries+" "+e._helpers.css(t,i)}).attr("d",p).on("mouseover",function(t){e._showBarTooltip(t,this,i,s)}).on("mouseleave",function(t){e._removeTooltip(t,this,i,s)}).call(function(){i.noFormats||this.attr("opacity",function(t){return e._helpers.opacity(t,i,s)}).style("fill",function(t){return e._helpers.fill(t,i,s)}).style("stroke",function(t){return e._helpers.stroke(t,i,s)})}).attr("transform",g(!0)).each(function(t){this._current=t,t.innerRadius=d(t),
t.outerRadius=u(t)}),a=i._handleTransition(l,n,i,s).call(function(){n&&n>0?this.attrTween("d",f):this.attr("d",p),i.noFormats||this.attr("fill",function(t){return e._helpers.fill(t,i,s)}).attr("stroke",function(t){return e._helpers.stroke(t,i,s)})}).attr("transform",g(!1)),r=i._handleTransition(l.exit(),n,i,s).attr("transform",g(!0)).attr("d",p),e._postDrawHandling(s,a,r,n),s.shapes=l}},e._addGradient=function(t,i,s,n,a,r,o){var l=[].concat(t),h=a.svg.select("#"+e._createClass([i])),c=[],u=s.position+"Field",d=!0,p=[];n.forEach(function(t){-1===c.indexOf(t[u])&&t.aggField.join("_")===l.join("_")&&c.push(t[u])},this),c=c.sort(function(t,e){return s._scale(t)-s._scale(e)}),null===h.node()&&(d=!1,h=a.svg.append("defs").append("linearGradient").attr("id",e._createClass([i])).attr("gradientUnits","userSpaceOnUse").attr("x1","x"===s.position?s._scale(c[0])+a._widthPixels()/c.length/2:0).attr("y1","y"===s.position?s._scale(c[0])-a._heightPixels()/c.length/2:0).attr("x2","x"===s.position?s._scale(c[c.length-1])+a._widthPixels()/c.length/2:0).attr("y2","y"===s.position?s._scale(c[c.length-1])-a._heightPixels()/c.length/2:0)),c.forEach(function(t,e){var i={},s=0;for(s=0;s<n.length;s+=1)if(n[s].aggField.join("_")===l.join("_")&&n[s][u].join("_")===t.join("_")){i=n[s];break}p.push({offset:Math.round(e/(c.length-1)*100)+"%",color:i[o]})},this),d?a._handleTransition(h.selectAll("stop").data(p),r,a).attr("offset",function(t){return t.offset}).attr("stop-color",function(t){return t.color}):h.selectAll("stop").data(p).enter().append("stop").attr("offset",function(t){return t.offset}).attr("stop-color",function(t){return t.color})},e._arrayIndexCompare=function(t,e,i){var s,n,a,r,o,l;for(n=0;n<t.length;n+=1){for(r=!0,o=!0,l=[].concat(t[n]),a=0;a<e.length;a+=1)r=r&&e[a]===l[a];for(a=0;a<i.length;a+=1)o=o&&i[a]===l[a];if(r&&o){s=0;break}if(r){s=-1;break}if(o){s=1;break}}return s},e._createClass=function(t){var e,i,s=[];if(i=function(t){var e=t.charCodeAt(0),i="-";return e>=65&&90>=e&&(i=t.toLowerCase()),i},t.length>0)for(e=0;e<t.length;e+=1)t[e]&&s.push("dimple-"+t[e].toString().replace(/[^a-z0-9]/g,i));else s=["dimple-all"];return s.join(" ")},e._drawMarkerBacks=function(i,s,n,a,r,o){var l,h,c,u=["dimple-marker-back",r,i.keyString];n.lineMarkers&&(l=null===n._markerBacks||void 0===n._markerBacks||void 0===n._markerBacks[i.keyString]?s._group.selectAll("."+u.join(".")).data(i.markerData):n._markerBacks[i.keyString].data(i.markerData,function(t){return t.key}),c=o.nextSibling&&o.nextSibling.id?l.enter().insert("circle","#"+o.nextSibling.id):l.enter().append("circle"),c.attr("id",function(t){return e._createClass([t.key+" Marker Back"])}).attr("class",function(t){var i=[];return n.x._hasCategories()&&(i=i.concat(t.xField)),n.y._hasCategories()&&(i=i.concat(t.yField)),e._createClass(i)+" "+u.join(" ")}).attr("cx",function(t){return n.x._hasCategories()?e._helpers.cx(t,s,n):n.x._previousOrigin}).attr("cy",function(t){return n.y._hasCategories()?e._helpers.cy(t,s,n):n.y._previousOrigin}).attr("r",0).attr("fill","white").attr("stroke","none"),s._handleTransition(l,a,s).attr("cx",function(t){return e._helpers.cx(t,s,n)}).attr("cy",function(t){return e._helpers.cy(t,s,n)}).attr("r",2+n.lineWeight),h=s._handleTransition(l.exit(),a,s).attr("cx",function(t){return n.x._hasCategories()?e._helpers.cx(t,s,n):n.x._origin}).attr("cy",function(t){return n.y._hasCategories()?e._helpers.cy(t,s,n):n.y._origin}).attr("r",0),0===a?h.remove():h.each("end",function(){t.select(this).remove()}),(void 0===n._markerBacks||null===n._markerBacks)&&(n._markerBacks={}),n._markerBacks[i.keyString]=l)},e._drawMarkers=function(i,s,n,a,r,o,l,h,c){var u,d,p,f=["dimple-marker",r,i.keyString];u=null===n._markers||void 0===n._markers||void 0===n._markers[i.keyString]?s._group.selectAll("."+f.join(".")).data(i.markerData):n._markers[i.keyString].data(i.markerData,function(t){return t.key}),p=c.nextSibling&&c.nextSibling.id?u.enter().insert("circle","#"+c.nextSibling.id):u.enter().append("circle"),p.attr("id",function(t){return e._createClass([t.key+" Marker"])}).attr("class",function(t){var i=[],a=s.getClass(t.aggField.length>0?t.aggField[t.aggField.length-1]:"All");return n.x._hasCategories()&&(i=i.concat(t.xField)),n.y._hasCategories()&&(i=i.concat(t.yField)),e._createClass(i)+" "+f.join(" ")+" "+s.customClassList.lineMarker+" "+a}).on("mouseover",function(t){l(t,this,s,n)}).on("mouseleave",function(t){h(t,this,s,n)}).attr("cx",function(t){return n.x._hasCategories()?e._helpers.cx(t,s,n):n.x._previousOrigin}).attr("cy",function(t){return n.y._hasCategories()?e._helpers.cy(t,s,n):n.y._previousOrigin}).attr("r",0).attr("opacity",n.lineMarkers||i.data.length<2?i.color.opacity:0).call(function(){s.noFormats||this.attr("fill","white").style("stroke-width",n.lineWeight).attr("stroke",function(t){return o?e._helpers.fill(t,s,n):i.color.stroke})}),s._handleTransition(u,a,s).attr("cx",function(t){return e._helpers.cx(t,s,n)}).attr("cy",function(t){return e._helpers.cy(t,s,n)}).attr("r",2+n.lineWeight).attr("opacity",n.lineMarkers||i.data.length<2?i.color.opacity:0).call(function(){s.noFormats||this.attr("fill","white").style("stroke-width",n.lineWeight).attr("stroke",function(t){return o?e._helpers.fill(t,s,n):i.color.stroke})}),d=s._handleTransition(u.exit(),a,s).attr("cx",function(t){return n.x._hasCategories()?e._helpers.cx(t,s,n):n.x._origin}).attr("cy",function(t){return n.y._hasCategories()?e._helpers.cy(t,s,n):n.y._origin}).attr("r",0),0===a?d.remove():d.each("end",function(){t.select(this).remove()}),(void 0===n._markers||null===n._markers)&&(n._markers={}),n._markers[i.keyString]=u,e._drawMarkerBacks(i,s,n,a,r,c)},e._getOrderedList=function(t,i,s){var n,a=[],r=[],o=[].concat(i),l=[].concat(i),h=[];return null!==s&&void 0!==s&&(h=h.concat(s)),h=h.concat({ordering:o,desc:!1}),h.forEach(function(e){var i,s=[],n=[];if("function"==typeof e.ordering){if(t&&t.length>0)for(i in t[0])t[0].hasOwnProperty(i)&&-1===l.indexOf(i)&&l.push(i)}else if(e.ordering instanceof Array){for(i=0;i<e.ordering.length;i+=1)t&&t.length>0&&t[0].hasOwnProperty(e.ordering[i])&&n.push(e.ordering[i]),s.push(e.ordering[i]);n.length>s.length/2?l.concat(n):e.values=s}else l.push(e.ordering)},this),n=e._rollUp(t,o,l),h.length>=1&&(h.forEach(function(t){var e=null===t.desc||void 0===t.desc?!1:t.desc,i=t.ordering,s=[],n=function(t){var e,i=0;for(e=0;e<t.length;e+=1){if(isNaN(t[e])){i=void 0;break}i+=parseFloat(t[e])}return i},r=function(t,e){var i=0,s=n(t),a=n(e);return isNaN(s)||isNaN(a)?isNaN(Date.parse(t[0]))||isNaN(Date.parse(e[0]))?t[0]<e[0]?i=-1:t[0]>e[0]&&(i=1):i=Date.parse(t[0])-Date.parse(e[0]):i=parseFloat(s)-parseFloat(a),i};"function"==typeof i?a.push(function(t,s){return(e?-1:1)*i(t,s)}):t.values&&t.values.length>0?(t.values.forEach(function(t){s.push([].concat(t).join("|"))},this),a.push(function(t,i){var n,a,r,l="",h="";for(r=0;r<o.length;r+=1)r>0&&(l+="|",h+="|"),l+=t[o[r]],h+=i[o[r]];return n=s.indexOf(l),a=s.indexOf(h),n=0>n?e?-1:s.length:n,a=0>a?e?-1:s.length:a,(e?-1:1)*(n-a)})):[].concat(t.ordering).forEach(function(t){a.push(function(i,s){var n=0;return void 0!==i[t]&&void 0!==s[t]&&(n=r([].concat(i[t]),[].concat(s[t]))),(e?-1:1)*n})})}),n.sort(function(t,e){for(var i=0,s=0;i<a.length&&0===s;)s=a[i](t,e),i+=1;return s}),n.forEach(function(t){var e,i=[];if(1===o.length)r.push(t[o[0]]);else{for(e=0;e<o.length;e+=1)i.push(t[o[e]]);r.push(i)}},this)),r},e._getSeriesOrder=function(t,i){var s=[].concat(i._orderRules),n=i.categoryFields,a=[];return null!==n&&void 0!==n&&n.length>0&&(null!==i.c&&void 0!==i.c&&i.c._hasMeasure()&&s.push({ordering:i.c.measure,desc:!0}),i.x._hasMeasure()&&s.push({ordering:i.x.measure,desc:!0}),i.y._hasMeasure()&&s.push({ordering:i.y.measure,desc:!0}),a=e._getOrderedList(t,n,s)),a},e._getSeriesSortPredicate=function(t,i,s){return function(n,a){var r=0;return i.x._hasCategories()&&(r=e._helpers.cx(n,t,i)-e._helpers.cx(a,t,i)),0===r&&i.y._hasCategories()&&(r=e._helpers.cy(n,t,i)-e._helpers.cy(a,t,i)),0===r&&s&&(r=e._arrayIndexCompare(s,n.aggField,a.aggField)),r}},e._helpers={cx:function(t,i,s){var n=0;return n=null!==s.x.measure&&void 0!==s.x.measure?s.x._scale(t.cx):s.x._hasCategories()&&s.x.categoryFields.length>=2?s.x._scale(t.cx)+e._helpers.xGap(i,s)+(t.xOffset+.5)*(i._widthPixels()/s.x._max-2*e._helpers.xGap(i,s))*t.width:s.x._scale(t.cx)+i._widthPixels()/s.x._max/2},cy:function(t,i,s){var n=0;return n=null!==s.y.measure&&void 0!==s.y.measure?s.y._scale(t.cy):null!==s.y.categoryFields&&void 0!==s.y.categoryFields&&s.y.categoryFields.length>=2?s.y._scale(t.cy)-i._heightPixels()/s.y._max+e._helpers.yGap(i,s)+(t.yOffset+.5)*(i._heightPixels()/s.y._max-2*e._helpers.yGap(i,s))*t.height:s.y._scale(t.cy)-i._heightPixels()/s.y._max/2},r:function(t,e,i){var s=0,n=1;return null===i.z||void 0===i.z?s=i.radius&&"auto"!==i.radius?i.radius:5:(i.radius&&"auto"!==i.radius&&i.radius>1&&(n=i.radius/i.z._scale(i.z._max)),s=i.z._hasMeasure()?i.z._scale(t.r)*n:i.z._scale(e._heightPixels()/100)*n),s},xGap:function(t,e){var i=0;return(null===e.x.measure||void 0===e.x.measure)&&e.barGap>0&&(i=t._widthPixels()/e.x._max*(e.barGap>.99?.99:e.barGap)/2),i},xClusterGap:function(t,i,s){var n=0;return null!==s.x.categoryFields&&void 0!==s.x.categoryFields&&s.x.categoryFields.length>=2&&s.clusterBarGap>0&&!s.x._hasMeasure()&&(n=t.width*(i._widthPixels()/s.x._max-2*e._helpers.xGap(i,s))*(s.clusterBarGap>.99?.99:s.clusterBarGap)/2),n},yGap:function(t,e){var i=0;return(null===e.y.measure||void 0===e.y.measure)&&e.barGap>0&&(i=t._heightPixels()/e.y._max*(e.barGap>.99?.99:e.barGap)/2),i},yClusterGap:function(t,i,s){var n=0;return null!==s.y.categoryFields&&void 0!==s.y.categoryFields&&s.y.categoryFields.length>=2&&s.clusterBarGap>0&&!s.y._hasMeasure()&&(n=t.height*(i._heightPixels()/s.y._max-2*e._helpers.yGap(i,s))*(s.clusterBarGap>.99?.99:s.clusterBarGap)/2),n},x:function(t,i,s){var n=0;return n=s.x._hasTimeField()?s.x._scale(t.x)-e._helpers.width(t,i,s)/2:null!==s.x.measure&&void 0!==s.x.measure?s.x._scale(t.x):s.x._scale(t.x)+e._helpers.xGap(i,s)+t.xOffset*(e._helpers.width(t,i,s)+2*e._helpers.xClusterGap(t,i,s))+e._helpers.xClusterGap(t,i,s)},y:function(t,i,s){var n=0;return n=s.y._hasTimeField()?s.y._scale(t.y)-e._helpers.height(t,i,s)/2:null!==s.y.measure&&void 0!==s.y.measure?s.y._scale(t.y):s.y._scale(t.y)-i._heightPixels()/s.y._max+e._helpers.yGap(i,s)+t.yOffset*(e._helpers.height(t,i,s)+2*e._helpers.yClusterGap(t,i,s))+e._helpers.yClusterGap(t,i,s)},width:function(t,i,s){var n=0;return n=null!==s.x.measure&&void 0!==s.x.measure?Math.abs(s.x._scale(t.x<0?t.x-t.width:t.x+t.width)-s.x._scale(t.x)):s.x._hasTimeField()?s.x.floatingBarWidth:t.width*(i._widthPixels()/s.x._max-2*e._helpers.xGap(i,s))-2*e._helpers.xClusterGap(t,i,s)},height:function(t,i,s){var n=0;return n=s.y._hasTimeField()?s.y.floatingBarWidth:null!==s.y.measure&&void 0!==s.y.measure?Math.abs(s.y._scale(t.y)-s.y._scale(t.y<=0?t.y+t.height:t.y-t.height)):t.height*(i._heightPixels()/s.y._max-2*e._helpers.yGap(i,s))-2*e._helpers.yClusterGap(t,i,s)},opacity:function(t,e,i){var s=0;return s=null!==i.c&&void 0!==i.c?t.opacity:e.getColor(t.aggField.slice(-1)[0]).opacity},fill:function(t,e,i){var s=0;return s=null!==i.c&&void 0!==i.c?t.fill:e.getColor(t.aggField.slice(-1)[0]).fill},stroke:function(t,e,i){var s=0;return s=null!==i.c&&void 0!==i.c?t.stroke:e.getColor(t.aggField.slice(-1)[0]).stroke},css:function(t,e){return e.getClass(t.aggField.slice(-1)[0])}},e._parentHeight=function(t){var i=t.offsetHeight;return(0>=i||null===i||void 0===i)&&(i=t.clientHeight),(0>=i||null===i||void 0===i)&&(i=null===t.parentNode||void 0===t.parentNode?0:e._parentHeight(t.parentNode)),i},e._parentWidth=function(t){var i=t.offsetWidth;return(!i||0>i)&&(i=t.clientWidth),(!i||0>i)&&(i=t.parentNode?e._parentWidth(t.parentNode):0),i},e._parsePosition=function(t,e){var i,s=0;return t&&(i=t.toString().split(","),i.forEach(function(i){i&&(isNaN(i)?"%"===i.slice(-1)?s+=e*(parseFloat(i.slice(0,i.length-1))/100):"px"===i.slice(-2)?s+=parseFloat(i.slice(0,i.length-2)):s=t:s+=parseFloat(i))},this)),0>s&&(s=e+s),s},e._parseXPosition=function(t,i){return e._parsePosition(t,e._parentWidth(i))},e._parseYPosition=function(t,i){return e._parsePosition(t,e._parentHeight(i))},e._postDrawHandling=function(e,i,s,n){0===n?(i.each(function(t,i){null!==e.afterDraw&&void 0!==e.afterDraw&&e.afterDraw(this,t,i)}),s.remove()):(i.each("end",function(t,i){null!==e.afterDraw&&void 0!==e.afterDraw&&e.afterDraw(this,t,i)}),s.each("end",function(){t.select(this).remove()}))},e._removeTooltip=function(t,e,i,s){i._tooltipGroup&&i._tooltipGroup.remove()},e._rollUp=function(t,e,i){var s=[];return e=null!==e&&void 0!==e?[].concat(e):[],t.forEach(function(t){var n=-1,a={},r=!0;s.forEach(function(i,s){-1===n&&(r=!0,e.forEach(function(e){r=r&&t[e]===i[e]},this),r&&(n=s))},this),-1!==n?a=s[n]:(e.forEach(function(e){a[e]=t[e]},this),s.push(a),n=s.length-1),i.forEach(function(i){-1===e.indexOf(i)&&(void 0===a[i]&&(a[i]=[]),a[i]=a[i].concat(t[i]))},this),s[n]=a},this),s},e._showBarTooltip=function(e,i,s,n){var a,r,o,l,h,c,u=5,d=10,p=750,f=t.select(i),g=f.node().getBBox().x,m=f.node().getBBox().y,y=f.node().getBBox().width,_=f.node().getBBox().height,x=f.attr("opacity"),v=f.attr("fill"),b=n._dropLineOrigin(),C=t.rgb(t.rgb(v).r+.6*(255-t.rgb(v).r),t.rgb(v).g+.6*(255-t.rgb(v).g),t.rgb(v).b+.6*(255-t.rgb(v).b)),F=t.rgb(t.rgb(v).r+.8*(255-t.rgb(v).r),t.rgb(v).g+.8*(255-t.rgb(v).g),t.rgb(v).b+.8*(255-t.rgb(v).b)),w=n.getTooltipText(e),P=0,k=0,S=0,L=function(t,e){var i=f.node().getCTM(),n=s.svg.node().createSVGPoint();return n.x=t||0,n.y=e||0,n.matrixTransform(i)};null!==s._tooltipGroup&&void 0!==s._tooltipGroup&&s._tooltipGroup.remove(),s._tooltipGroup=s.svg.append("g"),n.p||(c=n._isStacked()?1:y/2,n.x._hasCategories()||null===b.y||s._tooltipGroup.append("line").attr("class","dimple-tooltip-dropline "+s.customClassList.tooltipDropLine).attr("x1",g<n.x._origin?g+c:g+y-c).attr("y1",m<b.y?m+_:m).attr("x2",g<n.x._origin?g+c:g+y-c).attr("y2",m<b.y?m+_:m).call(function(){s.noFormats||this.style("fill","none").style("stroke",v).style("stroke-width",2).style("stroke-dasharray","3, 3").style("opacity",x)}).transition().delay(p/2).duration(p/2).ease("linear").attr("y2",m<b.y?b.y-1:b.y+1),c=n._isStacked()?1:_/2,n.y._hasCategories()||null===b.x||s._tooltipGroup.append("line").attr("class","dimple-tooltip-dropline "+s.customClassList.tooltipDropLine).attr("x1",g<b.x?g+y:g).attr("y1",m<n.y._origin?m+c:m+_-c).attr("x2",g<b.x?g+y:g).attr("y2",m<n.y._origin?m+c:m+_-c).call(function(){s.noFormats||this.style("fill","none").style("stroke",v).style("stroke-width",2).style("stroke-dasharray","3, 3").style("opacity",x)}).transition().delay(p/2).duration(p/2).ease("linear").attr("x2",g<b.x?b.x-1:b.x+1)),a=s._tooltipGroup.append("g"),r=a.append("rect").attr("class","dimple-tooltip "+s.customClassList.tooltipBox),a.selectAll(".dimple-dont-select-any").data(w).enter().append("text").attr("class","dimple-tooltip "+s.customClassList.tooltipLabel).text(function(t){return t}).call(function(){s.noFormats||this.style("font-family",n.tooltipFontFamily).style("font-size",n._getTooltipFontSize())}),a.each(function(){k=this.getBBox().width>k?this.getBBox().width:k,S=this.getBBox().width>S?this.getBBox().height:S}),a.selectAll("text").attr("x",0).attr("y",function(){return P+=this.getBBox().height,P-this.getBBox().height/2}),r.attr("x",-u).attr("y",-u).attr("height",Math.floor(P+u)-.5).attr("width",k+2*u).attr("rx",5).attr("ry",5).call(function(){s.noFormats||this.style("fill",F).style("stroke",C).style("stroke-width",2).style("opacity",.95)}),L(g+y+u+d+k).x<parseFloat(s.svg.node().getBBox().width)?(o=g+y+u+d,l=m+_/2-(P-(S-u))/2):L(g-(u+d+k)).x>0?(o=g-(u+d+k),l=m+_/2-(P-(S-u))/2):L(0,m+_+P+d+u).y<parseFloat(s.svg.node().getBBox().height)?(o=g+y/2-(2*u+k)/2,o=o>0?o:d,o=o+k<parseFloat(s.svg.node().getBBox().width)?o:parseFloat(s.svg.node().getBBox().width)-k-d,l=m+_+2*u):(o=g+y/2-(2*u+k)/2,o=o>0?o:d,o=o+k<parseFloat(s.svg.node().getBBox().width)?o:parseFloat(s.svg.node().getBBox().width)-k-d,l=m-P-(S-u)),h=L(o,l),a.attr("transform","translate("+h.x+" , "+h.y+")")},e._showPointTooltip=function(i,s,n,a){var r,o,l,h,c=5,u=10,d=750,p=t.select(s),f=parseFloat(p.attr("cx")),g=parseFloat(p.attr("cy")),m=parseFloat(p.attr("r")),y=e._helpers.opacity(i,n,a),_=p.attr("stroke"),x=a._dropLineOrigin(),v=t.rgb(t.rgb(_).r+.6*(255-t.rgb(_).r),t.rgb(_).g+.6*(255-t.rgb(_).g),t.rgb(_).b+.6*(255-t.rgb(_).b)),b=t.rgb(t.rgb(_).r+.8*(255-t.rgb(_).r),t.rgb(_).g+.8*(255-t.rgb(_).g),t.rgb(_).b+.8*(255-t.rgb(_).b)),C=0,F=0,w=0,P=a.getTooltipText(i);null!==n._tooltipGroup&&void 0!==n._tooltipGroup&&n._tooltipGroup.remove(),n._tooltipGroup=n.svg.append("g"),n._tooltipGroup.append("circle").attr("cx",f).attr("cy",g).attr("r",m).call(function(){n.noFormats||this.attr("opacity",0).style("fill","none").style("stroke",_).style("stroke-width",1)}).transition().duration(d/2).ease("linear").attr("r",m+a.lineWeight+2).call(function(){n.noFormats||this.attr("opacity",1).style("stroke-width",2)}),null!==x.y&&n._tooltipGroup.append("line").attr("class","dimple-tooltip-dropline "+n.customClassList.tooltipDropLine).attr("x1",f).attr("y1",g<x.y?g+m+a.lineWeight+2:g-m-a.lineWeight-2).attr("x2",f).attr("y2",g<x.y?g+m+a.lineWeight+2:g-m-a.lineWeight-2).call(function(){n.noFormats||this.style("fill","none").style("stroke",_).style("stroke-width",2).style("stroke-dasharray","3, 3").style("opacity",y)}).transition().delay(d/2).duration(d/2).ease("linear").attr("y2",g<x.y?x.y-1:x.y+1),null!==x.x&&n._tooltipGroup.append("line").attr("class","dimple-tooltip-dropline "+n.customClassList.tooltipDropLine).attr("x1",f<x.x?f+m+a.lineWeight+2:f-m-a.lineWeight-2).attr("y1",g).attr("x2",f<x.x?f+m+a.lineWeight+2:f-m-a.lineWeight-2).attr("y2",g).call(function(){n.noFormats||this.style("fill","none").style("stroke",_).style("stroke-width",2).style("stroke-dasharray","3, 3").style("opacity",y)}).transition().delay(d/2).duration(d/2).ease("linear").attr("x2",f<x.x?x.x-1:x.x+1),r=n._tooltipGroup.append("g"),o=r.append("rect").attr("class","dimple-tooltip "+n.customClassList.tooltipBox),r.selectAll(".dont-select-any").data(P).enter().append("text").attr("class","dimple-tooltip "+n.customClassList.tooltipLabel).text(function(t){return t}).call(function(){n.noFormats||this.style("font-family",a.tooltipFontFamily).style("font-size",a._getTooltipFontSize())}),r.each(function(){F=this.getBBox().width>F?this.getBBox().width:F,w=this.getBBox().width>w?this.getBBox().height:w}),r.selectAll("text").attr("x",0).attr("y",function(){return C+=this.getBBox().height,C-this.getBBox().height/2}),o.attr("x",-c).attr("y",-c).attr("height",Math.floor(C+c)-.5).attr("width",F+2*c).attr("rx",5).attr("ry",5).call(function(){n.noFormats||this.style("fill",b).style("stroke",v).style("stroke-width",2).style("opacity",.95)}),f+m+c+u+F<parseFloat(n.svg.node().getBBox().width)?(l=f+m+c+u,h=g-(C-(w-c))/2):f-m-(c+u+F)>0?(l=f-m-(c+u+F),h=g-(C-(w-c))/2):g+m+C+u+c<parseFloat(n.svg.node().getBBox().height)?(l=f-(2*c+F)/2,l=l>0?l:u,l=l+F<parseFloat(n.svg.node().getBBox().width)?l:parseFloat(n.svg.node().getBBox().width)-F-u,h=g+m+2*c):(l=f-(2*c+F)/2,l=l>0?l:u,l=l+F<parseFloat(n.svg.node().getBBox().width)?l:parseFloat(n.svg.node().getBBox().width)-F-u,h=g-C-(w-c)),r.attr("transform","translate("+l+" , "+h+")")},e.filterData=function(t,e,i){var s=t;return null!==e&&null!==i&&(null!==i&&void 0!==i&&(i=[].concat(i)),s=[],t.forEach(function(t){null===t[e]?s.push(t):i.indexOf([].concat(t[e]).join("/"))>-1&&s.push(t)},this)),s},e.getUniqueValues=function(t,e){var i=[];return null!==e&&void 0!==e&&(e=[].concat(e),t.forEach(function(t){var s="";e.forEach(function(e,i){i>0&&(s+="/"),s+=t[e]},this),-1===i.indexOf(s)&&i.push(s)},this)),i},e.newSvg=function(e,i,s){var n=null;if((null===e||void 0===e)&&(e="body"),n=t.select(e),n.empty())throw"The '"+e+"' selector did not match any elements.  Please prefix with '#' to select by id or '.' to select by class";return n.append("svg").attr("width",i).attr("height",s)},e}),angular.module("uninsuredSubapp",[]).controller("uninsuredSubappCtrl",["$scope","$http","$timeout",function(t,e,i){t.selectedScenario="Bad Flu",t.toggleScenario=function(e){window.tagEvent("toggle scenario",{name:e}),t.selectedScenario=e}}]).directive("counter",["$timeout",function(t){return{restrict:"A",link:function(t,e,i){var s=_.max(_.map(t.planSelected.scenarios,function(t){return t.costs.medcost+t.costs.drugcost})),n=d3.scale.linear().domain([0,.5,1]).range(["#2ca02c","#ff7f0e","#ce2627"]),a=function(){return new ProgressBar.Circle($(e)[0],{strokeWidth:10,trailWidth:10,trailColor:"#eee",duration:2e3,easing:"easeInOut",text:{value:"$0"}})},r=a();t.$watch("selectedScenario",function(e){if(e){var a=t.planSelected.scenarios[e].costs;r.animate((a.medcost+a.drugcost)/s,{step:function(t,e){e.text.innerHTML='<div class = "text-center">'+i.name+' <br style="line-height:0px;"><h3 style = "font-weight:300;">$'+(e.value()*s).toFixed(0)+'<span class = "h4" style ="font-weight:300;">/yr</span></h3></div>',e.path.setAttribute("stroke",n(e.value()))}})}})}}}]),angular.module("healthcostSubapp",["ngRoute","rzModule"]).controller("healthcostSubappCtrl",["$scope","$http","$timeout","healthcostFactory","HEALTHCOST_CONSTANTS","$location",function(t,e,i,s,n,a){t.healthcostSlider={model:50,ceil:100,floor:0},t.healthcostHover=null,t.heathcostEdit=null,t.DEFINITIONS=n.DEFINITIONS,s.setState(t.urlParams.state),t.urlParams.profile&&+t.urlParams.profile.healthSlider&&(t.healthcostSlider.model=+t.urlParams.profile.healthSlider),t.custom=_.object(_.map(_.keys(n.KEYS),function(t){return[t,""]})),t.$watch("custom",function(t){s.setCustom(t)},!0),t.$watch("profile.persons",function(t){_rawPersons=_.map(_.map(t,_.clone),function(t){return t.age=t.age>65?65:t.age,t.age<=20&&(t.age=20),t}),s.setPersons(_rawPersons)},!0);var r=function(t){return t/100};t.$watch(function(){return a.hash()},function(e){"health"==e&&i(function(){t.$broadcast("rzSliderForceRender")},80),s.setHealthFactor(r(t.healthcostSlider.model)),s.cal()}),t.$watch("healthcostSlider.model",function(e){s.setHealthFactor(r(e)),t.profile.healthSlider=e,s.cal()}),t.useEstimate=function(){s.cal()},t.useDefault=function(e){t.custom[e]="",s.cal()},t.$watch(function(){return s.getHealthcost()},function(e){t.healthcost=e,t.profile.healthcost=s.getParsedcost()})}]).factory("healthcostFactory",["$http","HEALTHCOST_CONSTANTS",function(t,e){var i=null,s=null,n=null,a=null,r=null,o=null,l=null,h={};return h.cal=function(){var t=_.sortBy(_.map(e.PERCENTILE,function(t,e){return[e,t]}),function(t){return Math.abs(n-t[1])}),i=_.map(e.COSTS,function(i,s){return personCosts=_.map(o,function(s){return.11>n?0:(y1=i[t[0][0]],y2=i[t[1][0]],x1=t[0][1],x2=t[1][1],m=(y1-y2)/(x1-x2),_.max([0,(y1+m*(n-x1))*e.STATES[_state]*e.AGE[s.age]]))}),totalCosts=_.reduce(personCosts,function(t,e){return t+e}),a&&""!=a[s]&&(totalCosts=parseInt(a[s].substring(1))),{key:s,value:totalCosts}});s={components:i,total:_.reduce(_.pluck(i,"value"),function(t,e){return t+e})},l={},_.map(i,function(t){var i=e.KEYS[t.key];$.isArray(i)?_.map(i,function(e){l[e]=Math.round(t.value/i.length)}):l[i]=Math.round(t.value)})},h.getResults=function(){return r},h.getHealthcost=function(){return s},h.getParsedcost=function(){return l},h.setPlansFactory=function(t){i=t},h.setPersons=function(t){o=t},h.setCustom=function(t){a=t},h.setState=function(t){_state=t},h.setHealthFactor=function(t){n=t},h}]).directive("healthcostAccordion",function(){return{restrict:"A",link:function(t,e,i){$(e).next().on("show.bs.collapse",function(){$(e).find(".pull-right").hide()}).on("hide.bs.collapse",function(){$(e).find(".pull-right").show()})}}}).directive("inputmask",function(){return{restrict:"A",link:function(t,e,i){$(e).inputmask(t.$eval("{"+i.inputmask+"}"))}}}).value("HEALTHCOST_CONSTANTS",{PERCENTILE:[0,.178,.2131,.2449,.2747,.3023,.328,.3519,.3738,.3942,.4131,.4308,.4474,.4631,.478,.4921,.5054,.518,.53,.5415,.5525,.5629,.573,.5826,.592,.6009,.6095,.6178,.6257,.6335,.6409,.6481,.6549,.6616,.6681,.6744,.6804,.6862,.6918,.6973,.7027,.7078,.7128,.7176,.7224,.727,.7314,.7357,.74,.7441,.7481,.7521,.7559,.7596,.7632,.7667,.7702,.7735,.7768,.78,.7831,.7861,.7891,.792,.7948,.8198,.8641,.9144,.9413,.9569,.9667,.9734,.9782,.9816,.9844,.9951],COSTS:{"Primary Visits":[0,49.4538,76.3407,102.5038,124.2062,144.2154,161.252,174.5025,188.662,200.1068,210.6947,220.0671,226.3018,234.0591,239.9032,246.7145,250.8484,256.6648,264.4775,265.4005,272.3611,275.028,277.6096,280.5428,282.737,288.7977,293.5395,295.9921,298.2618,302.0081,304.6855,308.3947,311.4453,314.2498,317.3484,321.5979,324.4034,327.0138,328.1545,327.2365,327.3965,333.3365,341.4081,339.5008,338.0022,341.8792,342.2981,346.6998,347.9817,347.5274,348.5683,350.8383,357.2492,351.3467,358.3737,360.9306,358.7832,363.5156,361.8649,368.7035,369.6101,365.7936,369.3415,371.5876,374.2103,379.6355,397.2566,410.6176,424.833,450.9254,470.7023,490.0695,512.8181,543.9409,527.9296,584.6467],"Specialist Visits":[0,15.8021,27.4327,36.2079,44.9915,53.4251,61.6052,69.7808,77.6089,85.8637,93.2702,100.7646,106.9145,113.0367,119.7233,125.2929,132.3791,137.7498,142.9593,148.8272,152.9782,160.1669,166.1739,164.5855,170.5018,177.241,179.8019,185.9462,187.9247,194.2222,197.0366,202.7223,207.2347,213.3576,216.4901,218.7731,222.4158,230.7394,229.9338,234.7854,245.3813,242.4497,246.2472,249.1779,253.1394,252.7729,264.6411,265.528,266.3362,272.27,281.5382,280.4749,281.451,285.5311,293.984,287.5958,290.6799,298.4301,302.2678,304.2815,306.5893,315.2097,310.4776,317.756,325.9199,337.6398,381.031,436.1684,494.1655,564.8966,637.4668,705.8823,765.4402,840.5971,928.0429,1249.334],Emergency:[0,.4745,2.2635,5.8572,10.3174,15.965,22.5998,29.0313,38.0917,47.0007,55.494,65.6503,75.0033,83.5249,91.0573,100.7943,112.5841,119.6649,127.8207,138.0759,149.737,154.5803,165.5565,171.9032,183.5146,193.1062,202.7061,215.6296,219.2404,233.6666,246.3075,248.3661,253.9298,266.7122,272.1845,280.7525,284.9965,301.9602,315.0419,316.0405,331.1226,335.9852,347.7427,365.4044,360.6892,372.6741,384.4849,377.3535,411.7445,419.6603,418.102,432.8712,445.0092,448.007,446.8865,457.7156,467.7805,497.1733,503.7151,507.5712,529.1958,528.2516,538.7832,533.8281,559.8638,602.6296,745.3396,973.6616,1259.005,1531.2481,1774.3138,1913.916,2041.909,2255.7404,2237.0141,2507.6463],"Generic Drugs":[0,21.0757,31.3214,43.2162,55.7808,69.1137,84.06,98.8916,112.2548,125.8597,138.9918,150.2813,160.8417,171.2687,179.8266,189.5316,199.6906,209.4989,219.2319,227.0556,233.1293,241.1218,249.1678,253.9078,260.4124,267.1761,271.4697,276.6482,285.2642,292.3144,291.1557,293.9399,301.9997,303.1889,311.6492,311.2229,311.6258,322.2515,323.4313,326.059,326.1133,333.4162,339.9749,336.6504,343.5131,349.1604,349.7428,358.8817,340.0179,351.0943,349.0668,359.3362,358.3971,371.7198,356.9521,368.9452,365.6737,361.3587,366.5339,370.2748,374.0622,368.2237,379.0537,381.1982,394.8966,389.1591,405.4817,430.6606,464.8106,515.1149,557.2011,596.1779,636.2604,653.0487,715.2608,792.6096],"Brand Drugs":[0,4.4423,8.8291,15.3045,22.277,30.4136,40.6213,51.8966,65.5417,80.7381,97.5456,116.48,142.7806,164.4582,194.2552,215.954,239.3915,262.7765,286.8947,308.7211,336.8555,359.2905,385.5394,412.4816,435.1972,466.4179,493.6366,516.2833,546.903,575.2036,593.9675,632.1304,654.8802,682.4202,707.1662,735.4619,758.7025,770.8716,808.4797,833.6858,837.8223,873.7914,883.015,926.7747,950.5282,982.4286,999.8753,1024.9485,1042.7914,1076.8201,1094.1533,1127.5546,1136.3544,1179.7888,1186.6736,1235.9856,1249.2318,1264.435,1273.8213,1308.5126,1345.8127,1356.6867,1375.9043,1438.521,1425.8416,1541.2047,1854.0965,2257.4198,2568.4463,2892.8048,3363.9943,3726.8558,3923.2838,4104.2455,4220.6661,4456.2383],"Lab Tests & Imaging":[0,7.5,17.2468,29.7627,41.7229,54.3231,67.4693,81.0787,94.9944,110.3684,124.8458,137.0574,150.2498,163.4919,174.26,186.5585,196.6611,210.172,220.9016,232.643,245.1898,255.6925,262.2367,273.7883,283.61170000000004,293.55920000000003,300.7637,311.98929999999996,319.52959999999996,327.8713,342.73699999999997,348.84799999999996,359.5904,375.7185,378.2492,387.2627,395.0588,408.0547,412.228,426.7348,441.6537,443.769,452.4871,461.94579999999996,469.04859999999996,475.4235,477.99559999999997,502.7163,506.8478,512.409,522.6363,530.1034,538.9307,533.4899,556.0533,561.1116999999999,575.8874000000001,572.1243,588.5206000000001,603.5378000000001,610.1509,609.7442,614.5205000000001,623.2659,632.9005,678.2843,805.9721999999999,1022.2777,1323.6486,1643.3491,1907.4382,2117.6429,2339.6822,2588.1062,2785.4191,4324.503500000001],"Preventive Care":[0,17.8889,28.9223,42.327,57.0063,71.527,86.239,100.0676,111.2723,120.7065,130.1568,137.448,144.887,152.6814,158.1576,165.8601,173.0643,179.5426,187.5843,193.0891,204.4094,211.8721,220.3244,231.3429,237.4387,243.5526,256.6486,259.2762,267.2755,274.7,285.4871,293.063,296.3507,303.8848,307.7132,318.5106,320.2809,330.6141,330.2088,329.815,342.8752,351.2992,351.1774,356.4717,360.0367,359.3344,362.1783,375.5191,371.6404,380.0976,373.2121,382.5778,389.9611,383.218,398.22,397.4342,411.8161,397.5081,416.5438,407.6761,396.948,413.0578,417.184,405.4901,415.7294,420.0731,440.1533,453.856,462.958,485.8835,492.4253,508.7005,526.8956,527.061,538.2795,548.7049],"In Patient Care":[0,0,0,0,0,.0811,.0207,.1286,.0483,.1896,.2216,.3141,.5953,.9154,1.0191,1.2958,2.0647,2.6201,3.1044,3.6921,4.706,6.2175,7.796,8.1943,11.1302,11.6575,13.632,17.195,17.0636,18.0037,18.8625,22.3451,23.8181,23.973,28.7719,29.7581,32.2966,35.3209,36.0458,41.0047,40.2346,44.5056,44.6011,46.5825,50.034,54.1438,55.7745,56.0692,59.1447,57.6328,61.1126,64.8317,67.2041,64.7223,65.4281,71.2672,73.8316,70.3062,76.2939,76.7068,69.9939,79.4701,74.9164,86.7952,82.3685,108.0071,257.641,1201.8871,3026.3166,4707.7291,6436.8837,8449.1942,10956.0021,13634.0972,16695.0507,27236.079],"Out Patient Care":[0,22.1025,36.6107,46.9204,58.9817,69.4044,81.1243,93.2181,105.1547,115.4449,127.9966,137.9648,150.2111,162.8487,173.4187,180.6407,192.3196,204.356,214.1422,224.6603,234.7424,244.8433,256.3992,269.8896,280.5036,290.3507,297.4218,310.402,321.525,333.3185,344.6483,352.934,362.3896,378.2154,383.0368,405.8149,415.9897,424.5677,438.9185,458.2908,471.5181,482.1169,495.4185,505.359,526.293,533.9047,548.2004,558.6113,581.9854,596.6223,611.7091,612.9059,637.6578,646.7905,676.3576,676.5292,696.4262,709.9175,725.3598,737.3296,753.3535,765.6066,794.5198,794.015,829.2868,900.5458,1165.5431,1688.4361,2350.9254,2908.3214,3386.6268,3733.1116,4224.1272,4695.8999,5078.7971,7237.8064]},DEFINITIONS:{"Primary Visits":"These are visits to your primary care doctor for basic health needs. If required, your primary care doctor can also refer you to specialists.","Specialist Visits":"These are visits to doctors who specialize in specific medical services. Some examples include cardiologists, gastroenterologists and paediaricians.",Emergency:"Emergencies may happen but you probably can't predict this.","Brand Drugs":"These are drugs with brand name and usually costs more than generic drugs.","Generic Drugs":"These are cheaper versions of brand drugs and usually have similar medical effects as brand ones.","Lab Tests & Imaging":"Examples include blood tests, X-rays and CT scans.","Preventive Care":"Examples include health checkups and vaccinations that can help you stay healthy.","In Patient Care":"These include hospital stay and surgery fees.","Out Patient Care":"These are medical procedures that can be done in a medical center without an overnight stay."},KEYS:{"Brand Drugs":44,"Generic Drugs":18,"In Patient Care":[26,27],"Lab Tests & Imaging":[28,68],"Out Patient Care":[41,43],"Preventive Care":46,"Primary Visits":47,"Specialist Visits":59,Emergency:[15,16]},COLORS:{"Brand Drugs":"#ff7f0e","Generic Drugs":"#2ca02c","In Patient Care":"#bcbd22","Lab Tests & Imaging":"#d62728","Out Patient Care":"#9467bd","Preventive Care":"#8c564b","Primary Visits":"#1f77b4","Specialist Visits":"#e377c2",Emergency:"#7f7f7f"},STATES:{
FL:1.1151,GA:.9434,MO:.9755,NC:1.3,OH:1.0528,PA:1.033,TX:1.0368,VA:1.1028,CA:1.1028,AZ:.9432,IL:1.033,OR:.9434},AGE:{20:.3556,21:.4299,22:.4699,23:.5019,24:.5599,25:.5621,26:.5734,27:.5868,28:.6086,29:.6265,30:.6355,31:.6489,32:.6624,33:.6708,34:.6797,35:.6842,36:.6887,37:.6932,38:.6977,39:.7066,40:.7156,41:.729,42:.7419,43:.7598,44:.7822,45:.8085,46:.8399,47:.8751,48:.9154,49:.9552,50:1,51:1.0442,52:1.093,53:1.1422,54:1.1954,55:1.2486,56:1.3063,57:1.3645,58:1.4266,59:1.4575,60:1.5196,61:1.5733,62:1.6086,63:1.6529,64:1.6797,65:1.6797}}),$("<img/>").attr("src","/img/hero.png"),$(function(){if("/"==window.location.pathname||"/index.html"==window.location.pathname){$(".navbar.navbar-default").removeClass("navbar-fixed-top navbar-small").addClass("navbar-top"),$(".carousel-features>li").on("click",function(){$("#carousel-content").carousel($(this).index())}),$("#carousel-content").on("slide.bs.carousel",function(t){var e=$(t.relatedTarget).find("video"),i=$("#carousel-content").find("video").index(e),s=$(".carousel-features>li");s.removeClass("active"),$(s[0>i?s.length+i:i]).addClass("active"),e.get(0).pause(),e.get(0).currentTime=0}),$("#carousel-content").on("slid.bs.carousel",function(t){var e=$(".active",t.target).find("video");e.get(0).play()});var t=function(t){return{element:t[0],handler:function(e){$(".ribbon-hero")==t,$(".ribbon-hero").is(":visible")==$(".ribbon-hero").is(t)&&("down"==e?($(".navbar").removeClass("navbar-top"),$(".navbar").addClass("navbar-scroll navbar-fixed-top")):($(".navbar").removeClass("navbar-scroll navbar-fixed-top"),$(".navbar").addClass("navbar-top")))},offset:55}};new Waypoint(t($(".ribbon-hero"))),new Waypoint(t($("section.hero").next()))}}),angular.module("staticApp",["ngAnimate"]).controller("staticCtrl",["$scope","$http","$timeout","$interval",function(t,e,i,s){function n(t){var e=new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);return e.test(t)}t.templateIndex=0,t.email={val:""},t.next=function(){if(0==t.templateIndex){var e=s(function(){var i=t.location;i&&3==i.length&&(window.tagEvent("zip try"),["TX","FL","GA","VA","IL","MO","PA","OH","NC","AZ","OR"].indexOf(i[2])>-1?(s.cancel(e),window.location="/info.html?zip="+i[0]+"&fip="+i[1]+"&state="+i[2]):(window.recordZipcode(i[0],i[2],!1,!1),t.templateIndex++,s.cancel(e)))},100);i(function(){s.cancel(e)},2e3)}else if(1==t.templateIndex){var a=t.location;n(t.email.val)&&(window.updateUser("signup out-state",t.email.val,{zip:a[0],state:a[2],fip:a[1]}),t.templateIndex++)}else t.templateIndex=0}}]).directive("customZip",["$http","$timeout",function(t,e){return{restrict:"A",link:function(i,s,n){var a=$(s).next(".dropdown-menu.inner"),r="",o={};$(s).keyup(function(e){var n=$(this).val();r!=n&&(r=n,o={},a.empty(),String(n).length>0&&!+n&&0!==+n&&$(s).parent().find(".status").show(),(String(n).length<5&&+n||0==String(n).length)&&$(s).parent().find(".status").hide(),String(n).length>=5&&+n&&t.get("https://honeyinsured.com/zip/"+String(n).slice(0,5)).then(function(t){var e=t.data.counties;if(_.map(e,function(t){t.name=t.zipcode+", "+t.name+", "+t.state}),1==e.length){var n=e[0];$(s).val(n.name),i.$parent.location=[n.zipcode,n.fips,n.state],$(s).parent().parent().parent().find(".btn-orange.btn-lg").focus()}else e.length>1&&_.map(e,function(t,e){o[t.name]=[t.zipcode,t.fips,t.state],a.append('<li class="'+(0==e?"dropdown-hover":"")+'"><a href="">'+t.name+"</a></li>")})},function(t){$(s).parent().find(".status").show()}))});var l=function(){if(0!=a.find("li").length){var t=a.find("li.dropdown-hover").text();i.$parent.location=o[t],$(s).val(t),a.empty(),$(s).parent().parent().parent().find(".btn-orange.btn-lg").focus()}};$(s).keydown(function(t){var e=a.find("li");if(0!=e.length){var i=e.index(a.find("li.dropdown-hover"));38==t.which?(e.removeClass("dropdown-hover"),$(e[i-1>=0?i-1:i-1+e.length]).addClass("dropdown-hover"),t.preventDefault()):40==t.which?(e.removeClass("dropdown-hover"),$(e[(i+1)%e.length]).addClass("dropdown-hover"),t.preventDefault()):13==t.which&&(l(),t.preventDefault())}}),a.mouseover("li",function(t){a.find("li").removeClass("dropdown-hover");var e=$(t.target);!$(t.target).is("li")&&(e=e.parent()),e.addClass("dropdown-hover")}),a.click("li",function(t){l(),t.preventDefault()}),$(s).focus(function(){$(s).val(""),i.$parent.location=[]}),$(s).blur(function(){e(function(){var t=$(s).val().split(", ");5!=$(s).val().length&&(t.length<2||2!=_.last(t).trim().length)&&($(s).val(""),i.$parent.location=[],a.empty(),$(s).parent().find(".status").hide())},200)})}}}]),$(function(){var t,e,i=function(){return new Waypoint({element:document.getElementById("banner-bottom"),wrapper:!1,handler:function(t){"down"==t?($("#quotes-banner").removeClass("stuck"),$("#quotes-banner-placeholder").hide()):($("#quotes-banner").addClass("stuck"),$("#quotes-banner-placeholder").height($("#quotes-banner").outerHeight()).show())},offset:132})},s=function(){return new Waypoint({element:document.getElementById("quotes-banner"),wrapper:!1,handler:function(t){"down"==t?($("#quotes-banner").addClass("stuck"),$("#quotes-banner-placeholder").height($("#quotes-banner").outerHeight()).show()):($("#quotes-banner").removeClass("stuck"),$("#quotes-banner-placeholder").hide())},offset:function(){return 55}})},n=function(){!e&&(e=s()),!t&&(t=i())};n(),$(window).resize(function(){n()})}),$(function(){{var t=[{label:"Eligible for Lower Prices",value:87,color:"#B1D577"},{label:"Paying the Full Price",value:13,color:"#FB8072"}],e=$("#subsidiesChart").width(),i=$("#subsidiesChart").height();new d3pie("subsidiesChart",{header:{},footer:{color:"#999999",fontSize:10,font:"Lato",location:"bottom-left"},size:{canvasHeight:i,canvasWidth:e,pieOuterRadius:"60%"},data:{sortOrder:"value-desc",content:t},labels:{outer:{pieDistance:8},inner:{hideWhenLessThanPercentage:5},mainLabel:{color:"#555555",fontSize:12},percentage:{color:"#555555",decimalPlaces:0,fontSize:12},value:{color:"#adadad",fontSize:12},lines:{enabled:!0},truncation:{enabled:!1}},effects:{pullOutSegmentOnClick:{effect:"none",speed:400,size:8},highlightSegmentOnMouseover:!1,highlightLuminosity:-.5},tooltips:{enabled:!1,type:"placeholder",string:"{label}: {value}%",styles:{backgroundColor:"#ffffff",backgroundOpacity:.8,color:"#555555",borderRadius:3,fontSize:12}}})}}),angular.module("guideApp",["staticApp","utilsApp","uninsuredSubapp","ngAnimate","healthcostSubapp"]).controller("guideCtrl",["$scope","$http","$timeout","CONSTANTS","healthcostFactory",function(t,e,i,s,n){t.CONSTANTS=s,t.planSelected={scenarios:s.SCENARIOS},t.healthcostSlider={model:50,ceil:100,floor:0},n.setState("TX"),n.setPersons([{age:32}]);var a=function(t){return t/100};t.$watch("healthcostSlider.model",function(t){n.setHealthFactor(a(t)),n.cal()}),t.$watch(function(){return n.getHealthcost()},function(e){t.healthcost=e})}]).value("CONSTANTS",{SCENARIOS:{"Bad Flu":{icon:"flu",costs:{medcost:85,drugcost:0},totalcost:187},Stroke:{icon:"stroke",costs:{medcost:5e3,drugcost:0},totalcost:49974},Depression:{icon:"depression",costs:{medcost:1225,drugcost:0},totalcost:6843},"Broken limb":{icon:"limb",costs:{medcost:626,drugcost:0},totalcost:1866},Baby:{icon:"baby",costs:{medcost:325,drugcost:0},totalcost:14515},Concussion:{icon:"concussion",costs:{medcost:915,drugcost:0},totalcost:3940},"Heart Attack":{icon:"heart",costs:{medcost:5e3,drugcost:0},totalcost:67081},Cancer:{icon:"cancer",costs:{medcost:5e3,drugcost:0},totalcost:109901}}}),$(function(){generateCharts()}),generateCharts=function(){function t(t,e){l&&l.destroy();var i=0;_.map(t,function(t,e){return[t,e]});var s=_.map(t,function(t,e){return{label:e,value:t,color:COLORS[i++]}});pieWidth=$("#pieChart").width(),pieHeight=$("#pieChart").height(),l=new d3pie("pieChart",{header:{title:{text:e+" - Market share of insurance carriers",color:"#555555",fontSize:14,font:"Lato"},subtitle:{color:"#999999",fontSize:12,font:"Lato"},titleSubtitlePadding:9},footer:{color:"#999999",fontSize:10,font:"Lato",location:"bottom-left"},size:{canvasHeight:pieHeight,canvasWidth:pieWidth,pieOuterRadius:"60%"},data:{sortOrder:"value-desc",content:s},labels:{outer:{pieDistance:16},inner:{hideWhenLessThanPercentage:5},mainLabel:{color:"#555555",fontSize:10},percentage:{color:"#555555",decimalPlaces:0},value:{color:"#adadad",fontSize:10},lines:{enabled:!0},truncation:{enabled:!0}},effects:{pullOutSegmentOnClick:{effect:"none",speed:400,size:8},highlightSegmentOnMouseover:!1,highlightLuminosity:-.5},tooltips:{enabled:!0,type:"placeholder",string:"{label}: {value}%",styles:{backgroundColor:"#ffffff",backgroundOpacity:.8,color:"#555555",borderRadius:3,fontSize:11}}})}var e=dimple.newSvg("#barChart","100%","100%"),i=new dimple.chart(e,[{size:"Largest State Issuers",prem:23.9},{size:"Other Issuers",prem:13.7}]);i.setMargins(70,30,30,20);var s=i.addCategoryAxis("x",["size"]);s.title="";var n=i.addMeasureAxis("y","prem");n.title="Premium Increase from '14 to '15 (%)",n.fontSize=11,s.fontSize=11;var a=i.addSeries(["prem","size"],dimple.plot.bar);n.ticks=4,a.tooltipFontSize=12,a.tooltipFontFamily=s.fontFamily=n.fontFamily="Lato",a.getTooltipText=function(t){return[t.aggField[1],"Premium Increase: "+t.aggField[0]+"%"]},i.draw();var r={};_.map(MARKET,function(t,e){r[e]={fillKey:"hasData",numCarriers:_.size(t)}});var o=new Datamap({scope:"usa",element:document.getElementById("map_election"),geographyConfig:{highlightFillColor:function(t){return"fillKey"in t?"#f79824":"#d4d4d4"},highlightBorderColor:"#ffffff",popupTemplate:function(t,e){return void 0!=e?'<div class="hoverinfo">'+t.properties.name+"<br>Number of carriers: "+e.numCarriers+" ":void 0},highlightBorderWidth:1},fills:{hasData:"#A9C0DE",defaultFill:"#d4d4d4"},data:r,done:function(e){e.svg.selectAll(".datamaps-subunit").on("click",function(e){var i=e.id;i in MARKET&&t(MARKET[i],i)})}});o.labels();var l;t(MARKET.NC,"NC")},MARKET={DE:{"Aetna Life Incurance Company":8.86,"Highmark BCBSD, Inc.":82.28,"Aetna Health Inc.":8.86},WI:{"Group Health of Cooperative- SCW":.79,"Unity Health Plans Insurance Corporation":4.71,"Molina Healthcare of Wisconsin, Inc":11.63,"Common Ground Healthcare Cooperative":14.54,"Medica Health Plans of Wisconsin":3.02,"MercyCare HMO, Inc.":.49,"Compcare Health Services Insurance Corporation":16.37,"Health Tradition Health Plan":1.68,"Dean Health Plan":12.74,"All Savers Insurance Company":4.28,"WPS Health Plan, Inc":7.6,"Physicians Plus Insurance Corporation":.37,"Managed Health Services Insurance Corporation":1.84,"Security Health Plan":17.31,"Gundersen Health Plan, Inc.":2.63},WV:{"Highmark BCBSWV, Inc.":100},FL:{"Sunshine State Health Plan":.8,"Coventry Health Care of Florida, Inc.":19.34,"Preferred Medical Plan,Inc":12.18,"Molina Healthcare of Florida, Inc":1.77,"Cigna Health and Life Insurance Company":7.15,"Aetna Health Inc.":1.99,"Health First Health Plans, Inc.":.31,"Health First Insurance, Inc.":.17,"Blue Cross Blue Shield of Florida":23.9,"Humana Medical Plan, Inc.":16.63,"UnitedHealthcare of Florida, Inc.":3.3,"Time Insurance Company":4.18,"Health Options, Inc.":7.9,"FLORIDA HEALTH CARE PLAN, INC.":.39},WY:{"WINhealth Partners Inc":57.7,"Blue Cross Blue Shield Wyoming":42.3},NH:{"Maine Community Health Options":10.02,"Matthew Thornton Health Plan, Inc.":56.56,"Time Insurance Company":9.12,"Minuteman Health, Inc.":19.35,"Harvard Pilgrim Health Care of New England":4.95},NJ:{"Oscar Insurance Corporation of New Jersey":1.1,"AmeriHealth HMO, Inc.":15.76,"Health Republic Insurance of New Jersey":3.66,"Oxford Health Plans (NJ), Inc.":.58,"AmeriHealth Ins Company of New Jersey":15.76,"Horizon Blue Cross Blue Shield of New Jersey":63.13},TX:{"SHA, LLC DBA FirstCare Health Plans":.25,"Aetna Life Insurance Company":2.04,"Valley Baptist Insurance Company dba Valley Baptist Health Plans":.77,"Humana Health Plan of Texas":9.3,"Community Health Choice, Inc.":.36,"Blue Cross Blue Shield of Texas":69.12,"Cigna Health and Life Insurance Company":5.99,"All Savers Insurance Company":2.99,"Superior Health Plan":1.08,"Community First Health Plans":.27,"Humana Insurance Company":2.06,"Molina Healthcare of Texas, Inc.":1.82,"Time Insurance Company":3.05,"Scott & White Health Plan":.91},LA:{"Louisiana Health Service & Indemnity Company":48.22,"UnitedHealthcare of Louisiana, Inc.":3.08,"Humana Health Benefit Plan of Louisiana, Inc.":4.84,"Louisiana Health Cooperative, Inc.":8.06,"Vantage Health Plan, Inc.":10.35,"HMO Louisiana, Inc.":25.45},NC:{"UnitedHealthcare of North Carolina, Inc.":3.63,"Blue Cross Blue Shield of NC":87.88,"Coventry Health Care of the Carolinas, Inc.":8.49},ND:{"Medica Health Plans":14.59,"Blue Cross Blue Shield of North Dakota":82.54,"Sanford Health Plan":2.86},NE:{"Time Insurance Company":7.1,"Blue Cross and Blue Shield of Nebraska":88.58,"CHC NE":4.31},TN:{"Humana Insurance Company":4.13,"Time Insurance Company":2.39,BCBST:92.43,"Cigna Health and Life Insurance Company":1.05},PA:{"Keystone Health Plan Central":.19,"Geisinger Health Plan":2.5,"Independence Blue Cross (QCC Ins. Co.)":15.11,"Aetna Health, Inc.":2.47,"Aetna Life Insurance Company":5.36,"Time Insurance Company":1.26,"UPMC Health Options, Inc.":8.12,HHIC:8,"Geisinger Quality Options":.48,"Capital Advantage Assurance Company":.33,"Keystone Health Plan East, Inc.":15.11,"HealthAmerica, Pennsylvania Inc.":2.91,Highmark:32.33,"First Priority Life Insurance Company":5.77,"UnitedHealthcare of Pennsylvania, Inc.":.06},VA:{"BlueChoice, Inc.":9.05,"Aetna Life Insurance Company":2.96,"Piedmont Community HealthCare, Inc.":1.25,"Optima Health Plan":6.02,"HealthKeepers, Inc.":61.2,"GHMSI, Inc.":2.16,"Kaiser Foundation Health Plan of the Mid-Atlantic States, Inc.":5.06,"Coventry Health Care of Virginia, Inc":6.28,"Innovation Health Insurance Company":6.03},AK:{"Premera Blue Shield Blue Cross":24.45,"Moda Health Plan, Inc.":75.55},AL:{"Humana Insurance Company":2.89,"Blue Cross and Blue Shield of Alabama":96.08,"UnitedHealthcare of Alabama":1.03},AR:{"QCA Health Plan, Inc.":4.55,"Celtic Insurance Company":18.28,"USAble Mutual Insurance Company":72.92,"QualChoice Life & Health Insurance Company, Inc.":4.25},IL:{"IlliniCare Health Plan":2.15,"UnitedHealthcare of the Midwest, Inc.":.86,"Blue Cross Blue Shield of Illinois":71.35,"Health Alliance Medical Plans":6.56,"Humana Health Plan, Inc.":1.36,"Coventry Health and Life Insurance Company":1.08,"Land of Lincoln Mutual Health Insurance Company":11.85,"Humana Insurance Company":.37,"Time Insurance Company":3.08,"Coventry Health Care of Illinois, Inc.":1.35},GA:{"UnitedHealthcare of Georgia, Inc.":1.96,"Blue Cross Blue Shield Healthcare Plan of Georgia, Inc.":28.33,"Peach State Health Plan":2.76,"Coventry Health Care of Georgia, Inc.":9.65,"Humana Employers Health Plan of Georgia, Inc.":49.06,"Kaiser Foundation Health Plan of Georgia":3.95,"Cigna Health and Life Insurance Company":.83,"Time Insurance Company":2.8,"Alliant Health Plans":.66},IN:{"Anthem Insurance Companies, Inc.":55.83,"Indiana University Health Plans, Inc.":.72,"Southeastern Indiana Health Organization, Inc.":.98,"CareSource Indiana Inc.":3.98,"MDwise Marketplace, Inc.":14.34,"All Savers Insurance Company":2.43,"Coordinated Care Corporation":6.06,"Time Insurance Company":8.97,"Physicians Health Plan of Northern IN":6.7},IA:{"Avera Health Plans, Inc.":.16,"CHC IA":99.18,"Gundersen Health Plan, Inc.":.65},AZ:{"Health Choice Insurance Co":.26,"Health Net of Arizona":13.84,"Aetna Life Insurance Company":1.1,"Time Insurance Company":6.55,"Health Net Life Insurance Company":10.84,"Phoenix Health Plans, Inc.":.26,"Cigna Health and Life Insurance Company":1.15,"Humana Health Plan, Inc.":1.73,"Compass Cooperative Health Plan, Inc. dba Meritus Health Partners":9.46,"All Savers Insurance Company":1.95,"Compass Cooperative Mutual Health Network, Inc. dba Meritus Mutual Health Partners":1.05,"University Healthcare, Inc.":7.72,"Blue Cross Blue Shield of Arizona":44.1},ME:{"Maine Community Health Options":61.09,"Harvard Pilgrim Health Care":4.3,"Anthem Health Plans of Maine, Inc.":34.61},OK:{"GlobalHealth, Inc":2.66,"Time Insurance Company":3.73,"CommunityCare HMO, Inc.":10.46,"Blue Cross Blue Shield of Oklahoma":83.15},OH:{"UnitedHealthcare of Ohio, Inc.":2.72,"Molina Healthcare of Ohio, Inc":1.48,"HealthSpan, Inc.":3.05,"Aetna Life Insurance Company":3.27,"Humana Health Plan of Ohio":4.79,"Community Insurance Company":17.86,"Coordinated Health Mutual, Inc.":4.54,"Medical Health Insuring Corp of Ohio":29.74,"Buckeye Community Health Plan":1.1,"HealthSpan Integrated Care":3.05,"Premier Health Plan, Inc.":.85,"Summa Insurance Company":2.77,"AultCare Insurance Company":2.18,"CareSource Ohio Co":19.39,"Time Insurance Company":2.33,"Paramount Insurance Company":.87},UT:{"Altius Health Plans Inc.":9.95,"BridgeSpan Health Utah":2.92,"Molina Healthcare of Utah, Inc.":9.7,SelectHealth:46.12,"Humana Medical Plan of Utah":9.37,"Arches Mutual Insurance Company":21.93},MO:{"Healthy Alliance Life Insurance Company":37.83,CHL:21.38,"Cigna Health and Life Insurance Company":5.52,"All Savers Insurance Company":3.34,"CHL MO":19.5,"Humana Insurance Company":3.66,"Blue Cross and Blue Shield of Kansas City":8.77},MI:{"Priority Health":1.8,"Blue Cross Blue Shield of Michigan":36.27,"Meridian Health Plan of Michigan":.09,"Priority Health Insurance Company":.22,"Humana Medical Plan of Michigan, Inc":9.15,"Total Health Care":3.9,"Consumers Mutual Insurance of Michigan":2.39,"Alliance Health & Life Insurance Company":.55,"McLaren Health Plan":1.62,"Physicians Health Plan":.45,"Molina Healthcare of Michigan, Inc":4.05,"Health Alliance Plan of Michigan":.95,"Harbor Health Plan, Inc.":.14,"UnitedHealthcare Community Plan, Inc.":.8,"Time Insurance Company":1.55,"Blue Care Network of Michigan":36.06},KS:{"Blue Cross and Blue Shield of Kansas City":8.66,"Coventry Health and Life":47.7,"Coventry Health Care Of Kansas Inc":12.28,"Blue Cross and Blue Shield of Kansas, Inc.":28.23,"BlueCross BlueShield Kansas Solutions, Inc.":3.14},MT:{"PacificSource Health Plan, Inc.":9.29,"Blue Cross Blue Shield of Montana":49.04,"Time Insurance Company":11.7,"Montana Health Cooperative":29.97},MS:{"United Healthcare of Mississippi":10.93,"Humana Insurance Company":51.89,"Magnolia Health Plan":37.18},SC:{"Time Insurance Company":2.87,"BlueCross BlueShield of South Carolina":42.81,"BlueChoice HealthPlan of South Carolina, Inc.":14.69,"Consumers' Choice Health Plan":29.02,"Coventry Health Care of the Carolinas, Inc.":10.62},SD:{"Sanford Health Plan of South Dakota":28.82,"Avera Health Plans, Inc.":22.16,"South Dakota State Medical Holding Company, Inc.":49.02}},STATES=["AZ","CO","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","MD","ME","MA","MN","MI","MS","MO","MT","NC","NE","NV","NH","NJ","NY","ND","NM","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","WI","VA","VT","WA","WV","WY","CA","CT","AK","AR","AL"],COLORS=["#80B1D3","#FB8072","#FDB462","#B3DE69","#FFED6F","#BC80BD","#8DD3C7","#CCEBC5","#FFFFB3","#BEBADA","#FCCDE5","#D9D9D9","#80B1D3","#FB8072","#FDB462","#B3DE69","#FFED6F","#BC80BD","#8DD3C7","#CCEBC5","#FFFFB3","#BEBADA","#FCCDE5","#D9D9D9","#80B1D3","#FB8072","#FDB462","#B3DE69","#FFED6F","#BC80BD","#8DD3C7","#CCEBC5","#FFFFB3","#BEBADA","#FCCDE5","#D9D9D9"];