angular.module("rzModule",[]).run(["$templateCache",function(e){"use strict";var t='<span class="rz-bar"></span><span class="rz-bar rz-selection"></span><span class="rz-pointer"></span><span class="rz-pointer"></span><span class="rz-bubble rz-limit"></span><span class="rz-bubble rz-limit"></span><span class="rz-bubble"></span><span class="rz-bubble"></span><span class="rz-bubble"></span>';e.put("rzSliderTpl.html",t)}]).value("throttle",function(e,t,i){"use strict";var n,r,a,o=Date.now||function(){return(new Date).getTime()},s=null,l=0;i=i||{};var u=function(){l=i.leading===!1?0:o(),s=null,a=e.apply(n,r),n=r=null};return function(){var c=o();l||i.leading!==!1||(l=c);var d=t-(c-l);return n=this,r=arguments,0>=d?(clearTimeout(s),s=null,l=c,a=e.apply(n,r),n=r=null):s||i.trailing===!1||(s=setTimeout(u,d)),a}}).factory("RzSlider",["$timeout","$document","$window","throttle",function(e,t,i,n){"use strict";var r=function(e,t,i){this.scope=e,this.attributes=i,this.sliderElem=t,this.range=void 0!==i.rzSliderHigh&&void 0!==i.rzSliderModel,this.handleHalfWidth=0,this.alwaysShowBar=!!i.rzSliderAlwaysShowBar,this.maxLeft=0,this.precision=0,this.step=0,this.tracking="",this.minValue=0,this.maxValue=0,this.hideLimitLabels=!!i.rzSliderHideLimitLabels,this.presentOnly="true"===i.rzSliderPresentOnly,this.valueRange=0,this.initHasRun=!1,this.customTrFn=this.scope.rzSliderTranslate()||function(e){return String(e)},this.deRegFuncs=[],this.fullBar=null,this.selBar=null,this.minH=null,this.maxH=null,this.flrLab=null,this.ceilLab=null,this.minLab=null,this.maxLab=null,this.cmbLab=null,this.init()};return r.prototype={init:function(){var t,r,a,o=angular.bind(this,this.calcViewDimensions),s=this;this.initElemHandles(),this.calcViewDimensions(),this.setMinAndMax(),this.precision=void 0===this.scope.rzSliderPrecision?0:+this.scope.rzSliderPrecision,this.step=void 0===this.scope.rzSliderStep?1:+this.scope.rzSliderStep,e(function(){s.updateCeilLab(),s.updateFloorLab(),s.initHandles(),s.presentOnly||s.bindEvents()}),a=this.scope.$on("reCalcViewDimensions",o),this.deRegFuncs.push(a),angular.element(i).on("resize",o),this.initHasRun=!0,t=n(function(){s.setMinAndMax(),s.updateLowHandle(s.valueToOffset(s.scope.rzSliderModel)),s.updateSelectionBar(),s.range&&s.updateCmbLabel()},350,{leading:!1}),r=n(function(){s.setMinAndMax(),s.updateHighHandle(s.valueToOffset(s.scope.rzSliderHigh)),s.updateSelectionBar(),s.updateCmbLabel()},350,{leading:!1}),this.scope.$on("rzSliderForceRender",function(){s.resetLabelsValue(),t(),s.range&&r(),s.resetSlider()}),a=this.scope.$watch("rzSliderModel",function(e,i){e!==i&&t()}),this.deRegFuncs.push(a),a=this.scope.$watch("rzSliderHigh",function(e,t){e!==t&&r()}),this.deRegFuncs.push(a),this.scope.$watch("rzSliderFloor",function(e,t){e!==t&&s.resetSlider()}),this.deRegFuncs.push(a),a=this.scope.$watch("rzSliderCeil",function(e,t){e!==t&&s.resetSlider()}),this.deRegFuncs.push(a),this.scope.$on("$destroy",function(){s.minH.off(),s.maxH.off(),angular.element(i).off("resize",o),s.deRegFuncs.map(function(e){e()})})},resetSlider:function(){this.setMinAndMax(),this.calcViewDimensions(),this.updateCeilLab(),this.updateFloorLab()},resetLabelsValue:function(){this.minLab.rzsv=void 0,this.maxLab.rzsv=void 0},initHandles:function(){this.updateLowHandle(this.valueToOffset(this.scope.rzSliderModel)),this.range&&(this.updateHighHandle(this.valueToOffset(this.scope.rzSliderHigh)),this.updateCmbLabel()),this.updateSelectionBar()},translateFn:function(e,t,i){i=void 0===i?!0:i;var n=String(i?this.customTrFn(e):e),r=!1;(void 0===t.rzsv||t.rzsv.length!==n.length||t.rzsv.length>0&&0===t.rzsw)&&(r=!0,t.rzsv=n),t.text(n),r&&this.getWidth(t)},setMinAndMax:function(){this.minValue=this.scope.rzSliderFloor?+this.scope.rzSliderFloor:this.scope.rzSliderFloor=0,this.scope.rzSliderCeil?this.maxValue=+this.scope.rzSliderCeil:this.scope.rzSliderCeil=this.maxValue=this.range?this.scope.rzSliderHigh:this.scope.rzSliderModel,this.scope.rzSliderStep&&(this.step=+this.scope.rzSliderStep),this.valueRange=this.maxValue-this.minValue},initElemHandles:function(){angular.forEach(this.sliderElem.children(),function(e,t){var i=angular.element(e);switch(t){case 0:this.fullBar=i;break;case 1:this.selBar=i;break;case 2:this.minH=i;break;case 3:this.maxH=i;break;case 4:this.flrLab=i;break;case 5:this.ceilLab=i;break;case 6:this.minLab=i;break;case 7:this.maxLab=i;break;case 8:this.cmbLab=i}},this),this.fullBar.rzsl=0,this.selBar.rzsl=0,this.minH.rzsl=0,this.maxH.rzsl=0,this.flrLab.rzsl=0,this.ceilLab.rzsl=0,this.minLab.rzsl=0,this.maxLab.rzsl=0,this.cmbLab.rzsl=0,this.hideLimitLabels&&(this.flrLab.rzAlwaysHide=!0,this.ceilLab.rzAlwaysHide=!0,this.hideEl(this.flrLab),this.hideEl(this.ceilLab)),this.range===!1&&(this.cmbLab.remove(),this.maxLab.remove(),this.maxH.rzAlwaysHide=!0,this.maxH[0].style.zIndex="-1000",this.hideEl(this.maxH)),this.range===!1&&this.alwaysShowBar===!1&&(this.maxH.remove(),this.selBar.remove())},calcViewDimensions:function(){var e=this.getWidth(this.minH);this.handleHalfWidth=e/2,this.barWidth=this.getWidth(this.fullBar),this.maxLeft=this.barWidth-e,this.getWidth(this.sliderElem),this.sliderElem.rzsl=this.sliderElem[0].getBoundingClientRect().left,this.initHasRun&&(this.updateCeilLab(),this.initHandles())},updateCeilLab:function(){this.translateFn(this.scope.rzSliderCeil,this.ceilLab),this.setLeft(this.ceilLab,this.barWidth-this.ceilLab.rzsw),this.getWidth(this.ceilLab)},updateFloorLab:function(){this.translateFn(this.scope.rzSliderFloor,this.flrLab),this.getWidth(this.flrLab)},updateHandles:function(e,t){return"rzSliderModel"===e?(this.updateLowHandle(t),this.updateSelectionBar(),void(this.range&&this.updateCmbLabel())):"rzSliderHigh"===e?(this.updateHighHandle(t),this.updateSelectionBar(),void(this.range&&this.updateCmbLabel())):(this.updateLowHandle(t),this.updateHighHandle(t),this.updateSelectionBar(),void this.updateCmbLabel())},updateLowHandle:function(e){var t=Math.abs(this.minH.rzsl-e);0>=t&&1>t||(this.setLeft(this.minH,e),this.translateFn(this.scope.rzSliderModel,this.minLab),this.setLeft(this.minLab,e-this.minLab.rzsw/2+this.handleHalfWidth),this.shFloorCeil())},updateHighHandle:function(e){this.setLeft(this.maxH,e),this.translateFn(this.scope.rzSliderHigh,this.maxLab),this.setLeft(this.maxLab,e-this.maxLab.rzsw/2+this.handleHalfWidth),this.shFloorCeil()},shFloorCeil:function(){var e=!1,t=!1;this.minLab.rzsl<=this.flrLab.rzsl+this.flrLab.rzsw+5?(e=!0,this.hideEl(this.flrLab)):(e=!1,this.showEl(this.flrLab)),this.minLab.rzsl+this.minLab.rzsw>=this.ceilLab.rzsl-this.handleHalfWidth-10?(t=!0,this.hideEl(this.ceilLab)):(t=!1,this.showEl(this.ceilLab)),this.range&&(this.maxLab.rzsl+this.maxLab.rzsw>=this.ceilLab.rzsl-10?this.hideEl(this.ceilLab):t||this.showEl(this.ceilLab),this.maxLab.rzsl<=this.flrLab.rzsl+this.flrLab.rzsw+this.handleHalfWidth?this.hideEl(this.flrLab):e||this.showEl(this.flrLab))},updateSelectionBar:function(){this.setWidth(this.selBar,Math.abs(this.maxH.rzsl-this.minH.rzsl)),this.setLeft(this.selBar,this.range?this.minH.rzsl+this.handleHalfWidth:0)},updateCmbLabel:function(){var e,t;this.minLab.rzsl+this.minLab.rzsw+10>=this.maxLab.rzsl?(this.customTrFn?(e=this.customTrFn(this.scope.rzSliderModel),t=this.customTrFn(this.scope.rzSliderHigh)):(e=this.scope.rzSliderModel,t=this.scope.rzSliderHigh),this.translateFn(e+" - "+t,this.cmbLab,!1),this.setLeft(this.cmbLab,this.selBar.rzsl+this.selBar.rzsw/2-this.cmbLab.rzsw/2),this.hideEl(this.minLab),this.hideEl(this.maxLab),this.showEl(this.cmbLab)):(this.showEl(this.maxLab),this.showEl(this.minLab),this.hideEl(this.cmbLab))},roundStep:function(e){var t=this.step,i=+((e-this.minValue)%t).toFixed(3),n=i>t/2?e+t-i:e-i;return n=n.toFixed(this.precision),+n},hideEl:function(e){return e.css({opacity:0})},showEl:function(e){return e.rzAlwaysHide?e:e.css({opacity:1})},setLeft:function(e,t){return e.rzsl=t,e.css({left:t+"px"}),t},getWidth:function(e){var t=e[0].getBoundingClientRect();return e.rzsw=t.right-t.left,e.rzsw},setWidth:function(e,t){return e.rzsw=t,e.css({width:t+"px"}),t},valueToOffset:function(e){return(e-this.minValue)*this.maxLeft/this.valueRange},offsetToValue:function(e){return e/this.maxLeft*this.valueRange+this.minValue},bindEvents:function(){this.minH.on("mousedown",angular.bind(this,this.onStart,this.minH,"rzSliderModel")),this.range&&this.maxH.on("mousedown",angular.bind(this,this.onStart,this.maxH,"rzSliderHigh")),this.minH.on("touchstart",angular.bind(this,this.onStart,this.minH,"rzSliderModel")),this.range&&this.maxH.on("touchstart",angular.bind(this,this.onStart,this.maxH,"rzSliderHigh"))},onStart:function(e,i,n){var r,a,o=this.getEventNames(n);n.stopPropagation(),n.preventDefault(),""===this.tracking&&(this.calcViewDimensions(),this.tracking=i,e.addClass("rz-active"),r=angular.bind(this,this.onMove,e),a=angular.bind(this,this.onEnd,r),t.on(o.moveEvent,r),t.one(o.endEvent,a))},onMove:function(e,t){var i,n,r,a;return i="clientX"in t?t.clientX:void 0===t.originalEvent?t.touches[0].clientX:t.originalEvent.touches[0].clientX,n=this.sliderElem.rzsl,r=i-n-this.handleHalfWidth,0>=r?void(0!==e.rzsl&&(this.scope[this.tracking]=this.minValue,this.updateHandles(this.tracking,0),this.scope.$apply())):r>=this.maxLeft?void(e.rzsl!==this.maxLeft&&(this.scope[this.tracking]=this.maxValue,this.updateHandles(this.tracking,this.maxLeft),this.scope.$apply())):(a=this.offsetToValue(r),a=this.roundStep(a),r=this.valueToOffset(a),this.range&&("rzSliderModel"===this.tracking&&a>=this.scope.rzSliderHigh?(this.scope[this.tracking]=this.scope.rzSliderHigh,this.updateHandles(this.tracking,this.maxH.rzsl),this.tracking="rzSliderHigh",this.minH.removeClass("rz-active"),this.maxH.addClass("rz-active")):"rzSliderHigh"===this.tracking&&a<=this.scope.rzSliderModel&&(this.scope[this.tracking]=this.scope.rzSliderModel,this.updateHandles(this.tracking,this.minH.rzsl),this.tracking="rzSliderModel",this.maxH.removeClass("rz-active"),this.minH.addClass("rz-active"))),void(this.scope[this.tracking]!==a&&(this.scope[this.tracking]=a,this.updateHandles(this.tracking,r),this.scope.$apply())))},onEnd:function(e,i){var n=this.getEventNames(i).moveEvent;this.minH.removeClass("rz-active"),this.maxH.removeClass("rz-active"),t.off(n,e),this.scope.$emit("slideEnded"),this.tracking=""},getEventNames:function(e){var t={moveEvent:"",endEvent:""};return e.touches||void 0!==e.originalEvent&&e.originalEvent.touches?(t.moveEvent="touchmove",t.endEvent="touchend"):(t.moveEvent="mousemove",t.endEvent="mouseup"),t}},r}]).directive("rzslider",["RzSlider",function(e){"use strict";return{restrict:"E",scope:{rzSliderFloor:"=?",rzSliderCeil:"=?",rzSliderStep:"@",rzSliderPrecision:"@",rzSliderModel:"=?",rzSliderHigh:"=?",rzSliderTranslate:"&",rzSliderHideLimitLabels:"=?",rzSliderAlwaysShowBar:"=?",rzSliderPresentOnly:"@"},templateUrl:function(e,t){return t.rzSliderTplUrl||"rzSliderTpl.html"},link:function(t,i,n){return new e(t,i,n)}}}]),!function(e,t){"function"==typeof define&&define.amd?define("sifter",t):"object"==typeof exports?module.exports=t():e.Sifter=t()}(this,function(){var e=function(e,t){this.items=e,this.settings=t||{diacritics:!0}};e.prototype.tokenize=function(e){if(e=n(String(e||"").toLowerCase()),!e||!e.length)return[];var t,i,a,s,l=[],u=e.split(/ +/);for(t=0,i=u.length;i>t;t++){if(a=r(u[t]),this.settings.diacritics)for(s in o)o.hasOwnProperty(s)&&(a=a.replace(new RegExp(s,"g"),o[s]));l.push({string:u[t],regex:new RegExp(a,"i")})}return l},e.prototype.iterator=function(e,t){var i;i=a(e)?Array.prototype.forEach||function(e){for(var t=0,i=this.length;i>t;t++)e(this[t],t,this)}:function(e){for(var t in this)this.hasOwnProperty(t)&&e(this[t],t,this)},i.apply(e,[t])},e.prototype.getScoreFunction=function(e,t){var i,n,r,a;i=this,e=i.prepareSearch(e,t),r=e.tokens,n=e.options.fields,a=r.length;var o=function(e,t){var i,n;return e?(e=String(e||""),n=e.search(t.regex),-1===n?0:(i=t.string.length/e.length,0===n&&(i+=.5),i)):0},s=function(){var e=n.length;return e?1===e?function(e,t){return o(t[n[0]],e)}:function(t,i){for(var r=0,a=0;e>r;r++)a+=o(i[n[r]],t);return a/e}:function(){return 0}}();return a?1===a?function(e){return s(r[0],e)}:"and"===e.options.conjunction?function(e){for(var t,i=0,n=0;a>i;i++){if(t=s(r[i],e),0>=t)return 0;n+=t}return n/a}:function(e){for(var t=0,i=0;a>t;t++)i+=s(r[t],e);return i/a}:function(){return 0}},e.prototype.getSortFunction=function(e,i){var n,r,a,o,s,l,u,c,d,p,f;if(a=this,e=a.prepareSearch(e,i),f=!e.query&&i.sort_empty||i.sort,d=function(e,t){return"$score"===e?t.score:a.items[t.id][e]},s=[],f)for(n=0,r=f.length;r>n;n++)(e.query||"$score"!==f[n].field)&&s.push(f[n]);if(e.query){for(p=!0,n=0,r=s.length;r>n;n++)if("$score"===s[n].field){p=!1;break}p&&s.unshift({field:"$score",direction:"desc"})}else for(n=0,r=s.length;r>n;n++)if("$score"===s[n].field){s.splice(n,1);break}for(c=[],n=0,r=s.length;r>n;n++)c.push("desc"===s[n].direction?-1:1);return l=s.length,l?1===l?(o=s[0].field,u=c[0],function(e,i){return u*t(d(o,e),d(o,i))}):function(e,i){var n,r,a;for(n=0;l>n;n++)if(a=s[n].field,r=c[n]*t(d(a,e),d(a,i)))return r;return 0}:null},e.prototype.prepareSearch=function(e,t){if("object"==typeof e)return e;t=i({},t);var n=t.fields,r=t.sort,o=t.sort_empty;return n&&!a(n)&&(t.fields=[n]),r&&!a(r)&&(t.sort=[r]),o&&!a(o)&&(t.sort_empty=[o]),{options:t,query:String(e||"").toLowerCase(),tokens:this.tokenize(e),total:0,items:[]}},e.prototype.search=function(e,t){var i,n,r,a,o=this;return n=this.prepareSearch(e,t),t=n.options,e=n.query,a=t.score||o.getScoreFunction(n),e.length?o.iterator(o.items,function(e,r){i=a(e),(t.filter===!1||i>0)&&n.items.push({score:i,id:r})}):o.iterator(o.items,function(e,t){n.items.push({score:1,id:t})}),r=o.getSortFunction(n,t),r&&n.items.sort(r),n.total=n.items.length,"number"==typeof t.limit&&(n.items=n.items.slice(0,t.limit)),n};var t=function(e,t){return"number"==typeof e&&"number"==typeof t?e>t?1:t>e?-1:0:(e=s(String(e||"")),t=s(String(t||"")),e>t?1:t>e?-1:0)},i=function(e){var t,i,n,r;for(t=1,i=arguments.length;i>t;t++)if(r=arguments[t])for(n in r)r.hasOwnProperty(n)&&(e[n]=r[n]);return e},n=function(e){return(e+"").replace(/^\s+|\s+$|/g,"")},r=function(e){return(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},a=Array.isArray||$&&$.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},o={a:"[aÀÁÂÃÄÅàáâãäåĀāąĄ]",c:"[cÇçćĆčČ]",d:"[dđĐďĎ]",e:"[eÈÉÊËèéêëěĚĒēęĘ]",i:"[iÌÍÎÏìíîïĪī]",l:"[lłŁ]",n:"[nÑñňŇńŃ]",o:"[oÒÓÔÕÕÖØòóôõöøŌō]",r:"[rřŘ]",s:"[sŠšśŚ]",t:"[tťŤ]",u:"[uÙÚÛÜùúûüůŮŪū]",y:"[yŸÿýÝ]",z:"[zŽžżŻźŹ]"},s=function(){var e,t,i,n,r="",a={};for(i in o)if(o.hasOwnProperty(i))for(n=o[i].substring(2,o[i].length-1),r+=n,e=0,t=n.length;t>e;e++)a[n.charAt(e)]=i;var s=new RegExp("["+r+"]","g");return function(e){return e.replace(s,function(e){return a[e]}).toLowerCase()}}();return e}),function(e,t){"function"==typeof define&&define.amd?define("microplugin",t):"object"==typeof exports?module.exports=t():e.MicroPlugin=t()}(this,function(){var e={};e.mixin=function(e){e.plugins={},e.prototype.initializePlugins=function(e){var i,n,r,a=this,o=[];if(a.plugins={names:[],settings:{},requested:{},loaded:{}},t.isArray(e))for(i=0,n=e.length;n>i;i++)"string"==typeof e[i]?o.push(e[i]):(a.plugins.settings[e[i].name]=e[i].options,o.push(e[i].name));else if(e)for(r in e)e.hasOwnProperty(r)&&(a.plugins.settings[r]=e[r],o.push(r));for(;o.length;)a.require(o.shift())},e.prototype.loadPlugin=function(t){var i=this,n=i.plugins,r=e.plugins[t];if(!e.plugins.hasOwnProperty(t))throw new Error('Unable to find "'+t+'" plugin');n.requested[t]=!0,n.loaded[t]=r.fn.apply(i,[i.plugins.settings[t]||{}]),n.names.push(t)},e.prototype.require=function(e){var t=this,i=t.plugins;if(!t.plugins.loaded.hasOwnProperty(e)){if(i.requested[e])throw new Error('Plugin has circular dependency ("'+e+'")');t.loadPlugin(e)}return i.loaded[e]},e.define=function(t,i){e.plugins[t]={name:t,fn:i}}};var t={isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}};return e}),function(e,t){"function"==typeof define&&define.amd?define("selectize",["jquery","sifter","microplugin"],t):"object"==typeof exports?module.exports=t(require("jquery"),require("sifter"),require("microplugin")):e.Selectize=t(e.jQuery,e.Sifter,e.MicroPlugin)}(this,function(e,t,i){"use strict";var n=function(e,t){if("string"!=typeof t||t.length){var i="string"==typeof t?new RegExp(t,"i"):t,n=function(e){var t=0;if(3===e.nodeType){var r=e.data.search(i);if(r>=0&&e.data.length>0){var a=e.data.match(i),o=document.createElement("span");o.className="highlight";var s=e.splitText(r),l=(s.splitText(a[0].length),s.cloneNode(!0));o.appendChild(l),s.parentNode.replaceChild(o,s),t=1}}else if(1===e.nodeType&&e.childNodes&&!/(script|style)/i.test(e.tagName))for(var u=0;u<e.childNodes.length;++u)u+=n(e.childNodes[u]);return t};return e.each(function(){n(this)})}},r=function(){};r.prototype={on:function(e,t){this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(t)},off:function(e,t){var i=arguments.length;return 0===i?delete this._events:1===i?delete this._events[e]:(this._events=this._events||{},void(e in this._events!=0&&this._events[e].splice(this._events[e].indexOf(t),1)))},trigger:function(e){if(this._events=this._events||{},e in this._events!=0)for(var t=0;t<this._events[e].length;t++)this._events[e][t].apply(this,Array.prototype.slice.call(arguments,1))}},r.mixin=function(e){for(var t=["on","off","trigger"],i=0;i<t.length;i++)e.prototype[t[i]]=r.prototype[t[i]]};var a=/Mac/.test(navigator.userAgent),o=65,s=13,l=27,u=37,c=38,d=80,p=39,f=40,h=78,m=8,g=46,v=16,y=a?91:17,b=a?18:17,k=9,x=1,S=2,w=!/android/i.test(window.navigator.userAgent)&&!!document.createElement("form").validity,C=function(e){return"undefined"!=typeof e},P=function(e){return"undefined"==typeof e||null===e?null:"boolean"==typeof e?e?"1":"0":e+""},$=function(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},O=function(e){return(e+"").replace(/\$/g,"$$$$")},_={};_.before=function(e,t,i){var n=e[t];e[t]=function(){return i.apply(e,arguments),n.apply(e,arguments)}},_.after=function(e,t,i){var n=e[t];e[t]=function(){var t=n.apply(e,arguments);return i.apply(e,arguments),t}};var A=function(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}},E=function(e,t){var i;return function(){var n=this,r=arguments;window.clearTimeout(i),i=window.setTimeout(function(){e.apply(n,r)},t)}},I=function(e,t,i){var n,r=e.trigger,a={};e.trigger=function(){var i=arguments[0];return-1===t.indexOf(i)?r.apply(e,arguments):void(a[i]=arguments)},i.apply(e,[]),e.trigger=r;for(n in a)a.hasOwnProperty(n)&&r.apply(e,a[n])},z=function(e,t,i,n){e.on(t,i,function(t){for(var i=t.target;i&&i.parentNode!==e[0];)i=i.parentNode;return t.currentTarget=i,n.apply(this,[t])})},T=function(e){var t={};if("selectionStart"in e)t.start=e.selectionStart,t.length=e.selectionEnd-t.start;else if(document.selection){e.focus();var i=document.selection.createRange(),n=document.selection.createRange().text.length;i.moveStart("character",-e.value.length),t.start=i.text.length-n,t.length=n}return t},M=function(e,t,i){var n,r,a={};if(i)for(n=0,r=i.length;r>n;n++)a[i[n]]=e.css(i[n]);else a=e.css();t.css(a)},F=function(t,i){if(!t)return 0;var n=e("<test>").css({position:"absolute",top:-99999,left:-99999,width:"auto",padding:0,whiteSpace:"pre"}).text(t).appendTo("body");M(i,n,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]);var r=n.width();return n.remove(),r},L=function(e){var t=null,i=function(i,n){var r,a,o,s,l,u,c,d;i=i||window.event||{},n=n||{},i.metaKey||i.altKey||(n.force||e.data("grow")!==!1)&&(r=e.val(),i.type&&"keydown"===i.type.toLowerCase()&&(a=i.keyCode,o=a>=97&&122>=a||a>=65&&90>=a||a>=48&&57>=a||32===a,a===g||a===m?(d=T(e[0]),d.length?r=r.substring(0,d.start)+r.substring(d.start+d.length):a===m&&d.start?r=r.substring(0,d.start-1)+r.substring(d.start+1):a===g&&"undefined"!=typeof d.start&&(r=r.substring(0,d.start)+r.substring(d.start+1))):o&&(u=i.shiftKey,c=String.fromCharCode(i.keyCode),c=u?c.toUpperCase():c.toLowerCase(),r+=c)),s=e.attr("placeholder"),!r&&s&&(r=s),l=F(r,e)+4,l!==t&&(t=l,e.width(l),e.triggerHandler("resize")))};e.on("keydown keyup update blur",i),i()},D=function(i,n){var r,a,o,s,l=this;s=i[0],s.selectize=l;var u=window.getComputedStyle&&window.getComputedStyle(s,null);if(o=u?u.getPropertyValue("direction"):s.currentStyle&&s.currentStyle.direction,o=o||i.parents("[dir]:first").attr("dir")||"",e.extend(l,{order:0,settings:n,$input:i,tabIndex:i.attr("tabindex")||"",tagType:"select"===s.tagName.toLowerCase()?x:S,rtl:/rtl/i.test(o),eventNS:".selectize"+ ++D.count,highlightedValue:null,isOpen:!1,isDisabled:!1,isRequired:i.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:null===n.loadThrottle?l.onSearchChange:E(l.onSearchChange,n.loadThrottle)}),l.sifter=new t(this.options,{diacritics:n.diacritics}),l.settings.options){for(r=0,a=l.settings.options.length;a>r;r++)l.registerOption(l.settings.options[r]);delete l.settings.options}if(l.settings.optgroups){for(r=0,a=l.settings.optgroups.length;a>r;r++)l.registerOptionGroup(l.settings.optgroups[r]);delete l.settings.optgroups}l.settings.mode=l.settings.mode||(1===l.settings.maxItems?"single":"multi"),"boolean"!=typeof l.settings.hideSelected&&(l.settings.hideSelected="multi"===l.settings.mode),l.initializePlugins(l.settings.plugins),l.setupCallbacks(),l.setupTemplates(),l.setup()};return r.mixin(D),i.mixin(D),e.extend(D.prototype,{setup:function(){var t,i,n,r,o,s,l,u,c,d=this,p=d.settings,f=d.eventNS,h=e(window),m=e(document),g=d.$input;if(l=d.settings.mode,u=g.attr("class")||"",t=e("<div>").addClass(p.wrapperClass).addClass(u).addClass(l),i=e("<div>").addClass(p.inputClass).addClass("items").appendTo(t),n=e('<input type="text" autocomplete="off" />').appendTo(i).attr("tabindex",g.is(":disabled")?"-1":d.tabIndex),s=e(p.dropdownParent||t),r=e("<div>").addClass(p.dropdownClass).addClass(l).hide().appendTo(s),o=e("<div>").addClass(p.dropdownContentClass).appendTo(r),d.settings.copyClassesToDropdown&&r.addClass(u),t.css({width:g[0].style.width}),d.plugins.names.length&&(c="plugin-"+d.plugins.names.join(" plugin-"),t.addClass(c),r.addClass(c)),(null===p.maxItems||p.maxItems>1)&&d.tagType===x&&g.attr("multiple","multiple"),d.settings.placeholder&&n.attr("placeholder",p.placeholder),!d.settings.splitOn&&d.settings.delimiter){var k=d.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");d.settings.splitOn=new RegExp("\\s*"+k+"+\\s*")}g.attr("autocorrect")&&n.attr("autocorrect",g.attr("autocorrect")),g.attr("autocapitalize")&&n.attr("autocapitalize",g.attr("autocapitalize")),d.$wrapper=t,d.$control=i,d.$control_input=n,d.$dropdown=r,d.$dropdown_content=o,r.on("mouseenter","[data-selectable]",function(){return d.onOptionHover.apply(d,arguments)}),r.on("mousedown click","[data-selectable]",function(){return d.onOptionSelect.apply(d,arguments)}),z(i,"mousedown","*:not(input)",function(){return d.onItemSelect.apply(d,arguments)}),L(n),i.on({mousedown:function(){return d.onMouseDown.apply(d,arguments)},click:function(){return d.onClick.apply(d,arguments)}}),n.on({mousedown:function(e){e.stopPropagation()},keydown:function(){return d.onKeyDown.apply(d,arguments)},keyup:function(){return d.onKeyUp.apply(d,arguments)},keypress:function(){return d.onKeyPress.apply(d,arguments)},resize:function(){d.positionDropdown.apply(d,[])},blur:function(){return d.onBlur.apply(d,arguments)},focus:function(){return d.ignoreBlur=!1,d.onFocus.apply(d,arguments)},paste:function(){return d.onPaste.apply(d,arguments)}}),m.on("keydown"+f,function(e){d.isCmdDown=e[a?"metaKey":"ctrlKey"],d.isCtrlDown=e[a?"altKey":"ctrlKey"],d.isShiftDown=e.shiftKey}),m.on("keyup"+f,function(e){e.keyCode===b&&(d.isCtrlDown=!1),e.keyCode===v&&(d.isShiftDown=!1),e.keyCode===y&&(d.isCmdDown=!1)}),m.on("mousedown"+f,function(e){if(d.isFocused){if(e.target===d.$dropdown[0]||e.target.parentNode===d.$dropdown[0])return!1;d.$control.has(e.target).length||e.target===d.$control[0]||d.blur(e.target)}}),h.on(["scroll"+f,"resize"+f].join(" "),function(){d.isOpen&&d.positionDropdown.apply(d,arguments)}),h.on("mousemove"+f,function(){d.ignoreHover=!1}),this.revertSettings={$children:g.children().detach(),tabindex:g.attr("tabindex")},g.attr("tabindex",-1).hide().after(d.$wrapper),e.isArray(p.items)&&(d.setValue(p.items),delete p.items),w&&g.on("invalid"+f,function(e){e.preventDefault(),d.isInvalid=!0,d.refreshState()}),d.updateOriginalInput(),d.refreshItems(),d.refreshState(),d.updatePlaceholder(),d.isSetup=!0,g.is(":disabled")&&d.disable(),d.on("change",this.onChange),g.data("selectize",d),g.addClass("selectized"),d.trigger("initialize"),p.preload===!0&&d.onSearchChange("")},setupTemplates:function(){var t=this,i=t.settings.labelField,n=t.settings.optgroupLabelField,r={optgroup:function(e){return'<div class="optgroup">'+e.html+"</div>"},optgroup_header:function(e,t){return'<div class="optgroup-header">'+t(e[n])+"</div>"},option:function(e,t){return'<div class="option">'+t(e[i])+"</div>"},item:function(e,t){return'<div class="item">'+t(e[i])+"</div>"},option_create:function(e,t){return'<div class="create">Add <strong>'+t(e.input)+"</strong>&hellip;</div>"}};t.settings.render=e.extend({},r,t.settings.render)},setupCallbacks:function(){var e,t,i={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(e in i)i.hasOwnProperty(e)&&(t=this.settings[i[e]],t&&this.on(e,t))},onClick:function(e){var t=this;t.isFocused||(t.focus(),e.preventDefault())},onMouseDown:function(t){var i=this,n=t.isDefaultPrevented();if(e(t.target),i.isFocused){if(t.target!==i.$control_input[0])return"single"===i.settings.mode?i.isOpen?i.close():i.open():n||i.setActiveItem(null),!1}else n||window.setTimeout(function(){i.focus()},0)},onChange:function(){this.$input.trigger("change")},onPaste:function(t){var i=this;i.isFull()||i.isInputHidden||i.isLocked?t.preventDefault():i.settings.splitOn&&setTimeout(function(){for(var t=e.trim(i.$control_input.val()||"").split(i.settings.splitOn),n=0,r=t.length;r>n;n++)i.createItem(t[n])},0)},onKeyPress:function(e){if(this.isLocked)return e&&e.preventDefault();var t=String.fromCharCode(e.keyCode||e.which);return this.settings.create&&"multi"===this.settings.mode&&t===this.settings.delimiter?(this.createItem(),e.preventDefault(),!1):void 0},onKeyDown:function(e){var t=(e.target===this.$control_input[0],this);if(t.isLocked)return void(e.keyCode!==k&&e.preventDefault());switch(e.keyCode){case o:if(t.isCmdDown)return void t.selectAll();break;case l:return void(t.isOpen&&(e.preventDefault(),e.stopPropagation(),t.close()));case h:if(!e.ctrlKey||e.altKey)break;case f:if(!t.isOpen&&t.hasOptions)t.open();else if(t.$activeOption){t.ignoreHover=!0;var i=t.getAdjacentOption(t.$activeOption,1);i.length&&t.setActiveOption(i,!0,!0)}return void e.preventDefault();case d:if(!e.ctrlKey||e.altKey)break;case c:if(t.$activeOption){t.ignoreHover=!0;var n=t.getAdjacentOption(t.$activeOption,-1);n.length&&t.setActiveOption(n,!0,!0)}return void e.preventDefault();case s:return void(t.isOpen&&t.$activeOption&&(t.onOptionSelect({currentTarget:t.$activeOption}),e.preventDefault()));case u:return void t.advanceSelection(-1,e);case p:return void t.advanceSelection(1,e);case k:return t.settings.selectOnTab&&t.isOpen&&t.$activeOption&&(t.onOptionSelect({currentTarget:t.$activeOption}),t.isFull()||e.preventDefault()),void(t.settings.create&&t.createItem()&&e.preventDefault());case m:case g:return void t.deleteSelection(e)}return!t.isFull()&&!t.isInputHidden||(a?e.metaKey:e.ctrlKey)?void 0:void e.preventDefault()},onKeyUp:function(e){var t=this;if(t.isLocked)return e&&e.preventDefault();var i=t.$control_input.val()||"";t.lastValue!==i&&(t.lastValue=i,t.onSearchChange(i),t.refreshOptions(),t.trigger("type",i))},onSearchChange:function(e){var t=this,i=t.settings.load;i&&(t.loadedSearches.hasOwnProperty(e)||(t.loadedSearches[e]=!0,t.load(function(n){i.apply(t,[e,n])})))},onFocus:function(e){var t=this,i=t.isFocused;return t.isDisabled?(t.blur(),e&&e.preventDefault(),!1):void(t.ignoreFocus||(t.isFocused=!0,"focus"===t.settings.preload&&t.onSearchChange(""),i||t.trigger("focus"),t.$activeItems.length||(t.showInput(),t.setActiveItem(null),t.refreshOptions(!!t.settings.openOnFocus)),t.refreshState()))},onBlur:function(e,t){var i=this;if(i.isFocused&&(i.isFocused=!1,!i.ignoreFocus)){if(!i.ignoreBlur&&document.activeElement===i.$dropdown_content[0])return i.ignoreBlur=!0,void i.onFocus(e);var n=function(){i.close(),i.setTextboxValue(""),i.setActiveItem(null),i.setActiveOption(null),i.setCaret(i.items.length),i.refreshState(),(t||document.body).focus(),i.ignoreFocus=!1,i.trigger("blur")};i.ignoreFocus=!0,i.settings.create&&i.settings.createOnBlur?i.createItem(null,!1,n):n()}},onOptionHover:function(e){this.ignoreHover||this.setActiveOption(e.currentTarget,!1)},onOptionSelect:function(t){var i,n,r=this;t.preventDefault&&(t.preventDefault(),t.stopPropagation()),n=e(t.currentTarget),n.hasClass("create")?r.createItem(null,function(){r.settings.closeAfterSelect&&r.close()}):(i=n.attr("data-value"),"undefined"!=typeof i&&(r.lastQuery=null,r.setTextboxValue(""),r.addItem(i),r.settings.closeAfterSelect?r.close():!r.settings.hideSelected&&t.type&&/mouse/.test(t.type)&&r.setActiveOption(r.getOption(i))))},onItemSelect:function(e){var t=this;t.isLocked||"multi"===t.settings.mode&&(e.preventDefault(),t.setActiveItem(e.currentTarget,e))},load:function(e){var t=this,i=t.$wrapper.addClass(t.settings.loadingClass);t.loading++,e.apply(t,[function(e){t.loading=Math.max(t.loading-1,0),e&&e.length&&(t.addOption(e),t.refreshOptions(t.isFocused&&!t.isInputHidden)),t.loading||i.removeClass(t.settings.loadingClass),t.trigger("load",e)}])},setTextboxValue:function(e){var t=this.$control_input,i=t.val()!==e;i&&(t.val(e).triggerHandler("update"),this.lastValue=e)},getValue:function(){return this.tagType===x&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},setValue:function(e,t){var i=t?[]:["change"];I(this,i,function(){this.clear(t),this.addItems(e,t)})},setActiveItem:function(t,i){var n,r,a,o,s,l,u,c,d=this;if("single"!==d.settings.mode){if(t=e(t),!t.length)return e(d.$activeItems).removeClass("active"),d.$activeItems=[],void(d.isFocused&&d.showInput());if(n=i&&i.type.toLowerCase(),"mousedown"===n&&d.isShiftDown&&d.$activeItems.length){for(c=d.$control.children(".active:last"),o=Array.prototype.indexOf.apply(d.$control[0].childNodes,[c[0]]),s=Array.prototype.indexOf.apply(d.$control[0].childNodes,[t[0]]),o>s&&(u=o,o=s,s=u),r=o;s>=r;r++)l=d.$control[0].childNodes[r],-1===d.$activeItems.indexOf(l)&&(e(l).addClass("active"),d.$activeItems.push(l));i.preventDefault()}else"mousedown"===n&&d.isCtrlDown||"keydown"===n&&this.isShiftDown?t.hasClass("active")?(a=d.$activeItems.indexOf(t[0]),d.$activeItems.splice(a,1),t.removeClass("active")):d.$activeItems.push(t.addClass("active")[0]):(e(d.$activeItems).removeClass("active"),d.$activeItems=[t.addClass("active")[0]]);d.hideInput(),this.isFocused||d.focus()}},setActiveOption:function(t,i,n){var r,a,o,s,l,u=this;u.$activeOption&&u.$activeOption.removeClass("active"),u.$activeOption=null,t=e(t),t.length&&(u.$activeOption=t.addClass("active"),(i||!C(i))&&(r=u.$dropdown_content.height(),a=u.$activeOption.outerHeight(!0),
i=u.$dropdown_content.scrollTop()||0,o=u.$activeOption.offset().top-u.$dropdown_content.offset().top+i,s=o,l=o-r+a,o+a>r+i?u.$dropdown_content.stop().animate({scrollTop:l},n?u.settings.scrollDuration:0):i>o&&u.$dropdown_content.stop().animate({scrollTop:s},n?u.settings.scrollDuration:0)))},selectAll:function(){var e=this;"single"!==e.settings.mode&&(e.$activeItems=Array.prototype.slice.apply(e.$control.children(":not(input)").addClass("active")),e.$activeItems.length&&(e.hideInput(),e.close()),e.focus())},hideInput:function(){var e=this;e.setTextboxValue(""),e.$control_input.css({opacity:0,position:"absolute",left:e.rtl?1e4:-1e4}),e.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(){var e=this;e.isDisabled||(e.ignoreFocus=!0,e.$control_input[0].focus(),window.setTimeout(function(){e.ignoreFocus=!1,e.onFocus()},0))},blur:function(e){this.$control_input[0].blur(),this.onBlur(null,e)},getScoreFunction:function(e){return this.sifter.getScoreFunction(e,this.getSearchOptions())},getSearchOptions:function(){var e=this.settings,t=e.sortField;return"string"==typeof t&&(t=[{field:t}]),{fields:e.searchField,conjunction:e.searchConjunction,sort:t}},search:function(t){var i,n,r,a=this,o=a.settings,s=this.getSearchOptions();if(o.score&&(r=a.settings.score.apply(this,[t]),"function"!=typeof r))throw new Error('Selectize "score" setting must be a function that returns a function');if(t!==a.lastQuery?(a.lastQuery=t,n=a.sifter.search(t,e.extend(s,{score:r})),a.currentResults=n):n=e.extend(!0,{},a.currentResults),o.hideSelected)for(i=n.items.length-1;i>=0;i--)-1!==a.items.indexOf(P(n.items[i].id))&&n.items.splice(i,1);return n},refreshOptions:function(t){var i,r,a,o,s,l,u,c,d,p,f,h,m,g,v,y;"undefined"==typeof t&&(t=!0);var b=this,k=e.trim(b.$control_input.val()),x=b.search(k),S=b.$dropdown_content,w=b.$activeOption&&P(b.$activeOption.attr("data-value"));for(o=x.items.length,"number"==typeof b.settings.maxOptions&&(o=Math.min(o,b.settings.maxOptions)),s={},l=[],i=0;o>i;i++)for(u=b.options[x.items[i].id],c=b.render("option",u),d=u[b.settings.optgroupField]||"",p=e.isArray(d)?d:[d],r=0,a=p&&p.length;a>r;r++)d=p[r],b.optgroups.hasOwnProperty(d)||(d=""),s.hasOwnProperty(d)||(s[d]=[],l.push(d)),s[d].push(c);for(this.settings.lockOptgroupOrder&&l.sort(function(e,t){var i=b.optgroups[e].$order||0,n=b.optgroups[t].$order||0;return i-n}),f=[],i=0,o=l.length;o>i;i++)d=l[i],b.optgroups.hasOwnProperty(d)&&s[d].length?(h=b.render("optgroup_header",b.optgroups[d])||"",h+=s[d].join(""),f.push(b.render("optgroup",e.extend({},b.optgroups[d],{html:h})))):f.push(s[d].join(""));if(S.html(f.join("")),b.settings.highlight&&x.query.length&&x.tokens.length)for(i=0,o=x.tokens.length;o>i;i++)n(S,x.tokens[i].regex);if(!b.settings.hideSelected)for(i=0,o=b.items.length;o>i;i++)b.getOption(b.items[i]).addClass("selected");m=b.canCreate(k),m&&(S.prepend(b.render("option_create",{input:k})),y=e(S[0].childNodes[0])),b.hasOptions=x.items.length>0||m,b.hasOptions?(x.items.length>0?(v=w&&b.getOption(w),v&&v.length?g=v:"single"===b.settings.mode&&b.items.length&&(g=b.getOption(b.items[0])),g&&g.length||(g=y&&!b.settings.addPrecedence?b.getAdjacentOption(y,1):S.find("[data-selectable]:first"))):g=y,b.setActiveOption(g),t&&!b.isOpen&&b.open()):(b.setActiveOption(null),t&&b.isOpen&&b.close())},addOption:function(t){var i,n,r,a=this;if(e.isArray(t))for(i=0,n=t.length;n>i;i++)a.addOption(t[i]);else(r=a.registerOption(t))&&(a.userOptions[r]=!0,a.lastQuery=null,a.trigger("option_add",r,t))},registerOption:function(e){var t=P(e[this.settings.valueField]);return!t||this.options.hasOwnProperty(t)?!1:(e.$order=e.$order||++this.order,this.options[t]=e,t)},registerOptionGroup:function(e){var t=P(e[this.settings.optgroupValueField]);return t?(e.$order=e.$order||++this.order,this.optgroups[t]=e,t):!1},addOptionGroup:function(e,t){t[this.settings.optgroupValueField]=e,(e=this.registerOptionGroup(t))&&this.trigger("optgroup_add",e,t)},removeOptionGroup:function(e){this.optgroups.hasOwnProperty(e)&&(delete this.optgroups[e],this.renderCache={},this.trigger("optgroup_remove",e))},clearOptionGroups:function(){this.optgroups={},this.renderCache={},this.trigger("optgroup_clear")},updateOption:function(t,i){var n,r,a,o,s,l,u,c=this;if(t=P(t),a=P(i[c.settings.valueField]),null!==t&&c.options.hasOwnProperty(t)){if("string"!=typeof a)throw new Error("Value must be set in option data");u=c.options[t].$order,a!==t&&(delete c.options[t],o=c.items.indexOf(t),-1!==o&&c.items.splice(o,1,a)),i.$order=i.$order||u,c.options[a]=i,s=c.renderCache.item,l=c.renderCache.option,s&&(delete s[t],delete s[a]),l&&(delete l[t],delete l[a]),-1!==c.items.indexOf(a)&&(n=c.getItem(t),r=e(c.render("item",i)),n.hasClass("active")&&r.addClass("active"),n.replaceWith(r)),c.lastQuery=null,c.isOpen&&c.refreshOptions(!1)}},removeOption:function(e,t){var i=this;e=P(e);var n=i.renderCache.item,r=i.renderCache.option;n&&delete n[e],r&&delete r[e],delete i.userOptions[e],delete i.options[e],i.lastQuery=null,i.trigger("option_remove",e),i.removeItem(e,t)},clearOptions:function(){var e=this;e.loadedSearches={},e.userOptions={},e.renderCache={},e.options=e.sifter.items={},e.lastQuery=null,e.trigger("option_clear"),e.clear()},getOption:function(e){return this.getElementWithValue(e,this.$dropdown_content.find("[data-selectable]"))},getAdjacentOption:function(t,i){var n=this.$dropdown.find("[data-selectable]"),r=n.index(t)+i;return r>=0&&r<n.length?n.eq(r):e()},getElementWithValue:function(t,i){if(t=P(t),"undefined"!=typeof t&&null!==t)for(var n=0,r=i.length;r>n;n++)if(i[n].getAttribute("data-value")===t)return e(i[n]);return e()},getItem:function(e){return this.getElementWithValue(e,this.$control.children())},addItems:function(t,i){for(var n=e.isArray(t)?t:[t],r=0,a=n.length;a>r;r++)this.isPending=a-1>r,this.addItem(n[r],i)},addItem:function(t,i){var n=i?[]:["change"];I(this,n,function(){var n,r,a,o,s,l=this,u=l.settings.mode;return t=P(t),-1!==l.items.indexOf(t)?void("single"===u&&l.close()):void(l.options.hasOwnProperty(t)&&("single"===u&&l.clear(i),"multi"===u&&l.isFull()||(n=e(l.render("item",l.options[t])),s=l.isFull(),l.items.splice(l.caretPos,0,t),l.insertAtCaret(n),(!l.isPending||!s&&l.isFull())&&l.refreshState(),l.isSetup&&(a=l.$dropdown_content.find("[data-selectable]"),l.isPending||(r=l.getOption(t),o=l.getAdjacentOption(r,1).attr("data-value"),l.refreshOptions(l.isFocused&&"single"!==u),o&&l.setActiveOption(l.getOption(o))),!a.length||l.isFull()?l.close():l.positionDropdown(),l.updatePlaceholder(),l.trigger("item_add",t,n),l.updateOriginalInput({silent:i})))))})},removeItem:function(e,t){var i,n,r,a=this;i="object"==typeof e?e:a.getItem(e),e=P(i.attr("data-value")),n=a.items.indexOf(e),-1!==n&&(i.remove(),i.hasClass("active")&&(r=a.$activeItems.indexOf(i[0]),a.$activeItems.splice(r,1)),a.items.splice(n,1),a.lastQuery=null,!a.settings.persist&&a.userOptions.hasOwnProperty(e)&&a.removeOption(e,t),n<a.caretPos&&a.setCaret(a.caretPos-1),a.refreshState(),a.updatePlaceholder(),a.updateOriginalInput({silent:t}),a.positionDropdown(),a.trigger("item_remove",e,i))},createItem:function(t,i){var n=this,r=n.caretPos;t=t||e.trim(n.$control_input.val()||"");var a=arguments[arguments.length-1];if("function"!=typeof a&&(a=function(){}),"boolean"!=typeof i&&(i=!0),!n.canCreate(t))return a(),!1;n.lock();var o="function"==typeof n.settings.create?this.settings.create:function(e){var t={};return t[n.settings.labelField]=e,t[n.settings.valueField]=e,t},s=A(function(e){if(n.unlock(),!e||"object"!=typeof e)return a();var t=P(e[n.settings.valueField]);return"string"!=typeof t?a():(n.setTextboxValue(""),n.addOption(e),n.setCaret(r),n.addItem(t),n.refreshOptions(i&&"single"!==n.settings.mode),void a(e))}),l=o.apply(this,[t,s]);return"undefined"!=typeof l&&s(l),!0},refreshItems:function(){this.lastQuery=null,this.isSetup&&this.addItem(this.items),this.refreshState(),this.updateOriginalInput()},refreshState:function(){var e,t=this;t.isRequired&&(t.items.length&&(t.isInvalid=!1),t.$control_input.prop("required",e)),t.refreshClasses()},refreshClasses:function(){var t=this,i=t.isFull(),n=t.isLocked;t.$wrapper.toggleClass("rtl",t.rtl),t.$control.toggleClass("focus",t.isFocused).toggleClass("disabled",t.isDisabled).toggleClass("required",t.isRequired).toggleClass("invalid",t.isInvalid).toggleClass("locked",n).toggleClass("full",i).toggleClass("not-full",!i).toggleClass("input-active",t.isFocused&&!t.isInputHidden).toggleClass("dropdown-active",t.isOpen).toggleClass("has-options",!e.isEmptyObject(t.options)).toggleClass("has-items",t.items.length>0),t.$control_input.data("grow",!i&&!n)},isFull:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(e){var t,i,n,r,a=this;if(e=e||{},a.tagType===x){for(n=[],t=0,i=a.items.length;i>t;t++)r=a.options[a.items[t]][a.settings.labelField]||"",n.push('<option value="'+$(a.items[t])+'" selected="selected">'+$(r)+"</option>");n.length||this.$input.attr("multiple")||n.push('<option value="" selected="selected"></option>'),a.$input.html(n.join(""))}else a.$input.val(a.getValue()),a.$input.attr("value",a.$input.val());a.isSetup&&(e.silent||a.trigger("change",a.$input.val()))},updatePlaceholder:function(){if(this.settings.placeholder){var e=this.$control_input;this.items.length?e.removeAttr("placeholder"):e.attr("placeholder",this.settings.placeholder),e.triggerHandler("update",{force:!0})}},open:function(){var e=this;e.isLocked||e.isOpen||"multi"===e.settings.mode&&e.isFull()||(e.focus(),e.isOpen=!0,e.refreshState(),e.$dropdown.css({visibility:"hidden",display:"block"}),e.positionDropdown(),e.$dropdown.css({visibility:"visible"}),e.trigger("dropdown_open",e.$dropdown))},close:function(){var e=this,t=e.isOpen;"single"===e.settings.mode&&e.items.length&&e.hideInput(),e.isOpen=!1,e.$dropdown.hide(),e.setActiveOption(null),e.refreshState(),t&&e.trigger("dropdown_close",e.$dropdown)},positionDropdown:function(){var e=this.$control,t="body"===this.settings.dropdownParent?e.offset():e.position();t.top+=e.outerHeight(!0),this.$dropdown.css({width:e.outerWidth(),top:t.top,left:t.left})},clear:function(e){var t=this;t.items.length&&(t.$control.children(":not(input)").remove(),t.items=[],t.lastQuery=null,t.setCaret(0),t.setActiveItem(null),t.updatePlaceholder(),t.updateOriginalInput({silent:e}),t.refreshState(),t.showInput(),t.trigger("clear"))},insertAtCaret:function(t){var i=Math.min(this.caretPos,this.items.length);0===i?this.$control.prepend(t):e(this.$control[0].childNodes[i]).before(t),this.setCaret(i+1)},deleteSelection:function(t){var i,n,r,a,o,s,l,u,c,d=this;if(r=t&&t.keyCode===m?-1:1,a=T(d.$control_input[0]),d.$activeOption&&!d.settings.hideSelected&&(l=d.getAdjacentOption(d.$activeOption,-1).attr("data-value")),o=[],d.$activeItems.length){for(c=d.$control.children(".active:"+(r>0?"last":"first")),s=d.$control.children(":not(input)").index(c),r>0&&s++,i=0,n=d.$activeItems.length;n>i;i++)o.push(e(d.$activeItems[i]).attr("data-value"));t&&(t.preventDefault(),t.stopPropagation())}else(d.isFocused||"single"===d.settings.mode)&&d.items.length&&(0>r&&0===a.start&&0===a.length?o.push(d.items[d.caretPos-1]):r>0&&a.start===d.$control_input.val().length&&o.push(d.items[d.caretPos]));if(!o.length||"function"==typeof d.settings.onDelete&&d.settings.onDelete.apply(d,[o])===!1)return!1;for("undefined"!=typeof s&&d.setCaret(s);o.length;)d.removeItem(o.pop());return d.showInput(),d.positionDropdown(),d.refreshOptions(!0),l&&(u=d.getOption(l),u.length&&d.setActiveOption(u)),!0},advanceSelection:function(e,t){var i,n,r,a,o,s,l=this;0!==e&&(l.rtl&&(e*=-1),i=e>0?"last":"first",n=T(l.$control_input[0]),l.isFocused&&!l.isInputHidden?(a=l.$control_input.val().length,o=0>e?0===n.start&&0===n.length:n.start===a,o&&!a&&l.advanceCaret(e,t)):(s=l.$control.children(".active:"+i),s.length&&(r=l.$control.children(":not(input)").index(s),l.setActiveItem(null),l.setCaret(e>0?r+1:r))))},advanceCaret:function(e,t){var i,n,r=this;0!==e&&(i=e>0?"next":"prev",r.isShiftDown?(n=r.$control_input[i](),n.length&&(r.hideInput(),r.setActiveItem(n),t&&t.preventDefault())):r.setCaret(r.caretPos+e))},setCaret:function(t){var i=this;if(t="single"===i.settings.mode?i.items.length:Math.max(0,Math.min(i.items.length,t)),!i.isPending){var n,r,a,o;for(a=i.$control.children(":not(input)"),n=0,r=a.length;r>n;n++)o=e(a[n]).detach(),t>n?i.$control_input.before(o):i.$control.append(o)}i.caretPos=t},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){var e=this;e.$input.prop("disabled",!0),e.$control_input.prop("disabled",!0).prop("tabindex",-1),e.isDisabled=!0,e.lock()},enable:function(){var e=this;e.$input.prop("disabled",!1),e.$control_input.prop("disabled",!1).prop("tabindex",e.tabIndex),e.isDisabled=!1,e.unlock()},destroy:function(){var t=this,i=t.eventNS,n=t.revertSettings;t.trigger("destroy"),t.off(),t.$wrapper.remove(),t.$dropdown.remove(),t.$input.html("").append(n.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:n.tabindex}).show(),t.$control_input.removeData("grow"),t.$input.removeData("selectize"),e(window).off(i),e(document).off(i),e(document.body).off(i),delete t.$input[0].selectize},render:function(e,t){var i,n,r="",a=!1,o=this,s=/^[\t \r\n]*<([a-z][a-z0-9\-_]*(?:\:[a-z][a-z0-9\-_]*)?)/i;return("option"===e||"item"===e)&&(i=P(t[o.settings.valueField]),a=!!i),a&&(C(o.renderCache[e])||(o.renderCache[e]={}),o.renderCache[e].hasOwnProperty(i))?o.renderCache[e][i]:(r=o.settings.render[e].apply(this,[t,$]),("option"===e||"option_create"===e)&&(r=r.replace(s,"<$1 data-selectable")),"optgroup"===e&&(n=t[o.settings.optgroupValueField]||"",r=r.replace(s,'<$1 data-group="'+O($(n))+'"')),("option"===e||"item"===e)&&(r=r.replace(s,'<$1 data-value="'+O($(i||""))+'"')),a&&(o.renderCache[e][i]=r),r)},clearCache:function(e){var t=this;"undefined"==typeof e?t.renderCache={}:delete t.renderCache[e]},canCreate:function(e){var t=this;if(!t.settings.create)return!1;var i=t.settings.createFilter;return!(!e.length||"function"==typeof i&&!i.apply(t,[e])||"string"==typeof i&&!new RegExp(i).test(e)||i instanceof RegExp&&!i.test(e))}}),D.count=0,D.defaults={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:!1,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!1,preload:!1,allowEmptyOption:!1,closeAfterSelect:!1,scrollDuration:60,loadThrottle:300,loadingClass:"loading",dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,copyClassesToDropdown:!0,render:{}},e.fn.selectize=function(t){var i=e.fn.selectize.defaults,n=e.extend({},i,t),r=n.dataAttr,a=n.labelField,o=n.valueField,s=n.optgroupField,l=n.optgroupLabelField,u=n.optgroupValueField,c=function(t,i){var s,l,u,c,d=t.attr(r);if(d)for(i.options=JSON.parse(d),s=0,l=i.options.length;l>s;s++)i.items.push(i.options[s][o]);else{var p=e.trim(t.val()||"");if(!n.allowEmptyOption&&!p.length)return;for(u=p.split(n.delimiter),s=0,l=u.length;l>s;s++)c={},c[a]=u[s],c[o]=u[s],i.options.push(c);i.items=u}},d=function(t,i){var c,d,p,f,h=i.options,m={},g=function(e){var t=r&&e.attr(r);return"string"==typeof t&&t.length?JSON.parse(t):null},v=function(t,r){t=e(t);var l=P(t.attr("value"));if(l||n.allowEmptyOption)if(m.hasOwnProperty(l)){if(r){var u=m[l][s];u?e.isArray(u)?u.push(r):m[l][s]=[u,r]:m[l][s]=r}}else{var c=g(t)||{};c[a]=c[a]||t.text(),c[o]=c[o]||l,c[s]=c[s]||r,m[l]=c,h.push(c),t.is(":selected")&&i.items.push(l)}},y=function(t){var n,r,a,o,s;for(t=e(t),a=t.attr("label"),a&&(o=g(t)||{},o[l]=a,o[u]=a,i.optgroups.push(o)),s=e("option",t),n=0,r=s.length;r>n;n++)v(s[n],a)};for(i.maxItems=t.attr("multiple")?null:1,f=t.children(),c=0,d=f.length;d>c;c++)p=f[c].tagName.toLowerCase(),"optgroup"===p?y(f[c]):"option"===p&&v(f[c])};return this.each(function(){if(!this.selectize){var r,a=e(this),o=this.tagName.toLowerCase(),s=a.attr("placeholder")||a.attr("data-placeholder");s||n.allowEmptyOption||(s=a.children('option[value=""]').text());var l={placeholder:s,options:[],optgroups:[],items:[]};"select"===o?d(a,l):c(a,l),r=new D(a,e.extend(!0,{},i,l,t))}})},e.fn.selectize.defaults=D.defaults,e.fn.selectize.support={validity:w},D.define("drag_drop",function(){if(!e.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if("multi"===this.settings.mode){var t=this;t.lock=function(){var e=t.lock;return function(){var i=t.$control.data("sortable");return i&&i.disable(),e.apply(t,arguments)}}(),t.unlock=function(){var e=t.unlock;return function(){var i=t.$control.data("sortable");return i&&i.enable(),e.apply(t,arguments)}}(),t.setup=function(){var i=t.setup;return function(){i.apply(this,arguments);var n=t.$control.sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:t.isLocked,start:function(e,t){t.placeholder.css("width",t.helper.css("width")),n.css({overflow:"visible"})},stop:function(){n.css({overflow:"hidden"});var i=t.$activeItems?t.$activeItems.slice():null,r=[];n.children("[data-value]").each(function(){r.push(e(this).attr("data-value"))}),t.setValue(r),t.setActiveItem(i)}})}}()}}),D.define("dropdown_header",function(t){var i=this;t=e.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(e){return'<div class="'+e.headerClass+'"><div class="'+e.titleRowClass+'"><span class="'+e.labelClass+'">'+e.title+'</span><a href="javascript:void(0)" class="'+e.closeClass+'">&times;</a></div></div>'}},t),i.setup=function(){var n=i.setup;return function(){n.apply(i,arguments),i.$dropdown_header=e(t.html(t)),i.$dropdown.prepend(i.$dropdown_header)}}()}),D.define("optgroup_columns",function(t){var i=this;t=e.extend({equalizeWidth:!0,equalizeHeight:!0},t),this.getAdjacentOption=function(t,i){var n=t.closest("[data-group]").find("[data-selectable]"),r=n.index(t)+i;return r>=0&&r<n.length?n.eq(r):e()},this.onKeyDown=function(){var e=i.onKeyDown;return function(t){var n,r,a,o;return!this.isOpen||t.keyCode!==u&&t.keyCode!==p?e.apply(this,arguments):(i.ignoreHover=!0,o=this.$activeOption.closest("[data-group]"),n=o.find("[data-selectable]").index(this.$activeOption),o=t.keyCode===u?o.prev("[data-group]"):o.next("[data-group]"),a=o.find("[data-selectable]"),r=a.eq(Math.min(a.length-1,n)),void(r.length&&this.setActiveOption(r)))}}();var n=function(){var e,t=n.width,i=document;return"undefined"==typeof t&&(e=i.createElement("div"),e.innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',e=e.firstChild,i.body.appendChild(e),t=n.width=e.offsetWidth-e.clientWidth,i.body.removeChild(e)),t},r=function(){var r,a,o,s,l,u,c;if(c=e("[data-group]",i.$dropdown_content),a=c.length,a&&i.$dropdown_content.width()){if(t.equalizeHeight){for(o=0,r=0;a>r;r++)o=Math.max(o,c.eq(r).height());c.css({height:o})}t.equalizeWidth&&(u=i.$dropdown_content.innerWidth()-n(),s=Math.round(u/a),c.css({width:s}),a>1&&(l=u-s*(a-1),c.eq(a-1).css({width:l})))}};(t.equalizeHeight||t.equalizeWidth)&&(_.after(this,"positionDropdown",r),_.after(this,"refreshOptions",r))}),D.define("remove_button",function(t){if("single"!==this.settings.mode){t=e.extend({label:"&times;",title:"Remove",className:"remove",append:!0},t);var i=this,n='<a href="javascript:void(0)" class="'+t.className+'" tabindex="-1" title="'+$(t.title)+'">'+t.label+"</a>",r=function(e,t){var i=e.search(/(<\/[^>]+>\s*)$/);return e.substring(0,i)+t+e.substring(i)};this.setup=function(){var a=i.setup;return function(){if(t.append){var o=i.settings.render.item;i.settings.render.item=function(){return r(o.apply(this,arguments),n)}}a.apply(this,arguments),this.$control.on("click","."+t.className,function(t){if(t.preventDefault(),!i.isLocked){var n=e(t.currentTarget).parent();i.setActiveItem(n),i.deleteSelection()&&i.setCaret(i.items.length)}})}}()}}),D.define("restore_on_backspace",function(e){var t=this;e.text=e.text||function(e){return e[this.settings.labelField]},this.onKeyDown=function(){var i=t.onKeyDown;return function(t){var n,r;return t.keyCode===m&&""===this.$control_input.val()&&!this.$activeItems.length&&(n=this.caretPos-1,n>=0&&n<this.items.length)?(r=this.options[this.items[n]],this.deleteSelection(t)&&(this.setTextboxValue(e.text.apply(this,[r])),this.refreshOptions(!0)),void t.preventDefault()):i.apply(this,arguments)}}()}),D}),!function(e){function t(e){var t=document.createElement("input"),i="on"+e,n=i in t;return n||(t.setAttribute(i,"return;"),n="function"==typeof t[i]),t=null,n}function i(e){var t="text"==e||"tel"==e||"password"==e;if(!t){var i=document.createElement("input");i.setAttribute("type",e),t="text"===i.type,i=null}return t}function n(t,i,r){var a=r.aliases[t];return a?(a.alias&&n(a.alias,void 0,r),e.extend(!0,r,a),e.extend(!0,r,i),!0):!1}function r(t,i){function n(i){function n(e,t,i,n){this.matches=[],this.isGroup=e||!1,this.isOptional=t||!1,this.isQuantifier=i||!1,this.isAlternator=n||!1,this.quantifier={min:1,max:1}}function r(i,n,r){var a=t.definitions[n],o=0==i.matches.length;if(r=void 0!=r?r:i.matches.length,a&&!p){a.placeholder=e.isFunction(a.placeholder)?a.placeholder.call(this,t):a.placeholder;for(var s=a.prevalidator,l=s?s.length:0,u=1;u<a.cardinality;u++){var c=l>=u?s[u-1]:[],d=c.validator,f=c.cardinality;i.matches.splice(r++,0,{fn:d?"string"==typeof d?new RegExp(d):new function(){this.test=d}:new RegExp("."),cardinality:f?f:1,optionality:i.isOptional,newBlockMarker:o,casing:a.casing,def:a.definitionSymbol||n,placeholder:a.placeholder,mask:n})}i.matches.splice(r++,0,{fn:a.validator?"string"==typeof a.validator?new RegExp(a.validator):new function(){this.test=a.validator}:new RegExp("."),cardinality:a.cardinality,optionality:i.isOptional,newBlockMarker:o,casing:a.casing,def:a.definitionSymbol||n,placeholder:a.placeholder,mask:n})}else i.matches.splice(r++,0,{fn:null,cardinality:0,optionality:i.isOptional,newBlockMarker:o,casing:null,def:n,placeholder:void 0,mask:n}),p=!1}for(var a,o,s,l,u,c,d=/(?:[?*+]|\{[0-9\+\*]+(?:,[0-9\+\*]*)?\})\??|[^.?*+^${[]()|\\]+|./g,p=!1,f=new n,h=[],m=[];a=d.exec(i);)switch(o=a[0],o.charAt(0)){case t.optionalmarker.end:case t.groupmarker.end:if(s=h.pop(),h.length>0){if(l=h[h.length-1],l.matches.push(s),l.isAlternator){u=h.pop();for(var g=0;g<u.matches.length;g++)u.matches[g].isGroup=!1;h.length>0?(l=h[h.length-1],l.matches.push(u)):f.matches.push(u)}}else f.matches.push(s);break;case t.optionalmarker.start:h.push(new n(!1,!0));break;case t.groupmarker.start:h.push(new n(!0));break;case t.quantifiermarker.start:var v=new n(!1,!1,!0);o=o.replace(/[{}]/g,"");var y=o.split(","),b=isNaN(y[0])?y[0]:parseInt(y[0]),k=1==y.length?b:isNaN(y[1])?y[1]:parseInt(y[1]);if(("*"==k||"+"==k)&&(b="*"==k?0:1),v.quantifier={min:b,max:k},h.length>0){var x=h[h.length-1].matches;if(a=x.pop(),!a.isGroup){var S=new n(!0);S.matches.push(a),a=S}x.push(a),x.push(v)}else{if(a=f.matches.pop(),!a.isGroup){var S=new n(!0);S.matches.push(a),a=S}f.matches.push(a),f.matches.push(v)}break;case t.escapeChar:p=!0;break;case t.alternatormarker:h.length>0?(l=h[h.length-1],c=l.matches.pop()):c=f.matches.pop(),c.isAlternator?h.push(c):(u=new n(!1,!1,!1,!0),u.matches.push(c),h.push(u));break;default:if(h.length>0){if(l=h[h.length-1],l.matches.length>0&&!l.isAlternator&&(c=l.matches[l.matches.length-1],c.isGroup&&(c.isGroup=!1,r(c,t.groupmarker.start,0),r(c,t.groupmarker.end))),r(l,o),l.isAlternator){u=h.pop();for(var g=0;g<u.matches.length;g++)u.matches[g].isGroup=!1;h.length>0?(l=h[h.length-1],l.matches.push(u)):f.matches.push(u)}}else f.matches.length>0&&(c=f.matches[f.matches.length-1],c.isGroup&&(c.isGroup=!1,r(c,t.groupmarker.start,0),r(c,t.groupmarker.end))),r(f,o)}return f.matches.length>0&&(c=f.matches[f.matches.length-1],c.isGroup&&(c.isGroup=!1,r(c,t.groupmarker.start,0),r(c,t.groupmarker.end)),m.push(f)),m}function r(r,a){if(void 0==r||""==r)return void 0;if(1==r.length&&0==t.greedy&&0!=t.repeat&&(t.placeholder=""),t.repeat>0||"*"==t.repeat||"+"==t.repeat){var o="*"==t.repeat?0:"+"==t.repeat?1:t.repeat;r=t.groupmarker.start+r+t.groupmarker.end+t.quantifiermarker.start+o+","+t.repeat+t.quantifiermarker.end}var s;return void 0==e.inputmask.masksCache[r]||i===!0?(s={mask:r,maskToken:n(r),validPositions:{},_buffer:void 0,buffer:void 0,tests:{},metadata:a},i!==!0&&(e.inputmask.masksCache[r]=s)):s=e.extend(!0,{},e.inputmask.masksCache[r]),s}function a(e){if(e=e.toString(),t.numericInput){e=e.split("").reverse();for(var i=0;i<e.length;i++)e[i]==t.optionalmarker.start?e[i]=t.optionalmarker.end:e[i]==t.optionalmarker.end?e[i]=t.optionalmarker.start:e[i]==t.groupmarker.start?e[i]=t.groupmarker.end:e[i]==t.groupmarker.end&&(e[i]=t.groupmarker.start);e=e.join("")}return e}var o=void 0;if(e.isFunction(t.mask)&&(t.mask=t.mask.call(this,t)),e.isArray(t.mask)){if(t.mask.length>1){t.keepStatic=void 0==t.keepStatic?!0:t.keepStatic;var s="(";return e.each(t.mask,function(t,i){s.length>1&&(s+=")|("),s+=a(void 0==i.mask||e.isFunction(i.mask)?i:i.mask)}),s+=")",r(s,t.mask)}t.mask=t.mask.pop()}return t.mask&&(o=void 0==t.mask.mask||e.isFunction(t.mask.mask)?r(a(t.mask),t.mask):r(a(t.mask.mask),t.mask)),o}function a(n,r,a){function o(e,t,i){t=t||0;var n,r,a,o=[],s=0;do{if(e===!0&&d().validPositions[s]){var l=d().validPositions[s];r=l.match,n=l.locator.slice(),o.push(i===!0?l.input:z(s,r))}else a=g(s,n,s-1),r=a.match,n=a.locator.slice(),o.push(z(s,r));s++}while((void 0==ne||ne>s-1)&&null!=r.fn||null==r.fn&&""!=r.def||t>=s);return o.pop(),o}function d(){return r}function p(e){var t=d();t.buffer=void 0,t.tests={},e!==!0&&(t._buffer=void 0,t.validPositions={},t.p=0)}function f(e,t){var i=d(),n=-1,r=i.validPositions;void 0==e&&(e=-1);var a=n,o=n;for(var s in r){var l=parseInt(s);r[l]&&(t||null!=r[l].match.fn)&&(e>=l&&(a=l),l>=e&&(o=l))}return n=-1!=a&&e-a>1||e>o?a:o}function h(t,i,n){if(a.insertMode&&void 0!=d().validPositions[t]&&void 0==n){var r,o=e.extend(!0,{},d().validPositions),s=f();for(r=t;s>=r;r++)delete d().validPositions[r];d().validPositions[t]=i;var l,u=!0,c=d().validPositions;for(r=l=t;s>=r;r++){var p=o[r];if(void 0!=p)for(var h=l,m=-1;h<O()&&(null==p.match.fn&&c[r]&&(c[r].match.optionalQuantifier===!0||c[r].match.optionality===!0)||null!=p.match.fn);){if(null==p.match.fn||!a.keepStatic&&c[r]&&(void 0!=c[r+1]&&b(r+1,c[r].locator.slice(),r).length>1||void 0!=c[r].alternation)?h++:h=_(l),y(h,p.match.def)){u=P(h,p.input,!0,!0)!==!1,l=h;break}if(u=null==p.match.fn,m==h)break;m=h}if(!u)break}if(!u)return d().validPositions=e.extend(!0,{},o),!1}else d().validPositions[t]=i;return!0}function m(e,t,i,n){var r,o=e;for(d().p=e,void 0!=d().validPositions[e]&&d().validPositions[e].input==a.radixPoint&&(t++,o++),r=o;t>r;r++)void 0!=d().validPositions[r]&&(i===!0||0!=a.canClearPosition(d(),r,f(),n,a))&&delete d().validPositions[r];for(p(!0),r=o+1;r<=f();){for(;void 0!=d().validPositions[o];)o++;var s=d().validPositions[o];o>r&&(r=o+1);var l=d().validPositions[r];void 0!=l&&void 0==s?(y(o,l.match.def)&&P(o,l.input,!0)!==!1&&(delete d().validPositions[r],r++),o++):r++}var u=f(),c=O();for(u>=e&&void 0!=d().validPositions[u]&&d().validPositions[u].input==a.radixPoint&&delete d().validPositions[u],r=u+1;c>=r;r++)d().validPositions[r]&&delete d().validPositions[r];p(!0)}function g(e,t,i){var n=d().validPositions[e];if(void 0==n)for(var r=b(e,t,i),o=f(),s=d().validPositions[o]||b(0)[0],l=void 0!=s.alternation?s.locator[s.alternation].toString().split(","):[],u=0;u<r.length&&(n=r[u],!(n.match&&(a.greedy&&n.match.optionalQuantifier!==!0||(n.match.optionality===!1||n.match.newBlockMarker===!1)&&n.match.optionalQuantifier!==!0)&&(void 0==s.alternation||s.alternation!=n.alternation||void 0!=n.locator[s.alternation]&&C(n.locator[s.alternation].toString().split(","),l))));u++);return n}function v(e){return d().validPositions[e]?d().validPositions[e].match:b(e)[0].match}function y(e,t){for(var i=!1,n=b(e),r=0;r<n.length;r++)if(n[r].match&&n[r].match.def==t){i=!0;break}return i}function b(t,i,n,r){function a(i,n,r,o){function l(r,o,f){if(s>1e4)return alert("jquery.inputmask: There is probably an error in your mask definition or in the code. Create an issue on github with an example of the mask you are using. "+d().mask),!0;if(s==t&&void 0==r.matches)return u.push({match:r,locator:o.reverse()}),!0;if(void 0!=r.matches){if(r.isGroup&&f!==!0){if(r=l(i.matches[p+1],o))return!0}else if(r.isOptional){var h=r;if(r=a(r,n,o,f)){var m=u[u.length-1].match,g=0==e.inArray(m,h.matches);if(!g)return!0;c=!0,s=t}}else if(r.isAlternator){var v,y=r,b=[],k=u.slice(),x=o.length,S=n.length>0?n.shift():-1;if(-1==S||"string"==typeof S){var w=s,C=n.slice(),P=[];"string"==typeof S&&(P=S.split(","));for(var $=0;$<y.matches.length;$++){if(u=[],r=l(y.matches[$],[$].concat(o),f)||r,r!==!0&&void 0!=r&&P[P.length-1]<y.matches.length){var O=i.matches.indexOf(r)+1;i.matches.length>O&&(r=l(i.matches[O],[O].concat(o.slice(1,o.length)),f),r&&(P.push(O.toString()),e.each(u,function(e,t){t.alternation=o.length-1})))}v=u.slice(),s=w,u=[];for(var _=0;_<C.length;_++)n[_]=C[_];for(var A=0;A<v.length;A++){var E=v[A];E.alternation=E.alternation||x;for(var I=0;I<b.length;I++){var z=b[I];if(E.match.mask==z.match.mask&&("string"!=typeof S||-1!=e.inArray(E.locator[E.alternation].toString(),P))){v.splice(A,1),A--,z.locator[E.alternation]=z.locator[E.alternation]+","+E.locator[E.alternation],z.alternation=E.alternation;break}}}b=b.concat(v)}"string"==typeof S&&(b=e.map(b,function(t,i){if(isFinite(i)){var n,r=t.alternation,a=t.locator[r].toString().split(",");t.locator[r]=void 0,t.alternation=void 0;for(var o=0;o<a.length;o++)n=-1!=e.inArray(a[o],P),n&&(void 0!=t.locator[r]?(t.locator[r]+=",",t.locator[r]+=a[o]):t.locator[r]=parseInt(a[o]),t.alternation=r);if(void 0!=t.locator[r])return t}})),u=k.concat(b),s=t,c=u.length>0}else r=y.matches[S]?l(y.matches[S],[S].concat(o),f):!1;if(r)return!0}else if(r.isQuantifier&&f!==!0)for(var T=r,M=n.length>0&&f!==!0?n.shift():0;M<(isNaN(T.quantifier.max)?M+1:T.quantifier.max)&&t>=s;M++){var F=i.matches[e.inArray(T,i.matches)-1];if(r=l(F,[M].concat(o),!0)){var m=u[u.length-1].match;m.optionalQuantifier=M>T.quantifier.min-1;var g=0==e.inArray(m,F.matches);if(g){if(M>T.quantifier.min-1){c=!0,s=t;break}return!0}return!0}}else if(r=a(r,n,o,f))return!0}else s++}for(var p=n.length>0?n.shift():0;p<i.matches.length;p++)if(i.matches[p].isQuantifier!==!0){var f=l(i.matches[p],[p].concat(r),o);if(f&&s==t)return f;if(s>t)break}}var o=d().maskToken,s=i?n:0,l=i||[0],u=[],c=!1;if(r===!0&&d().tests[t])return d().tests[t];if(void 0==i){for(var p,f=t-1;void 0==(p=d().validPositions[f])&&f>-1&&(!d().tests[f]||void 0==(p=d().tests[f][0]));)f--;void 0!=p&&f>-1&&(s=f,l=p.locator.slice())}for(var h=l.shift();h<o.length;h++){var m=a(o[h],l,[h]);if(m&&s==t||s>t)break}return(0==u.length||c)&&u.push({match:{fn:null,cardinality:0,optionality:!0,casing:null,def:""},locator:[]}),d().tests[t]=e.extend(!0,[],u),d().tests[t]}function k(){return void 0==d()._buffer&&(d()._buffer=o(!1,1)),d()._buffer}function x(){return void 0==d().buffer&&(d().buffer=o(!0,f(),!0)),d().buffer}function S(e,t,i){if(i=i||x().slice(),e===!0)p(),e=0,t=i.length;else for(var n=e;t>n;n++)delete d().validPositions[n],delete d().tests[n];for(var n=e;t>n;n++)i[n]!=a.skipOptionalPartCharacter&&P(n,i[n],!0,!0)}function w(e,t){switch(t.casing){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();

}return e}function C(t,i){for(var n=a.greedy?i:i.slice(0,1),r=!1,o=0;o<t.length;o++)if(-1!=e.inArray(t[o],n)){r=!0;break}return r}function P(t,i,n,r){function o(t,i,n,r){var o=!1;return e.each(b(t),function(s,l){for(var u=l.match,c=i?1:0,g="",v=(x(),u.cardinality);v>c;v--)g+=E(t-(v-1));if(i&&(g+=i),o=null!=u.fn?u.fn.test(g,d(),t,n,a):i!=u.def&&i!=a.skipOptionalPartCharacter||""==u.def?!1:{c:u.def,pos:t},o!==!1){var y=void 0!=o.c?o.c:i;y=y==a.skipOptionalPartCharacter&&null===u.fn?u.def:y;var b=t,k=x();if(void 0!=o.remove&&(e.isArray(o.remove)||(o.remove=[o.remove]),e.each(o.remove.sort(function(e,t){return t-e}),function(e,t){m(t,t+1,!0)})),void 0!=o.insert&&(e.isArray(o.insert)||(o.insert=[o.insert]),e.each(o.insert.sort(function(e,t){return e-t}),function(e,t){P(t.pos,t.c,!0)})),o.refreshFromBuffer){var C=o.refreshFromBuffer;if(n=!0,S(C===!0?C:C.start,C.end,k),void 0==o.pos&&void 0==o.c)return o.pos=f(),!1;if(b=void 0!=o.pos?o.pos:t,b!=t)return o=e.extend(o,P(b,y,!0)),!1}else if(o!==!0&&void 0!=o.pos&&o.pos!=t&&(b=o.pos,S(t,b),b!=t))return o=e.extend(o,P(b,y,!0)),!1;return 1!=o&&void 0==o.pos&&void 0==o.c?!1:(s>0&&p(!0),h(b,e.extend({},l,{input:w(y,u)}),r)||(o=!1),!1)}}),o}function s(t,i,n,r){for(var o,s,l,u,c=e.extend(!0,{},d().validPositions),h=f();h>=0&&(u=d().validPositions[h],!u||void 0==u.alternation||(o=h,s=d().validPositions[o].alternation,g(o).locator[u.alternation]==u.locator[u.alternation]));h--);if(void 0!=s)for(var m in d().validPositions)if(u=d().validPositions[m],parseInt(m)>parseInt(o)&&void 0!=u.alternation){var v=d().validPositions[o].locator[s].toString().split(","),y=u.locator[s]||v[0];y.length>0&&(y=y.split(",")[0]);for(var b=0;b<v.length;b++)if(y<v[b]){for(var k,x,S=m-1;S>=0;S--)if(k=d().validPositions[S],void 0!=k){x=k.locator[s],k.locator[s]=parseInt(v[b]);break}if(y!=k.locator[s]){for(var w=[],C=m;C<f()+1;C++){var $=d().validPositions[C];$&&null!=$.match.fn&&w.push($.input),delete d().validPositions[C],delete d().tests[C]}for(p(!0),a.keepStatic=!a.keepStatic,l=!0;w.length>0;){var O=w.shift();if(O!=a.skipOptionalPartCharacter&&!(l=P(f()+1,O,!1,!0)))break}if(k.alternation=s,k.locator[s]=x,l){var _=f(t)+1;l=P(t>_?_:t,i,n,r)}if(a.keepStatic=!a.keepStatic,l)return l;p(),d().validPositions=e.extend(!0,{},c)}}break}return!1}function l(t,i){for(var n=d().validPositions[i],r=n.locator,a=r.length,o=t;i>o;o++)if(!$(o)){var s=b(o),l=s[0],u=-1;e.each(s,function(e,t){for(var i=0;a>i;i++)t.locator[i]&&C(t.locator[i].toString().split(","),r[i].toString().split(","))&&i>u&&(u=i,l=t)}),h(o,e.extend({},l,{input:l.match.def}),!0)}}n=n===!0;for(var u=x(),c=t-1;c>-1&&!d().validPositions[c];c--);for(c++;t>c;c++)void 0==d().validPositions[c]&&((!$(c)||u[c]!=z(c))&&b(c).length>1||u[c]==a.radixPoint||"0"==u[c]&&e.inArray(a.radixPoint,u)<c)&&o(c,u[c],!0);var v=t,y=!1,k=e.extend(!0,{},d().validPositions);if(v<O()&&(y=o(v,i,n,r),(!n||r)&&y===!1)){var A=d().validPositions[v];if(!A||null!=A.match.fn||A.match.def!=i&&i!=a.skipOptionalPartCharacter){if((a.insertMode||void 0==d().validPositions[_(v)])&&!$(v))for(var I=v+1,T=_(v);T>=I;I++)if(y=o(I,i,n,r),y!==!1){l(v,I),v=I;break}}else y={caret:_(v)}}if(y===!1&&a.keepStatic&&N(u)&&(y=s(t,i,n,r)),y===!0&&(y={pos:v}),e.isFunction(a.postValidation)&&0!=y&&!n){p(!0);var M=a.postValidation(x(),a);if(!M)return p(!0),d().validPositions=e.extend(!0,{},k),!1}return y}function $(e){var t=v(e);if(null!=t.fn)return t.fn;if(!a.keepStatic&&void 0==d().validPositions[e]){for(var i=b(e),n=!0,r=0;r<i.length;r++)if(""!=i[r].match.def&&(void 0==i[r].alternation||i[r].locator[i[r].alternation].length>1)){n=!1;break}return n}return!1}function O(){var e;ne=ie.prop("maxLength"),-1==ne&&(ne=void 0);var t,i=f(),n=d().validPositions[i],r=void 0!=n?n.locator.slice():void 0;for(t=i+1;void 0==n||null!=n.match.fn||null==n.match.fn&&""!=n.match.def;t++)n=g(t,r,t-1),r=n.locator.slice();var a=v(t-1);return e=""!=a.def?t:t-1,void 0==ne||ne>e?e:ne}function _(e){var t=O();if(e>=t)return t;for(var i=e;++i<t&&!$(i)&&(a.nojumps!==!0||a.nojumpsThreshold>i););return i}function A(e){var t=e;if(0>=t)return 0;for(;--t>0&&!$(t););return t}function E(e){return void 0==d().validPositions[e]?z(e):d().validPositions[e].input}function I(t,i,n,r,o){if(r&&e.isFunction(a.onBeforeWrite)){var s=a.onBeforeWrite.call(t,r,i,n,a);if(s){if(s.refreshFromBuffer){var l=s.refreshFromBuffer;S(l===!0?l:l.start,l.end,s.buffer),p(!0),i=x()}n=s.caret||n}}t._valueSet(i.join("")),void 0!=n&&D(t,n),o===!0&&(oe=!0,e(t).trigger("input"))}function z(e,t){if(t=t||v(e),void 0!=t.placeholder)return t.placeholder;if(null==t.fn){if(!a.keepStatic&&void 0==d().validPositions[e]){for(var i=b(e),n=!0,r=0;r<i.length;r++)if(""!=i[r].match.def&&(null!==i[r].match.fn||void 0==i[r].alternation||i[r].locator[i[r].alternation].length>1)){n=!1;break}if(n)return a.placeholder.charAt(e%a.placeholder.length)}return t.def}return a.placeholder.charAt(e%a.placeholder.length)}function T(t,i,n,r){function a(){var e=!1,t=k().slice(l,_(l)).join("").indexOf(s);if(-1!=t&&!$(l)){e=!0;for(var i=k().slice(l,l+t),n=0;n<i.length;n++)if(" "!=i[n]){e=!1;break}}return e}var o=void 0!=r?r.slice():t._valueGet().split(""),s="",l=0;if(p(),d().p=_(-1),i&&t._valueSet(""),!n){var u=k().slice(0,_(-1)).join(""),c=o.join("").match(new RegExp("^"+M(u),"g"));c&&c.length>0&&(o.splice(0,c.length*u.length),l=_(l))}e.each(o,function(i,r){var o=e.Event("keypress");o.which=r.charCodeAt(0),s+=r;var u=f(void 0,!0),c=d().validPositions[u],p=g(u+1,c?c.locator.slice():void 0,u);if(!a()||n){var h=n?i:null==p.match.fn&&p.match.optionality&&u+1<d().p?u+1:d().p;q.call(t,o,!0,!1,n,h),l=h+1,s=""}else q.call(t,o,!0,!1,!0,u+1)}),i&&I(t,x(),e(t).is(":focus")?_(f(0)):void 0,e.Event("checkval"))}function M(t){return e.inputmask.escapeRegex(t)}function F(t){if(t.data("_inputmask")&&!t.hasClass("hasDatepicker")){var i=[],n=d().validPositions;for(var r in n)n[r].match&&null!=n[r].match.fn&&i.push(n[r].input);var o=(re?i.reverse():i).join(""),s=(re?x().slice().reverse():x()).join("");return e.isFunction(a.onUnMask)&&(o=a.onUnMask.call(t,s,o,a)||o),o}return t[0]._valueGet()}function L(e){if(re&&"number"==typeof e&&(!a.greedy||""!=a.placeholder)){var t=x().length;e=t-e}return e}function D(t,i,n){var r,o=t.jquery&&t.length>0?t[0]:t;if("number"!=typeof i)return o.setSelectionRange?(i=o.selectionStart,n=o.selectionEnd):window.getSelection?(r=window.getSelection().getRangeAt(0),(r.commonAncestorContainer.parentNode==o||r.commonAncestorContainer==o)&&(i=r.startOffset,n=r.endOffset)):document.selection&&document.selection.createRange&&(r=document.selection.createRange(),i=0-r.duplicate().moveStart("character",-1e5),n=i+r.text.length),{begin:L(i),end:L(n)};if(i=L(i),n=L(n),n="number"==typeof n?n:i,e(o).is(":visible")){var s=e(o).css("font-size").replace("px","")*n;if(o.scrollLeft=s>o.scrollWidth?s:0,l||0!=a.insertMode||i!=n||n++,o.setSelectionRange)o.selectionStart=i,o.selectionEnd=n;else if(window.getSelection){if(r=document.createRange(),void 0==o.firstChild){var u=document.createTextNode("");o.appendChild(u)}r.setStart(o.firstChild,i<o._valueGet().length?i:o._valueGet().length),r.setEnd(o.firstChild,n<o._valueGet().length?n:o._valueGet().length),r.collapse(!0);var c=window.getSelection();c.removeAllRanges(),c.addRange(r)}else o.createTextRange&&(r=o.createTextRange(),r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",i),r.select())}}function R(t){var i,n,r=x(),a=r.length,o=f(),s={},l=d().validPositions[o],u=void 0!=l?l.locator.slice():void 0;for(i=o+1;i<r.length;i++)n=g(i,u,i-1),u=n.locator.slice(),s[i]=e.extend(!0,{},n);var c=l&&void 0!=l.alternation?l.locator[l.alternation]:void 0;for(i=a-1;i>o&&(n=s[i],(n.match.optionality||n.match.optionalQuantifier||c&&(c!=s[i].locator[l.alternation]&&null!=n.match.fn||null==n.match.fn&&n.locator[l.alternation]&&C(n.locator[l.alternation].toString().split(","),c.split(","))&&""!=b(i)[0].def))&&r[i]==z(i,n.match));i--)a--;return t?{l:a,def:s[a]?s[a].match:void 0}:a}function H(e){for(var t=R(),i=e.length-1;i>t&&!$(i);i--);return e.splice(t,i+1-t),e}function N(t){if(e.isFunction(a.isComplete))return a.isComplete.call(ie,t,a);if("*"==a.repeat)return void 0;var i=!1,n=R(!0),r=A(n.l);if(f(),void 0==n.def||n.def.newBlockMarker||n.def.optionality||n.def.optionalQuantifier){i=!0;for(var o=0;r>=o;o++){var s=g(o).match;if(null!=s.fn&&void 0==d().validPositions[o]&&s.optionality!==!0&&s.optionalQuantifier!==!0||null==s.fn&&t[o]!=z(o,s)){i=!1;break}}}return i}function j(e,t){return re?e-t>1||e-t==1&&a.insertMode:t-e>1||t-e==1&&a.insertMode}function B(t){var i=e._data(t).events,n=!1;e.each(i,function(t,i){e.each(i,function(t,i){if("inputmask"==i.namespace&&"setvalue"!=i.type){var r=i.handler;i.handler=function(t){if(!(this.disabled||this.readOnly&&!("keydown"==t.type&&t.ctrlKey&&67==t.keyCode||t.keyCode==e.inputmask.keyCode.TAB))){switch(t.type){case"input":if(oe===!0||n===!0)return oe=!1,t.preventDefault();break;case"keydown":ae=!1,n=!1;break;case"keypress":if(ae===!0)return t.preventDefault();ae=!0;break;case"compositionstart":n=!0;break;case"compositionupdate":oe=!0;break;case"compositionend":n=!1}return r.apply(this,arguments)}t.preventDefault()}}})})}function G(t){function i(t){if(void 0==e.valHooks[t]||1!=e.valHooks[t].inputmaskpatch){var i=e.valHooks[t]&&e.valHooks[t].get?e.valHooks[t].get:function(e){return e.value},n=e.valHooks[t]&&e.valHooks[t].set?e.valHooks[t].set:function(e,t){return e.value=t,e};e.valHooks[t]={get:function(t){var n=e(t);if(n.data("_inputmask")){if(n.data("_inputmask").opts.autoUnmask)return n.inputmask("unmaskedvalue");var r=i(t),a=n.data("_inputmask"),o=a.maskset,s=o._buffer;return s=s?s.join(""):"",r!=s?r:""}return i(t)},set:function(t,i){var r,a=e(t),o=a.data("_inputmask");return r=n(t,i),o&&a.triggerHandler("setvalue.inputmask"),r},inputmaskpatch:!0}}}function n(){var t=e(this),i=e(this).data("_inputmask");return i?i.opts.autoUnmask?t.inputmask("unmaskedvalue"):o.call(this)!=k().join("")?o.call(this):"":o.call(this)}function r(t){var i=e(this).data("_inputmask");s.call(this,t),i&&e(this).triggerHandler("setvalue.inputmask")}function a(t){e(t).bind("mouseenter.inputmask",function(t){var i=e(this),n=this,r=n._valueGet();""!=r&&r!=x().join("")&&i.triggerHandler("setvalue.inputmask")});var i=e._data(t).events,n=i.mouseover;if(n){for(var r=n[n.length-1],a=n.length-1;a>0;a--)n[a]=n[a-1];n[0]=r}}var o,s;if(!t._valueGet){var l;Object.getOwnPropertyDescriptor&&void 0==t.value?(o=function(){return this.textContent},s=function(e){this.textContent=e},Object.defineProperty(t,"value",{get:n,set:r})):((l=Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(t,"value"))&&l.configurable,document.__lookupGetter__&&t.__lookupGetter__("value")?(o=t.__lookupGetter__("value"),s=t.__lookupSetter__("value"),t.__defineGetter__("value",n),t.__defineSetter__("value",r)):(o=function(){return t.value},s=function(e){t.value=e},i(t.type),a(t))),t._valueGet=function(e){return re&&e!==!0?o.call(this).split("").reverse().join(""):o.call(this)},t._valueSet=function(e){s.call(this,re?e.split("").reverse().join(""):e)}}}function V(t,i,n,r){function o(){if(a.keepStatic){p(!0);var i,n=[],r=e.extend(!0,{},d().validPositions);for(i=f();i>=0;i--){var o=d().validPositions[i];if(o){if(void 0!=o.alternation&&o.locator[o.alternation]==g(i).locator[o.alternation])break;null!=o.match.fn&&n.push(o.input),delete d().validPositions[i]}}if(i>0)for(;n.length>0;){d().p=_(f());var s=e.Event("keypress");s.which=n.pop().charCodeAt(0),q.call(t,s,!0,!1,!1,d().p)}else d().validPositions=e.extend(!0,{},r)}}if((a.numericInput||re)&&(i==e.inputmask.keyCode.BACKSPACE?i=e.inputmask.keyCode.DELETE:i==e.inputmask.keyCode.DELETE&&(i=e.inputmask.keyCode.BACKSPACE),re)){var s=n.end;n.end=n.begin,n.begin=s}if(i==e.inputmask.keyCode.BACKSPACE&&(n.end-n.begin<1||0==a.insertMode)?n.begin=A(n.begin):i==e.inputmask.keyCode.DELETE&&n.begin==n.end&&(n.end=$(n.end)?n.end+1:_(n.end)+1),m(n.begin,n.end,!1,r),r!==!0){o();var l=f(n.begin);l<n.begin?(-1==l&&p(),d().p=_(l)):d().p=n.begin}}function K(i){var n=this,r=e(n),o=i.keyCode,l=D(n);o==e.inputmask.keyCode.BACKSPACE||o==e.inputmask.keyCode.DELETE||s&&127==o||i.ctrlKey&&88==o&&!t("cut")?(i.preventDefault(),88==o&&(X=x().join("")),V(n,o,l),I(n,x(),d().p,i,X!=x().join("")),n._valueGet()==k().join("")?r.trigger("cleared"):N(x())===!0&&r.trigger("complete"),a.showTooltip&&r.prop("title",d().mask)):o==e.inputmask.keyCode.END||o==e.inputmask.keyCode.PAGE_DOWN?setTimeout(function(){var e=_(f());a.insertMode||e!=O()||i.shiftKey||e--,D(n,i.shiftKey?l.begin:e,e)},0):o==e.inputmask.keyCode.HOME&&!i.shiftKey||o==e.inputmask.keyCode.PAGE_UP?D(n,0,i.shiftKey?l.begin:0):(a.undoOnEscape&&o==e.inputmask.keyCode.ESCAPE||90==o&&i.ctrlKey)&&i.altKey!==!0?(T(n,!0,!1,X.split("")),r.click()):o!=e.inputmask.keyCode.INSERT||i.shiftKey||i.ctrlKey?0!=a.insertMode||i.shiftKey||(o==e.inputmask.keyCode.RIGHT?setTimeout(function(){var e=D(n);D(n,e.begin)},0):o==e.inputmask.keyCode.LEFT&&setTimeout(function(){var e=D(n);D(n,re?e.begin+1:e.begin-1)},0)):(a.insertMode=!a.insertMode,D(n,a.insertMode||l.begin!=O()?l.begin:l.begin-1)),a.onKeyDown.call(this,i,x(),D(n).begin,a),se=-1!=e.inArray(o,a.ignorables)}function q(t,i,n,r,o){var s=this,l=e(s),u=t.which||t.charCode||t.keyCode;if(!(i===!0||t.ctrlKey&&t.altKey)&&(t.ctrlKey||t.metaKey||se))return!0;if(u){46==u&&0==t.shiftKey&&","==a.radixPoint&&(u=44);var c,f=i?{begin:o,end:o}:D(s),m=String.fromCharCode(u),g=j(f.begin,f.end);g&&(d().undoPositions=e.extend(!0,{},d().validPositions),V(s,e.inputmask.keyCode.DELETE,f,!0),f.begin=d().p,a.insertMode||(a.insertMode=!a.insertMode,h(f.begin,r),a.insertMode=!a.insertMode),g=!a.multi),d().writeOutBuffer=!0;var v=re&&!g?f.end:f.begin,y=P(v,m,r);if(y!==!1){if(y!==!0&&(v=void 0!=y.pos?y.pos:v,m=void 0!=y.c?y.c:m),p(!0),void 0!=y.caret)c=y.caret;else{var k=d().validPositions;c=!a.keepStatic&&(void 0!=k[v+1]&&b(v+1,k[v].locator.slice(),v).length>1||void 0!=k[v].alternation)?v+1:_(v)}d().p=c}if(n!==!1){var w=this;if(setTimeout(function(){a.onKeyValidation.call(w,y,a)},0),d().writeOutBuffer&&y!==!1){var C=x();I(s,C,i?void 0:a.numericInput?A(c):c,t,i!==!0),i!==!0&&setTimeout(function(){N(C)===!0&&l.trigger("complete")},0)}else g&&(d().buffer=void 0,d().validPositions=d().undoPositions)}else g&&(d().buffer=void 0,d().validPositions=d().undoPositions);if(a.showTooltip&&l.prop("title",d().mask),i&&e.isFunction(a.onBeforeWrite)){var $=a.onBeforeWrite.call(this,t,x(),c,a);if($&&$.refreshFromBuffer){var O=$.refreshFromBuffer;S(O===!0?O:O.start,O.end,$.buffer),p(!0),$.caret&&(d().p=$.caret)}}t.preventDefault()}}function W(t){var i=this,n=e(i),r=i._valueGet(!0),o=D(i);if("propertychange"==t.type&&i._valueGet().length<=O())return!0;if("paste"==t.type){var s=r.substr(0,o.begin),l=r.substr(o.end,r.length);s==k().slice(0,o.begin).join("")&&(s=""),l==k().slice(o.end).join("")&&(l=""),window.clipboardData&&window.clipboardData.getData?r=s+window.clipboardData.getData("Text")+l:t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.getData&&(r=s+t.originalEvent.clipboardData.getData("text/plain")+l)}var u=r;if(e.isFunction(a.onBeforePaste)){if(u=a.onBeforePaste.call(i,r,a),u===!1)return t.preventDefault(),!1;u||(u=r)}return T(i,!0,!1,re?u.split("").reverse():u.split("")),n.click(),N(x())===!0&&n.trigger("complete"),!1}function U(t){var i=this;T(i,!0,!1),N(x())===!0&&e(i).trigger("complete"),t.preventDefault()}function Y(e){var t=this;X=x().join(""),(""==te||0!=e.originalEvent.data.indexOf(te))&&(ee=D(t))}function Q(t){var i=this,n=ee||D(i);0==t.originalEvent.data.indexOf(te)&&(p(),n={begin:0,end:0});var r=t.originalEvent.data;D(i,n.begin,n.end);for(var o=0;o<r.length;o++){var s=e.Event("keypress");s.which=r.charCodeAt(o),ae=!1,se=!1,q.call(i,s)}setTimeout(function(){var e=d().p;I(i,x(),a.numericInput?A(e):e)},0),te=t.originalEvent.data}function J(e){}function Z(t){if(ie=e(t),ie.data("_inputmask",{maskset:r,opts:a,isRTL:!1}),a.showTooltip&&ie.prop("title",d().mask),("rtl"==t.dir||a.rightAlign)&&ie.css("text-align","right"),"rtl"==t.dir||a.numericInput){t.dir="ltr",ie.removeAttr("dir");var n=ie.data("_inputmask");n.isRTL=!0,ie.data("_inputmask",n),re=!0}ie.unbind(".inputmask"),(ie.is(":input")&&i(ie.attr("type"))||t.isContentEditable)&&(ie.closest("form").bind("submit",function(e){X!=x().join("")&&ie.change(),ie[0]._valueGet&&ie[0]._valueGet()==k().join("")&&ie[0]._valueSet(""),a.removeMaskOnSubmit&&ie.inputmask("remove")}).bind("reset",function(){setTimeout(function(){ie.triggerHandler("setvalue.inputmask")},0)}),ie.bind("mouseenter.inputmask",function(){var t=e(this),i=this;!t.is(":focus")&&a.showMaskOnHover&&i._valueGet()!=x().join("")&&I(i,x())}).bind("blur.inputmask",function(t){var i=e(this),n=this;if(i.data("_inputmask")){var r=n._valueGet(),o=x().slice();le=!0,X!=o.join("")&&setTimeout(function(){i.change(),X=o.join("")},0),""!=r&&(a.clearMaskOnLostFocus&&(r==k().join("")?o=[]:H(o)),N(o)===!1&&(i.trigger("incomplete"),a.clearIncomplete&&(p(),o=a.clearMaskOnLostFocus?[]:k().slice())),I(n,o,void 0,t))}}).bind("focus.inputmask",function(t){var i=(e(this),this),n=i._valueGet();a.showMaskOnFocus&&(!a.showMaskOnHover||a.showMaskOnHover&&""==n)&&i._valueGet()!=x().join("")&&I(i,x(),_(f())),X=x().join("")}).bind("mouseleave.inputmask",function(){var t=e(this),i=this;if(a.clearMaskOnLostFocus){var n=x().slice(),r=i._valueGet();t.is(":focus")||r==t.attr("placeholder")||""==r||(r==k().join("")?n=[]:H(n),I(i,n))}}).bind("click.inputmask",function(){var t=e(this),i=this;if(t.is(":focus")){var n=D(i);if(n.begin==n.end)if(a.radixFocus&&""!=a.radixPoint&&-1!=e.inArray(a.radixPoint,x())&&(le||x().join("")==k().join("")))D(i,e.inArray(a.radixPoint,x())),le=!1;else{var r=L(n.begin),o=_(f(r));o>r?D(i,$(r)?r:_(r)):D(i,o)}}}).bind("dblclick.inputmask",function(){var e=this;setTimeout(function(){D(e,0,_(f()))},0)}).bind(c+".inputmask dragdrop.inputmask drop.inputmask",W).bind("cut.inputmask",function(t){oe=!0;var i=this,n=e(i),r=D(i);V(i,e.inputmask.keyCode.DELETE,r),I(i,x(),d().p,t,X!=x().join("")),i._valueGet()==k().join("")&&n.trigger("cleared"),a.showTooltip&&n.prop("title",d().mask)}).bind("complete.inputmask",a.oncomplete).bind("incomplete.inputmask",a.onincomplete).bind("cleared.inputmask",a.oncleared),ie.bind("keydown.inputmask",K).bind("keypress.inputmask",q),u||ie.bind("compositionstart.inputmask",Y).bind("compositionupdate.inputmask",Q).bind("compositionend.inputmask",J),"paste"===c&&ie.bind("input.inputmask",U)),ie.bind("setvalue.inputmask",function(){var t=this,i=t._valueGet();t._valueSet(e.isFunction(a.onBeforeMask)?a.onBeforeMask.call(t,i,a)||i:i),T(t,!0,!1),X=x().join(""),(a.clearMaskOnLostFocus||a.clearIncomplete)&&t._valueGet()==k().join("")&&t._valueSet("")}),G(t);var o=e.isFunction(a.onBeforeMask)?a.onBeforeMask.call(t,t._valueGet(),a)||t._valueGet():t._valueGet();T(t,!0,!1,o.split(""));var s=x().slice();X=s.join("");var l;try{l=document.activeElement}catch(h){}N(s)===!1&&a.clearIncomplete&&p(),a.clearMaskOnLostFocus&&(s.join("")==k().join("")?s=[]:H(s)),I(t,s),l===t&&D(t,_(f())),B(t)}var X,ee,te,ie,ne,re=!1,ae=!1,oe=!1,se=!1,le=!0;if(void 0!=n)switch(n.action){case"isComplete":return ie=e(n.el),r=ie.data("_inputmask").maskset,a=ie.data("_inputmask").opts,N(n.buffer);case"unmaskedvalue":return ie=n.$input,r=ie.data("_inputmask").maskset,a=ie.data("_inputmask").opts,re=n.$input.data("_inputmask").isRTL,F(n.$input);case"mask":X=x().join(""),Z(n.el);break;case"format":ie=e({}),ie.data("_inputmask",{maskset:r,opts:a,isRTL:a.numericInput}),a.numericInput&&(re=!0);var ue=(e.isFunction(a.onBeforeMask)?a.onBeforeMask.call(ie,n.value,a)||n.value:n.value).split("");return T(ie,!1,!1,re?ue.reverse():ue),e.isFunction(a.onBeforeWrite)&&a.onBeforeWrite.call(this,void 0,x(),0,a),n.metadata?{value:re?x().slice().reverse().join(""):x().join(""),metadata:ie.inputmask("getmetadata")}:re?x().slice().reverse().join(""):x().join("");case"isValid":ie=e({}),ie.data("_inputmask",{maskset:r,opts:a,isRTL:a.numericInput}),a.numericInput&&(re=!0);var ue=n.value.split("");T(ie,!1,!0,re?ue.reverse():ue);for(var ce=x(),de=R(),pe=ce.length-1;pe>de&&!$(pe);pe--);return ce.splice(de,pe+1-de),N(ce)&&n.value==ce.join("");case"getemptymask":return ie=e(n.el),r=ie.data("_inputmask").maskset,a=ie.data("_inputmask").opts,k();case"remove":var fe=n.el;ie=e(fe),r=ie.data("_inputmask").maskset,a=ie.data("_inputmask").opts,fe._valueSet(F(ie)),ie.unbind(".inputmask"),ie.removeData("_inputmask");var he;Object.getOwnPropertyDescriptor&&(he=Object.getOwnPropertyDescriptor(fe,"value")),he&&he.get?fe._valueGet&&Object.defineProperty(fe,"value",{get:fe._valueGet,set:fe._valueSet}):document.__lookupGetter__&&fe.__lookupGetter__("value")&&fe._valueGet&&(fe.__defineGetter__("value",fe._valueGet),fe.__defineSetter__("value",fe._valueSet));try{delete fe._valueGet,delete fe._valueSet}catch(me){fe._valueGet=void 0,fe._valueSet=void 0}break;case"getmetadata":if(ie=e(n.el),r=ie.data("_inputmask").maskset,a=ie.data("_inputmask").opts,e.isArray(r.metadata)){for(var ge,ve=f(),ye=ve;ye>=0;ye--)if(d().validPositions[ye]&&void 0!=d().validPositions[ye].alternation){ge=d().validPositions[ye].alternation;break}return void 0!=ge?r.metadata[d().validPositions[ve].locator[ge]]:r.metadata[0]}return r.metadata}}if(void 0===e.fn.inputmask){var o=navigator.userAgent,s=null!==o.match(new RegExp("iphone","i")),l=(null!==o.match(new RegExp("android.*safari.*","i")),null!==o.match(new RegExp("android.*chrome.*","i"))),u=null!==o.match(new RegExp("android.*firefox.*","i")),c=(/Kindle/i.test(o)||/Silk/i.test(o)||/KFTT/i.test(o)||/KFOT/i.test(o)||/KFJWA/i.test(o)||/KFJWI/i.test(o)||/KFSOWI/i.test(o)||/KFTHWA/i.test(o)||/KFTHWI/i.test(o)||/KFAPWA/i.test(o)||/KFAPWI/i.test(o),t("paste")?"paste":t("input")?"input":"propertychange");e.inputmask={defaults:{placeholder:"_",optionalmarker:{start:"[",end:"]"},quantifiermarker:{start:"{",end:"}"},groupmarker:{start:"(",end:")"},alternatormarker:"|",escapeChar:"\\",mask:null,oncomplete:e.noop,onincomplete:e.noop,oncleared:e.noop,repeat:0,greedy:!0,autoUnmask:!1,removeMaskOnSubmit:!1,clearMaskOnLostFocus:!0,insertMode:!0,clearIncomplete:!1,aliases:{},alias:null,onKeyDown:e.noop,onBeforeMask:void 0,onBeforePaste:void 0,onBeforeWrite:void 0,onUnMask:void 0,showMaskOnFocus:!0,showMaskOnHover:!0,onKeyValidation:e.noop,skipOptionalPartCharacter:" ",showTooltip:!1,numericInput:!1,rightAlign:!1,undoOnEscape:!0,radixPoint:"",radixFocus:!1,nojumps:!1,nojumpsThreshold:0,keepStatic:void 0,definitions:{9:{validator:"[0-9]",cardinality:1,definitionSymbol:"*"},a:{validator:"[A-Za-zА-яЁёÀ-ÿµ]",cardinality:1,definitionSymbol:"*"},"*":{validator:"[0-9A-Za-zА-яЁёÀ-ÿµ]",cardinality:1}},ignorables:[8,9,13,19,27,33,34,35,36,37,38,39,40,45,46,93,112,113,114,115,116,117,118,119,120,121,122,123],isComplete:void 0,canClearPosition:e.noop,postValidation:void 0},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91},masksCache:{},escapeRegex:function(e){var t=["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^"];return e.replace(new RegExp("(\\"+t.join("|\\")+")","gim"),"\\$1")},format:function(t,i,o){var s=e.extend(!0,{},e.inputmask.defaults,i);return n(s.alias,i,s),a({action:"format",value:t,metadata:o},r(s,i&&void 0!==i.definitions),s)},isValid:function(t,i){var o=e.extend(!0,{},e.inputmask.defaults,i);return n(o.alias,i,o),a({action:"isValid",value:t},r(o,i&&void 0!==i.definitions),o)}},e.fn.inputmask=function(t,i){function o(t,i,r){var a=e(t);a.data("inputmask-alias")&&n(a.data("inputmask-alias"),e.extend(!0,{},i),i);for(var o in i){var s=a.data("inputmask-"+o.toLowerCase());void 0!=s&&(s="boolean"==typeof s?s:s.toString(),"mask"==o&&0==s.indexOf("[")?(i[o]=s.replace(/[\s[\]]/g,"").split("','"),i[o][0]=i[o][0].replace("'",""),i[o][i[o].length-1]=i[o][i[o].length-1].replace("'","")):i[o]=s,r&&(r[o]=i[o]))}return i}var s,l=e.extend(!0,{},e.inputmask.defaults,i);if("string"==typeof t)switch(t){case"mask":return n(l.alias,i,l),this.each(function(){return o(this,l),s=r(l,i&&void 0!==i.definitions),void 0==s?this:void a({action:"mask",el:this},s,l)});case"unmaskedvalue":var u=e(this);return u.data("_inputmask")?a({action:"unmaskedvalue",$input:u}):u.val();case"remove":return this.each(function(){var t=e(this);t.data("_inputmask")&&a({action:"remove",el:this})});case"getemptymask":return this.data("_inputmask")?a({action:"getemptymask",el:this}):"";case"hasMaskedValue":return this.data("_inputmask")?!this.data("_inputmask").opts.autoUnmask:!1;case"isComplete":return this.data("_inputmask")?a({action:"isComplete",buffer:this[0]._valueGet().split(""),el:this}):!0;case"getmetadata":return this.data("_inputmask")?a({action:"getmetadata",el:this}):void 0;default:return n(l.alias,i,l),n(t,i,l)||(l.mask=t),this.each(function(){return o(this,l),s=r(l,i&&void 0!==i.definitions),void 0==s?this:void a({action:"mask",el:this},s,l)})}else{if("object"==typeof t)return l=e.extend(!0,{},e.inputmask.defaults,t),n(l.alias,t,l),this.each(function(){return o(this,l),s=r(l,t&&void 0!==t.definitions),void 0==s?this:void a({action:"mask",el:this},s,l)});if(void 0==t)return this.each(function(){var t=e(this).attr("data-inputmask");if(t&&""!=t)try{t=t.replace(new RegExp("'","g"),'"');var r=e.parseJSON("{"+t+"}");e.extend(!0,r,i),l=e.extend(!0,{},e.inputmask.defaults,r),l=o(this,l),n(l.alias,r,l),l.alias=void 0,e(this).inputmask("mask",l)}catch(a){}if(e(this).attr("data-inputmask-mask")||e(this).attr("data-inputmask-alias")){l=e.extend(!0,{},e.inputmask.defaults,{});var s={};l=o(this,l,s),n(l.alias,s,l),l.alias=void 0,e(this).inputmask("mask",l)}})}}}return e.fn.inputmask}(jQuery),function(e){return e.extend(e.inputmask.defaults.definitions,{h:{validator:"[01][0-9]|2[0-3]",cardinality:2,prevalidator:[{validator:"[0-2]",cardinality:1}]},s:{validator:"[0-5][0-9]",cardinality:2,prevalidator:[{validator:"[0-5]",cardinality:1}]},d:{validator:"0[1-9]|[12][0-9]|3[01]",cardinality:2,prevalidator:[{validator:"[0-3]",cardinality:1}]},m:{validator:"0[1-9]|1[012]",cardinality:2,prevalidator:[{validator:"[01]",cardinality:1}]},y:{validator:"(19|20)\\d{2}",cardinality:4,prevalidator:[{validator:"[12]",cardinality:1},{validator:"(19|20)",cardinality:2},{validator:"(19|20)\\d",cardinality:3}]}}),e.extend(e.inputmask.defaults.aliases,{"dd/mm/yyyy":{mask:"1/2/y",placeholder:"dd/mm/yyyy",regex:{val1pre:new RegExp("[0-3]"),val1:new RegExp("0[1-9]|[12][0-9]|3[01]"),val2pre:function(t){var i=e.inputmask.escapeRegex.call(this,t);return new RegExp("((0[1-9]|[12][0-9]|3[01])"+i+"[01])")},val2:function(t){var i=e.inputmask.escapeRegex.call(this,t);return new RegExp("((0[1-9]|[12][0-9])"+i+"(0[1-9]|1[012]))|(30"+i+"(0[13-9]|1[012]))|(31"+i+"(0[13578]|1[02]))")}},leapday:"29/02/",separator:"/",yearrange:{minyear:1900,maxyear:2099},isInYearRange:function(e,t,i){if(isNaN(e))return!1;var n=parseInt(e.concat(t.toString().slice(e.length))),r=parseInt(e.concat(i.toString().slice(e.length)));return(isNaN(n)?!1:n>=t&&i>=n)||(isNaN(r)?!1:r>=t&&i>=r)},determinebaseyear:function(e,t,i){var n=(new Date).getFullYear();if(e>n)return e;if(n>t){for(var r=t.toString().slice(0,2),a=t.toString().slice(2,4);r+i>t;)r--;var o=r+a;return e>o?e:o}return n},onKeyDown:function(t,i,n,r){var a=e(this);if(t.ctrlKey&&t.keyCode==e.inputmask.keyCode.RIGHT){var o=new Date;a.val(o.getDate().toString()+(o.getMonth()+1).toString()+o.getFullYear().toString()),a.triggerHandler("setvalue.inputmask")}},getFrontValue:function(e,t,i){for(var n=0,r=0,a=0;a<e.length&&"2"!=e.charAt(a);a++){var o=i.definitions[e.charAt(a)];o?(n+=r,r=o.cardinality):r++}return t.join("").substr(n,r)},definitions:{1:{validator:function(e,t,i,n,r){var a=r.regex.val1.test(e);return n||a||e.charAt(1)!=r.separator&&-1=="-./".indexOf(e.charAt(1))||!(a=r.regex.val1.test("0"+e.charAt(0)))?a:(t.buffer[i-1]="0",{refreshFromBuffer:{start:i-1,end:i},pos:i,c:e.charAt(0)})},cardinality:2,prevalidator:[{validator:function(e,t,i,n,r){var a=e;isNaN(t.buffer[i+1])||(a+=t.buffer[i+1]);var o=1==a.length?r.regex.val1pre.test(a):r.regex.val1.test(a);if(!n&&!o){if(o=r.regex.val1.test(e+"0"))return t.buffer[i]=e,t.buffer[++i]="0",{pos:i,c:"0"};if(o=r.regex.val1.test("0"+e))return t.buffer[i]="0",i++,{pos:i}}return o},cardinality:1}]},2:{validator:function(e,t,i,n,r){var a=r.getFrontValue(t.mask,t.buffer,r);-1!=a.indexOf(r.placeholder[0])&&(a="01"+r.separator);var o=r.regex.val2(r.separator).test(a+e);if(!n&&!o&&(e.charAt(1)==r.separator||-1!="-./".indexOf(e.charAt(1)))&&(o=r.regex.val2(r.separator).test(a+"0"+e.charAt(0))))return t.buffer[i-1]="0",{refreshFromBuffer:{start:i-1,end:i},pos:i,c:e.charAt(0)};if(r.mask.indexOf("2")==r.mask.length-1&&o){var s=t.buffer.join("").substr(4,4)+e;if(s!=r.leapday)return!0;var l=parseInt(t.buffer.join("").substr(0,4),10);return l%4===0?l%100===0?l%400===0?!0:!1:!0:!1}return o},cardinality:2,prevalidator:[{validator:function(e,t,i,n,r){isNaN(t.buffer[i+1])||(e+=t.buffer[i+1]);var a=r.getFrontValue(t.mask,t.buffer,r);-1!=a.indexOf(r.placeholder[0])&&(a="01"+r.separator);var o=1==e.length?r.regex.val2pre(r.separator).test(a+e):r.regex.val2(r.separator).test(a+e);return n||o||!(o=r.regex.val2(r.separator).test(a+"0"+e))?o:(t.buffer[i]="0",i++,{pos:i})},cardinality:1}]},y:{validator:function(e,t,i,n,r){if(r.isInYearRange(e,r.yearrange.minyear,r.yearrange.maxyear)){var a=t.buffer.join("").substr(0,6);if(a!=r.leapday)return!0;var o=parseInt(e,10);return o%4===0?o%100===0?o%400===0?!0:!1:!0:!1}return!1},cardinality:4,prevalidator:[{validator:function(e,t,i,n,r){var a=r.isInYearRange(e,r.yearrange.minyear,r.yearrange.maxyear);if(!n&&!a){var o=r.determinebaseyear(r.yearrange.minyear,r.yearrange.maxyear,e+"0").toString().slice(0,1);if(a=r.isInYearRange(o+e,r.yearrange.minyear,r.yearrange.maxyear))return t.buffer[i++]=o.charAt(0),{pos:i};if(o=r.determinebaseyear(r.yearrange.minyear,r.yearrange.maxyear,e+"0").toString().slice(0,2),a=r.isInYearRange(o+e,r.yearrange.minyear,r.yearrange.maxyear))return t.buffer[i++]=o.charAt(0),t.buffer[i++]=o.charAt(1),{pos:i}}return a},cardinality:1},{validator:function(e,t,i,n,r){var a=r.isInYearRange(e,r.yearrange.minyear,r.yearrange.maxyear);if(!n&&!a){var o=r.determinebaseyear(r.yearrange.minyear,r.yearrange.maxyear,e).toString().slice(0,2);if(a=r.isInYearRange(e[0]+o[1]+e[1],r.yearrange.minyear,r.yearrange.maxyear))return t.buffer[i++]=o.charAt(1),{pos:i};if(o=r.determinebaseyear(r.yearrange.minyear,r.yearrange.maxyear,e).toString().slice(0,2),r.isInYearRange(o+e,r.yearrange.minyear,r.yearrange.maxyear)){var s=t.buffer.join("").substr(0,6);if(s!=r.leapday)a=!0;else{var l=parseInt(e,10);a=l%4===0?l%100===0?l%400===0?!0:!1:!0:!1}}else a=!1;if(a)return t.buffer[i-1]=o.charAt(0),t.buffer[i++]=o.charAt(1),t.buffer[i++]=e.charAt(0),{refreshFromBuffer:{start:i-3,end:i},pos:i}}return a},cardinality:2},{validator:function(e,t,i,n,r){return r.isInYearRange(e,r.yearrange.minyear,r.yearrange.maxyear)},cardinality:3}]}},insertMode:!1,autoUnmask:!1},"mm/dd/yyyy":{placeholder:"mm/dd/yyyy",alias:"dd/mm/yyyy",regex:{val2pre:function(t){var i=e.inputmask.escapeRegex.call(this,t);return new RegExp("((0[13-9]|1[012])"+i+"[0-3])|(02"+i+"[0-2])")},val2:function(t){var i=e.inputmask.escapeRegex.call(this,t);return new RegExp("((0[1-9]|1[012])"+i+"(0[1-9]|[12][0-9]))|((0[13-9]|1[012])"+i+"30)|((0[13578]|1[02])"+i+"31)")},val1pre:new RegExp("[01]"),val1:new RegExp("0[1-9]|1[012]")},leapday:"02/29/",onKeyDown:function(t,i,n,r){var a=e(this);if(t.ctrlKey&&t.keyCode==e.inputmask.keyCode.RIGHT){var o=new Date;a.val((o.getMonth()+1).toString()+o.getDate().toString()+o.getFullYear().toString()),a.triggerHandler("setvalue.inputmask")}}},"yyyy/mm/dd":{mask:"y/1/2",placeholder:"yyyy/mm/dd",alias:"mm/dd/yyyy",leapday:"/02/29",onKeyDown:function(t,i,n,r){
var a=e(this);if(t.ctrlKey&&t.keyCode==e.inputmask.keyCode.RIGHT){var o=new Date;a.val(o.getFullYear().toString()+(o.getMonth()+1).toString()+o.getDate().toString()),a.triggerHandler("setvalue.inputmask")}}},"dd.mm.yyyy":{mask:"1.2.y",placeholder:"dd.mm.yyyy",leapday:"29.02.",separator:".",alias:"dd/mm/yyyy"},"dd-mm-yyyy":{mask:"1-2-y",placeholder:"dd-mm-yyyy",leapday:"29-02-",separator:"-",alias:"dd/mm/yyyy"},"mm.dd.yyyy":{mask:"1.2.y",placeholder:"mm.dd.yyyy",leapday:"02.29.",separator:".",alias:"mm/dd/yyyy"},"mm-dd-yyyy":{mask:"1-2-y",placeholder:"mm-dd-yyyy",leapday:"02-29-",separator:"-",alias:"mm/dd/yyyy"},"yyyy.mm.dd":{mask:"y.1.2",placeholder:"yyyy.mm.dd",leapday:".02.29",separator:".",alias:"yyyy/mm/dd"},"yyyy-mm-dd":{mask:"y-1-2",placeholder:"yyyy-mm-dd",leapday:"-02-29",separator:"-",alias:"yyyy/mm/dd"},datetime:{mask:"1/2/y h:s",placeholder:"dd/mm/yyyy hh:mm",alias:"dd/mm/yyyy",regex:{hrspre:new RegExp("[012]"),hrs24:new RegExp("2[0-4]|1[3-9]"),hrs:new RegExp("[01][0-9]|2[0-4]"),ampm:new RegExp("^[a|p|A|P][m|M]"),mspre:new RegExp("[0-5]"),ms:new RegExp("[0-5][0-9]")},timeseparator:":",hourFormat:"24",definitions:{h:{validator:function(e,t,i,n,r){if("24"==r.hourFormat&&24==parseInt(e,10))return t.buffer[i-1]="0",t.buffer[i]="0",{refreshFromBuffer:{start:i-1,end:i},c:"0"};var a=r.regex.hrs.test(e);if(!n&&!a&&(e.charAt(1)==r.timeseparator||-1!="-.:".indexOf(e.charAt(1)))&&(a=r.regex.hrs.test("0"+e.charAt(0))))return t.buffer[i-1]="0",t.buffer[i]=e.charAt(0),i++,{refreshFromBuffer:{start:i-2,end:i},pos:i,c:r.timeseparator};if(a&&"24"!==r.hourFormat&&r.regex.hrs24.test(e)){var o=parseInt(e,10);return 24==o?(t.buffer[i+5]="a",t.buffer[i+6]="m"):(t.buffer[i+5]="p",t.buffer[i+6]="m"),o-=12,10>o?(t.buffer[i]=o.toString(),t.buffer[i-1]="0"):(t.buffer[i]=o.toString().charAt(1),t.buffer[i-1]=o.toString().charAt(0)),{refreshFromBuffer:{start:i-1,end:i+6},c:t.buffer[i]}}return a},cardinality:2,prevalidator:[{validator:function(e,t,i,n,r){var a=r.regex.hrspre.test(e);return n||a||!(a=r.regex.hrs.test("0"+e))?a:(t.buffer[i]="0",i++,{pos:i})},cardinality:1}]},s:{validator:"[0-5][0-9]",cardinality:2,prevalidator:[{validator:function(e,t,i,n,r){var a=r.regex.mspre.test(e);return n||a||!(a=r.regex.ms.test("0"+e))?a:(t.buffer[i]="0",i++,{pos:i})},cardinality:1}]},t:{validator:function(e,t,i,n,r){return r.regex.ampm.test(e+"m")},casing:"lower",cardinality:1}},insertMode:!1,autoUnmask:!1},datetime12:{mask:"1/2/y h:s t\\m",placeholder:"dd/mm/yyyy hh:mm xm",alias:"datetime",hourFormat:"12"},"hh:mm t":{mask:"h:s t\\m",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"h:s t":{mask:"h:s t\\m",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"hh:mm:ss":{mask:"h:s:s",placeholder:"hh:mm:ss",alias:"datetime",autoUnmask:!1},"hh:mm":{mask:"h:s",placeholder:"hh:mm",alias:"datetime",autoUnmask:!1},date:{alias:"dd/mm/yyyy"},"mm/yyyy":{mask:"1/y",placeholder:"mm/yyyy",leapday:"donotuse",separator:"/",alias:"mm/dd/yyyy"}}),e.fn.inputmask}(jQuery),function(e){return e.extend(e.inputmask.defaults.definitions,{A:{validator:"[A-Za-zА-яЁёÀ-ÿµ]",cardinality:1,casing:"upper"},"#":{validator:"[0-9A-Za-zА-яЁёÀ-ÿµ]",cardinality:1,casing:"upper"}}),e.extend(e.inputmask.defaults.aliases,{url:{mask:"ir",placeholder:"",separator:"",defaultPrefix:"http://",regex:{urlpre1:new RegExp("[fh]"),urlpre2:new RegExp("(ft|ht)"),urlpre3:new RegExp("(ftp|htt)"),urlpre4:new RegExp("(ftp:|http|ftps)"),urlpre5:new RegExp("(ftp:/|ftps:|http:|https)"),urlpre6:new RegExp("(ftp://|ftps:/|http:/|https:)"),urlpre7:new RegExp("(ftp://|ftps://|http://|https:/)"),urlpre8:new RegExp("(ftp://|ftps://|http://|https://)")},definitions:{i:{validator:function(e,t,i,n,r){return!0},cardinality:8,prevalidator:function(){for(var e=[],t=8,i=0;t>i;i++)e[i]=function(){var e=i;return{validator:function(t,i,n,r,a){if(a.regex["urlpre"+(e+1)]){var o,s=t;e+1-t.length>0&&(s=i.buffer.join("").substring(0,e+1-t.length)+""+s);var l=a.regex["urlpre"+(e+1)].test(s);if(!r&&!l){for(n-=e,o=0;o<a.defaultPrefix.length;o++)i.buffer[n]=a.defaultPrefix[o],n++;for(o=0;o<s.length-1;o++)i.buffer[n]=s[o],n++;return{pos:n}}return l}return!1},cardinality:e}}();return e}()},r:{validator:".",cardinality:50}},insertMode:!1,autoUnmask:!1},ip:{mask:"i[i[i]].i[i[i]].i[i[i]].i[i[i]]",definitions:{i:{validator:function(e,t,i,n,r){return i-1>-1&&"."!=t.buffer[i-1]?(e=t.buffer[i-1]+e,e=i-2>-1&&"."!=t.buffer[i-2]?t.buffer[i-2]+e:"0"+e):e="00"+e,new RegExp("25[0-5]|2[0-4][0-9]|[01][0-9][0-9]").test(e)},cardinality:1}}},email:{mask:"*{1,64}[.*{1,64}][.*{1,64}][.*{1,64}]@*{1,64}[.*{2,64}][.*{2,6}][.*{1,2}]",greedy:!1,onBeforePaste:function(e,t){return e=e.toLowerCase(),e.replace("mailto:","")},definitions:{"*":{validator:"[0-9A-Za-z!#$%&'*+/=?^_`{|}~-]",cardinality:1,casing:"lower"}}}}),e.fn.inputmask}(jQuery),function(e){return e.extend(e.inputmask.defaults.aliases,{numeric:{mask:function(e){function t(t){for(var i="",n=0;n<t.length;n++)i+=e.definitions[t[n]]?"\\"+t[n]:t[n];return i}if(0!==e.repeat&&isNaN(e.integerDigits)&&(e.integerDigits=e.repeat),e.repeat=0,e.groupSeparator==e.radixPoint&&(e.groupSeparator="."==e.radixPoint?",":","==e.radixPoint?".":"")," "===e.groupSeparator&&(e.skipOptionalPartCharacter=void 0),e.autoGroup=e.autoGroup&&""!=e.groupSeparator,e.autoGroup&&("string"==typeof e.groupSize&&isFinite(e.groupSize)&&(e.groupSize=parseInt(e.groupSize)),isFinite(e.integerDigits))){var i=Math.floor(e.integerDigits/e.groupSize),n=e.integerDigits%e.groupSize;e.integerDigits=parseInt(e.integerDigits)+(0==n?i-1:i)}e.placeholder.length>1&&(e.placeholder=e.placeholder.charAt(0)),e.radixFocus=e.radixFocus&&"0"==e.placeholder,e.definitions[";"]=e.definitions["~"];var r=t(e.prefix);return r+="[+]",r+="~{1,"+e.integerDigits+"}",void 0!=e.digits&&(isNaN(e.digits)||parseInt(e.digits)>0)&&(r+=e.digitsOptional?"["+(e.decimalProtect?":":e.radixPoint)+";{"+e.digits+"}]":(e.decimalProtect?":":e.radixPoint)+";{"+e.digits+"}"),""!=e.negationSymbol.back&&(r+="[-]"),r+=t(e.suffix),e.greedy=!1,r},placeholder:"",greedy:!1,digits:"*",digitsOptional:!0,groupSeparator:"",radixPoint:".",radixFocus:!0,groupSize:3,autoGroup:!1,allowPlus:!0,allowMinus:!0,negationSymbol:{front:"-",back:""},integerDigits:"+",prefix:"",suffix:"",rightAlign:!0,decimalProtect:!0,min:void 0,max:void 0,postFormat:function(t,i,n,r){var a=!1;t.length>=r.suffix.length&&t.join("").indexOf(r.suffix)==t.length-r.suffix.length&&(t.length=t.length-r.suffix.length,a=!0),i=i>=t.length?t.length-1:i<r.prefix.length?r.prefix.length:i;var o=!1,s=t[i];if(""==r.groupSeparator||-1!=e.inArray(r.radixPoint,t)&&i>=e.inArray(r.radixPoint,t)||new RegExp("["+e.inputmask.escapeRegex(r.negationSymbol.front)+"+]").test(s)){if(a)for(var l=0,u=r.suffix.length;u>l;l++)t.push(r.suffix.charAt(l));return{pos:i}}var c=t.slice();s==r.groupSeparator&&(c.splice(i--,1),s=c[i]),n?c[i]="?":c.splice(i,0,"?");var d=c.join(""),p=d;if(d.length>0&&r.autoGroup||n&&-1!=d.indexOf(r.groupSeparator)){var f=e.inputmask.escapeRegex(r.groupSeparator);o=0==d.indexOf(r.groupSeparator),d=d.replace(new RegExp(f,"g"),"");var h=d.split(r.radixPoint);if(d=""==r.radixPoint?d:h[0],d!=r.prefix+"?0"&&d.length>=r.groupSize+r.prefix.length)for(var m=new RegExp("([-+]?[\\d?]+)([\\d?]{"+r.groupSize+"})");m.test(d);)d=d.replace(m,"$1"+r.groupSeparator+"$2"),d=d.replace(r.groupSeparator+r.groupSeparator,r.groupSeparator);""!=r.radixPoint&&h.length>1&&(d+=r.radixPoint+h[1])}o=p!=d,t.length=d.length;for(var l=0,u=d.length;u>l;l++)t[l]=d.charAt(l);var g=e.inArray("?",t);if(n?t[g]=s:t.splice(g,1),!o&&a)for(var l=0,u=r.suffix.length;u>l;l++)t.push(r.suffix.charAt(l));return{pos:g,refreshFromBuffer:o,buffer:t}},onBeforeWrite:function(t,i,n,r){if(t&&"blur"==t.type){var a=i.join(""),o=a.replace(r.prefix,"");if(o=o.replace(r.suffix,""),o=o.replace(new RegExp(e.inputmask.escapeRegex(r.groupSeparator),"g"),""),","===r.radixPoint&&(o=o.replace(e.inputmask.escapeRegex(r.radixPoint),".")),isFinite(o)&&isFinite(r.min)&&parseFloat(o)<parseFloat(r.min))return e.extend(!0,{refreshFromBuffer:!0,buffer:(r.prefix+r.min).split("")},r.postFormat((r.prefix+r.min).split(""),0,!0,r));var s=""!=r.radixPoint?i.join("").split(r.radixPoint):[i.join("")],l=s[0].match(r.regex.integerPart(r)),u=2==s.length?s[1].match(r.regex.integerNPart(r)):void 0;!l||l[0]!=r.negationSymbol.front+"0"&&l[0]!=r.negationSymbol.front&&"+"!=l[0]||void 0!=u&&!u[0].match(/^0+$/)||i.splice(l.index,1);var c=e.inArray(r.radixPoint,i);if(-1!=c&&isFinite(r.digits)&&!r.digitsOptional){for(var d=1;d<=r.digits;d++)(void 0==i[c+d]||i[c+d]==r.placeholder.charAt(0))&&(i[c+d]="0");return{refreshFromBuffer:!0,buffer:i}}}if(r.autoGroup){var p=r.postFormat(i,n-1,!0,r);return p.caret=n<=r.prefix.length?p.pos:p.pos+1,p}},regex:{integerPart:function(t){return new RegExp("["+e.inputmask.escapeRegex(t.negationSymbol.front)+"+]?\\d+")},integerNPart:function(t){return new RegExp("[\\d"+e.inputmask.escapeRegex(t.groupSeparator)+"]+")}},signHandler:function(e,t,i,n,r){if(!n&&r.allowMinus&&"-"===e||r.allowPlus&&"+"===e){var a=t.buffer.join("").match(r.regex.integerPart(r));if(a&&a[0].length>0)return t.buffer[a.index]==("-"===e?"+":r.negationSymbol.front)?"-"==e?""!=r.negationSymbol.back?{pos:a.index,c:r.negationSymbol.front,remove:a.index,caret:i,insert:{pos:t.buffer.length-r.suffix.length-1,c:r.negationSymbol.back}}:{pos:a.index,c:r.negationSymbol.front,remove:a.index,caret:i}:""!=r.negationSymbol.back?{pos:a.index,c:"+",remove:[a.index,t.buffer.length-r.suffix.length-1],caret:i}:{pos:a.index,c:"+",remove:a.index,caret:i}:t.buffer[a.index]==("-"===e?r.negationSymbol.front:"+")?"-"==e&&""!=r.negationSymbol.back?{remove:[a.index,t.buffer.length-r.suffix.length-1],caret:i-1}:{remove:a.index,caret:i-1}:"-"==e?""!=r.negationSymbol.back?{pos:a.index,c:r.negationSymbol.front,caret:i+1,insert:{pos:t.buffer.length-r.suffix.length,c:r.negationSymbol.back}}:{pos:a.index,c:r.negationSymbol.front,caret:i+1}:{pos:a.index,c:e,caret:i+1}}return!1},radixHandler:function(t,i,n,r,a){if(!r&&t===a.radixPoint&&a.digits>0){var o=e.inArray(a.radixPoint,i.buffer),s=i.buffer.join("").match(a.regex.integerPart(a));if(-1!=o&&i.validPositions[o])return i.validPositions[o-1]?{caret:o+1}:{pos:s.index,c:s[0],caret:o+1};if(!s||"0"==s[0]&&s.index+1!=n)return i.buffer[s?s.index:n]="0",{pos:(s?s.index:n)+1}}return!1},leadingZeroHandler:function(t,i,n,r,a){var o=i.buffer.join("").match(a.regex.integerNPart(a)),s=e.inArray(a.radixPoint,i.buffer);if(o&&!r&&(-1==s||s>=n))if(0==o[0].indexOf("0")){n<a.prefix.length&&(n=o.index);var l=e.inArray(a.radixPoint,i._buffer),u=i._buffer&&i.buffer.slice(s).join("")==i._buffer.slice(l).join("")||0==parseInt(i.buffer.slice(s+1).join("")),c=i._buffer&&i.buffer.slice(o.index,s).join("")==i._buffer.slice(a.prefix.length,l).join("")||"0"==i.buffer.slice(o.index,s).join("");if(-1==s||u&&c)return i.buffer.splice(o.index,1),n=n>o.index?n-1:o.index,{pos:n,remove:o.index};if(o.index+1==n||"0"==t)return i.buffer.splice(o.index,1),n=o.index,{pos:n,remove:o.index}}else if("0"===t&&n<=o.index&&o[0]!=a.groupSeparator)return!1;return!0},postValidation:function(t,i){var n=!0,r=t.join(""),a=r.replace(i.prefix,"");return a=a.replace(i.suffix,""),a=a.replace(new RegExp(e.inputmask.escapeRegex(i.groupSeparator),"g"),""),","===i.radixPoint&&(a=a.replace(e.inputmask.escapeRegex(i.radixPoint),".")),a=a.replace(new RegExp("^"+e.inputmask.escapeRegex(i.negationSymbol.front)),"-"),a=a.replace(new RegExp(e.inputmask.escapeRegex(i.negationSymbol.back)+"$"),""),isFinite(a)&&isFinite(i.max)&&(n=parseFloat(a)<=parseFloat(i.max)),n},definitions:{"~":{validator:function(t,i,n,r,a){var o=a.signHandler(t,i,n,r,a);if(!o&&(o=a.radixHandler(t,i,n,r,a),!o&&(o=r?new RegExp("[0-9"+e.inputmask.escapeRegex(a.groupSeparator)+"]").test(t):new RegExp("[0-9]").test(t),o===!0&&(o=a.leadingZeroHandler(t,i,n,r,a),o===!0)))){var s=e.inArray(a.radixPoint,i.buffer);o=a.digitsOptional===!1&&n>s&&!r?{pos:n,remove:n}:{pos:n}}return o},cardinality:1,prevalidator:null},"+":{validator:function(e,t,i,n,r){var a=r.signHandler(e,t,i,n,r);return!a&&(n&&r.allowMinus&&e===r.negationSymbol.front||r.allowMinus&&"-"==e||r.allowPlus&&"+"==e)&&(a="-"==e?""!=r.negationSymbol.back?{pos:i,c:"-"===e?r.negationSymbol.front:"+",caret:i+1,insert:{pos:t.buffer.length,c:r.negationSymbol.back}}:{pos:i,c:"-"===e?r.negationSymbol.front:"+",caret:i+1}:!0),a},cardinality:1,prevalidator:null,placeholder:""},"-":{validator:function(e,t,i,n,r){var a=r.signHandler(e,t,i,n,r);return!a&&n&&r.allowMinus&&e===r.negationSymbol.back&&(a=!0),a},cardinality:1,prevalidator:null,placeholder:""},":":{validator:function(t,i,n,r,a){var o=a.signHandler(t,i,n,r,a);if(!o){var s="["+e.inputmask.escapeRegex(a.radixPoint)+"]";o=new RegExp(s).test(t),o&&i.validPositions[n]&&i.validPositions[n].match.placeholder==a.radixPoint&&(o={caret:n+1})}return o},cardinality:1,prevalidator:null,placeholder:function(e){return e.radixPoint}}},insertMode:!0,autoUnmask:!1,unmaskAsNumber:!1,onUnMask:function(t,i,n){var r=t.replace(n.prefix,"");return r=r.replace(n.suffix,""),r=r.replace(new RegExp(e.inputmask.escapeRegex(n.groupSeparator),"g"),""),n.unmaskAsNumber?(r=r.replace(e.inputmask.escapeRegex.call(this,n.radixPoint),"."),Number(r)):r},isComplete:function(t,i){var n=t.join(""),r=t.slice();if(i.postFormat(r,0,!0,i),r.join("")!=n)return!1;var a=n.replace(i.prefix,"");return a=a.replace(i.suffix,""),a=a.replace(new RegExp(e.inputmask.escapeRegex(i.groupSeparator),"g"),""),","===i.radixPoint&&(a=a.replace(e.inputmask.escapeRegex(i.radixPoint),".")),isFinite(a)},onBeforeMask:function(t,i){if(""!=i.radixPoint&&isFinite(t))t=t.toString().replace(".",i.radixPoint);else{var n=t.match(/,/g),r=t.match(/\./g);r&&n?r.length>n.length?(t=t.replace(/\./g,""),t=t.replace(",",i.radixPoint)):n.length>r.length?(t=t.replace(/,/g,""),t=t.replace(".",i.radixPoint)):t=t.indexOf(".")<t.indexOf(",")?t.replace(/\./g,""):t=t.replace(/,/g,""):t=t.replace(new RegExp(e.inputmask.escapeRegex(i.groupSeparator),"g"),"")}return 0==i.digits&&(-1!=t.indexOf(".")?t=t.substring(0,t.indexOf(".")):-1!=t.indexOf(",")&&(t=t.substring(0,t.indexOf(",")))),t},canClearPosition:function(t,i,n,r,a){var o=t.validPositions[i].input,s=o!=a.radixPoint&&isFinite(o)||i==n||o==a.groupSeparator||o==a.negationSymbol.front||o==a.negationSymbol.back;if(s&&isFinite(o)){var l;if(!r&&t.buffer){l=t.buffer.join("").substr(0,i).match(a.regex.integerNPart(a));var u=i+1,c=null==l||0==parseInt(l[0].replace(new RegExp(e.inputmask.escapeRegex(a.groupSeparator),"g"),""));if(c)for(;t.validPositions[u]&&(t.validPositions[u].input==a.groupSeparator||"0"==t.validPositions[u].input);)delete t.validPositions[u],u++}var d=[];for(var p in t.validPositions)d.push(t.validPositions[p].input);l=d.join("").match(a.regex.integerNPart(a));var f=e.inArray(a.radixPoint,t.buffer);if(l&&(-1==f||f>=i))if(0==l[0].indexOf("0"))s=l.index!=i||-1==f;else{var h=parseInt(l[0].replace(new RegExp(e.inputmask.escapeRegex(a.groupSeparator),"g"),""));-1!=f&&10>h&&"0"==a.placeholder.charAt(0)&&(t.validPositions[i].input="0",t.p=a.prefix.length+1,s=!1)}}return s}},currency:{prefix:"$ ",groupSeparator:",",alias:"numeric",placeholder:"0",autoGroup:!0,digits:2,digitsOptional:!1,clearMaskOnLostFocus:!1},decimal:{alias:"numeric"},integer:{alias:"numeric",digits:"0",radixPoint:""}}),e.fn.inputmask}(jQuery),function(e){return e.extend(e.inputmask.defaults.aliases,{phone:{url:"phone-codes/phone-codes.js",countrycode:"",mask:function(t){t.definitions["#"]=t.definitions[9];var i=[];return e.ajax({url:t.url,async:!1,dataType:"json",success:function(e){i=e},error:function(e,i,n){alert(n+" - "+t.url)}}),i=i.sort(function(e,t){return(e.mask||e)<(t.mask||t)?-1:1})},keepStatic:!1,nojumps:!0,nojumpsThreshold:1,onBeforeMask:function(e,t){var i=e.replace(/^0/g,"");return(i.indexOf(t.countrycode)>1||-1==i.indexOf(t.countrycode))&&(i="+"+t.countrycode+i),i}},phonebe:{alias:"phone",url:"phone-codes/phone-be.js",countrycode:"32",nojumpsThreshold:4}}),e.fn.inputmask}(jQuery),function(e){return e.extend(e.inputmask.defaults.aliases,{Regex:{mask:"r",greedy:!1,repeat:"*",regex:null,regexTokens:null,tokenizer:/\[\^?]?(?:[^\\\]]+|\\[\S\s]?)*]?|\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9][0-9]*|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}|c[A-Za-z]|[\S\s]?)|\((?:\?[:=!]?)?|(?:[?*+]|\{[0-9]+(?:,[0-9]*)?\})\??|[^.?*+^${[()|\\]+|./g,quantifierFilter:/[0-9]+[^,]/,isComplete:function(e,t){return new RegExp(t.regex).test(e.join(""))},definitions:{r:{validator:function(t,i,n,r,a){function o(e,t){this.matches=[],this.isGroup=e||!1,this.isQuantifier=t||!1,this.quantifier={min:1,max:1},this.repeaterPart=void 0}function s(){var e,t,i=new o,n=[];for(a.regexTokens=[];e=a.tokenizer.exec(a.regex);)switch(t=e[0],t.charAt(0)){case"(":n.push(new o(!0));break;case")":var r=n.pop();n.length>0?n[n.length-1].matches.push(r):i.matches.push(r);break;case"{":case"+":case"*":var s=new o(!1,!0);t=t.replace(/[{}]/g,"");var l=t.split(","),u=isNaN(l[0])?l[0]:parseInt(l[0]),c=1==l.length?u:isNaN(l[1])?l[1]:parseInt(l[1]);if(s.quantifier={min:u,max:c},n.length>0){var d=n[n.length-1].matches;if(e=d.pop(),!e.isGroup){var r=new o(!0);r.matches.push(e),e=r}d.push(e),d.push(s)}else{if(e=i.matches.pop(),!e.isGroup){var r=new o(!0);r.matches.push(e),e=r}i.matches.push(e),i.matches.push(s)}break;default:n.length>0?n[n.length-1].matches.push(t):i.matches.push(t)}i.matches.length>0&&a.regexTokens.push(i)}function l(t,i){var n=!1;i&&(c+="(",p++);for(var r=0;r<t.matches.length;r++){var a=t.matches[r];if(1==a.isGroup)n=l(a,!0);else if(1==a.isQuantifier){var o=e.inArray(a,t.matches),s=t.matches[o-1],u=c;if(isNaN(a.quantifier.max)){for(;a.repeaterPart&&a.repeaterPart!=c&&a.repeaterPart.length>c.length&&!(n=l(s,!0)););n=n||l(s,!0),n&&(a.repeaterPart=c),c=u+a.quantifier.max}else{for(var d=0,h=a.quantifier.max-1;h>d&&!(n=l(s,!0));d++);c=u+"{"+a.quantifier.min+","+a.quantifier.max+"}"}}else if(void 0!=a.matches)for(var m=0;m<a.length&&!(n=l(a[m],i));m++);else{var g;if("["==a.charAt(0)){g=c,g+=a;for(var v=0;p>v;v++)g+=")";var y=new RegExp("^("+g+")$");n=y.test(f)}else for(var b=0,k=a.length;k>b;b++)if("\\"!=a.charAt(b)){g=c,g+=a.substr(0,b+1),g=g.replace(/\|$/,"");for(var v=0;p>v;v++)g+=")";var y=new RegExp("^("+g+")$");if(n=y.test(f))break}c+=a}if(n)break}return i&&(c+=")",p--),n}null==a.regexTokens&&s();var u=i.buffer.slice(),c="",d=!1,p=0;u.splice(n,0,t);for(var f=u.join(""),h=0;h<a.regexTokens.length;h++){var o=a.regexTokens[h];if(d=l(o,o.isGroup))break}return d},cardinality:1}}}}),e.fn.inputmask}(jQuery),angular.module("enrollApp",["utilsApp","ngAnimate","ngRoute"]).value("ENROLL_CONSTANTS",{COUNTRIES:["Afghanistan","Albania","Algeria","American Samoa","Andorra","Angola","Anguilla","Antarctica","Antigua and Barbuda","Argentina","Armenia","Aruba","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bermuda","Bhutan","Bolivia","Bosnia and Herzegovina","Botswana","Bouvet Island","Brazil","British Indian Ocean Territory","Brunei Darussalam","Bulgaria","Burkina Faso","Burundi","Cambodia","Cameroon","Canada","Cape Verde","Cayman Islands","Central African Republic","Chad","Chile","China","Christmas Island","Cocos (Keeling) Islands","Colombia","Comoros","Congo","Congo, The Democratic Republic of The","Cook Islands","Costa Rica","Cote D'ivoire","Croatia","Cuba","Cyprus","Czech Republic","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Ethiopia","Falkland Islands (Malvinas)","Faroe Islands","Fiji","Finland","France","French Guiana","French Polynesia","French Southern Territories","Gabon","Gambia","Georgia","Germany","Ghana","Gibraltar","Greece","Greenland","Grenada","Guadeloupe","Guam","Guatemala","Guinea","Guinea-bissau","Guyana","Haiti","Heard Island and Mcdonald Islands","Holy See (Vatican City State)","Honduras","Hong Kong","Hungary","Iceland","India","Indonesia","Iran, Islamic Republic of","Iraq","Ireland","Israel","Italy","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Kiribati","Korea, Democratic People's Republic of","Korea, Republic of","Kuwait","Kyrgyzstan","Lao People's Democratic Republic","Latvia","Lebanon","Lesotho","Liberia","Libyan Arab Jamahiriya","Liechtenstein","Lithuania","Luxembourg","Macao","Macedonia, The Former Yugoslav Replublic Of","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Martinique","Mauritania","Mauritius","Mayotte","Mexico","Micronesia, Federated States of","Moldova, Republic Of","Monaco","Mongolia","Montserrat","Morocco","Mozambique","Myanmar","Namibia","Nauru","Nepal","Netherlands","Netherlands Antilles","New Caledonia","New Zealand","Nicaragua","Niger","Nigeria","Niue","Norfolk Island","Northern Mariana Islands","Norway","Oman","Pakistan","Palau","Palestinian Territory, Occupied","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Pitcairn","Poland","Portugal","Puerto Rico","Qatar","Reunion","Romania","Russian Federation","Rwanda","Saint Helena","Saint Kitts and Nevis","Saint Lucia","Saint Pierre and Miquelon","Saint Vincent and The Grenadines","Samoa","San Marino","Sao Tome and Principe","Saudi Arabia","Senegal","Serbia and Montenegro","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Georgia and The South Sandwich Islands","Spain","Sri Lanka","Sudan","Suriname","Svalbard and Jan Mayen","Swaziland","Sweden","Switzerland","Syrian Arab Republic","Taiwan, Province of China","Tajikistan","Tanzania, United Republic of","Thailand","Timor-leste","Togo","Tokelau","Tonga","Trinidad and Tobago","Tunisia","Turkey","Turkmenistan","Turks and Caicos Islands","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States","United States Minor Outlying Islands","Uruguay","Uzbekistan","Vanuatu","Venezuela, Bolivarian Republic Of","Vietnam","Virgin Islands, British","Virgin Islands, U.S.","Wallis and Futuna","Western Sahara","Yemen","Zambia","Zimbabwe"],STATES:["AK","AL","AR","AS","AZ","CA","CO","CT","DC","DE","FL","FM","GA","GU","HI","IA","ID","IL","IN","KS","KY","LA","MA","MD","ME","MH","MI","MN","MO","MP","MS","MT","NC","ND","NE","NH","NJ","NM","NV","NY","OH","OK","OR","PA","PR","PW","RI","SC","SD","TN","TX","UT","VA","VI","VT","WA","WI","WV","WY"],EAD_CODES:["A01","A02","A03","A04","A05","A06","A07","A08","A09","A10","A11","A12","A13","A14","A15","A16","A17","A18","A19","A20","C01","C02","C03","C04","C05","C06","C07","C08","C09","C10","C11","C14","C15","C16","C17","C18","C19","C20","C21","C22","C23","C24"],SPECIAL_ENROLLMENT_DATE:["Coverage End Date","Coverage End Date","Marriage Date","Release Date","Immigration Date","Move Date"],TAX_STATUS:{single:["Single, filing taxes","Single, claimed as dependent","Single, not filing"],married:["Married, filling jointly","Married, filling separately","Married, not filing","Married, claimed as dependent"]},RELATIONSHIPS:["Spouse","Son/daughter","Parent","Domestic partner","Stepparent","Parent's domestic partner","Stepson/stepdaughter","Child of domestic partner","Brother/sister","Uncle/aunt","Nephew/niece","Grandparent","Grandchild","Other relative","Other unrelated"],RELATIONSHIPS_RESTRICTIONS:[1,null,2,1,2,1,null,null,null,null,null,4,null,null,null],CHIP_MEDICAID_BREAKPOINTS:{VA:[1.43,1.43,1.43,2,1.43,null,.49,1,null],TX:[1.98,1.44,1.33,2.01,1.98,null,.15,1,null],OH:[2.06,2.06,2.06,null,2,null,1.33,1.33,null],MO:[1.96,1.5,1.5,3,1.96,null,.18,1,null],NC:[2.1,2.1,1.33,2.11,1.96,null,.45,1,.46],NY:[2.18,1.49,1.49,4,2.18,null,1.33,1.33,1.5],PA:[2.15,1.57,1.33,3.14,2.15,null,1.33,1.33,1.33],GA:[2.05,1.49,1.33,2.47,2.2,null,.35,1,null],FL:[2.06,1.4,1.33,2.1,1.91,null,.3,1,.3],CA:[2.61,2.61,2.61,null,2.08,null,1.33,1.33,null],IL:[1.42,1.42,1.42,3.13,2.08,null,1.33,1.33,null],AZ:[1.47,1.41,1.33,null,1.56,null,1.33,1.33,null],OR:[1.85,1.33,1.33,3,1.85,null,1.33,1.33,null]}}).controller("enrollCtrl",["$scope","$http","$timeout","ENROLL_CONSTANTS","enrollService","utilsService","UTILS_CONSTANTS","$location",function(e,t,i,n,r,a,o,s){e.CONSTANTS=n,e.CONSTANTS.DEFINITIONS=o.DEFINITIONS,e.urlParams=urlParams,e.profile=urlParams.profile,e.hasPlan=!0,e.error=null;var l="Oops our HoneyInsured bot found an error. Please contact us via support@honeyinsured.com or chat and we will assist you as soon as possible!";e._=_,e.startDate=r.calInsuranceStartDate();var u=r.serviceCalDate(-61),c=r.serviceCalDate(60);e.specialEnrollmentReasons=["Lost coverage after "+u,"Will lose coverage before "+c,"Got married after "+u,"Get released from incarceration after "+u,"Gained immigration status after "+u,"Moved to a different zip code after "+u],e.plan=a.getPlan(urlParams.plan),e.plan||(e.hasPlan=!1,t.get(a.RECOMMEND_ENDPOINT+window.encodeJson(urlParams.profile)+"&id="+urlParams.plan).then(function(t){t.data.premium?(e.plan=t.data,a.savePlan(e.plan),e.form.isSubsidy=!!e.plan.originalPremium,e.hasPlan=!0):(e.error=l,window.reportBug("enroll plan not found",JSON.stringify(t)))}));var d=e.$watch("plan",function(t){if(t){var i=document.createElement("a");i.href=document.referrer,"/recommend.html"==i.pathname&&window.tagEvent("enroll",{plan:t.name}),"catastrophic"==e.plan.metal&&(e.templateIndex=-1),d()}});r.setState(urlParams.state),e.errors=null;var p=function(i,n){e.form.plan=e.plan,t.post(a.ENROLL_ENDPOINT+"&stage="+i,{data:window.encodeJson(e.form)}).then(function(t){+t.data&&(e.applicationId=t.data),window.tagEvent("Enroll "+i,{applicationId:e.applicationId}),"you"==i&&window.updateUser("Signup Enroll",e.form.email,{name:e.form.members[0].firstName})},function(e){window.reportBug("enroll post fail",JSON.stringify(res))}),window.reportBug("Enroll Cache "+i+" "+e.form.members[0].firstName,window.encodeJson(e.form)),n&&n()};e.form={userId:getCookie("userId"),address:{fip:urlParams.fip,zip:urlParams.zip,state:urlParams.state},primary:{},members:[{relationship:"You"}],incomes:[],isSubsidy:e.plan&&!!e.plan.originalPremium},e.addMember=function(t,r){var a=n.RELATIONSHIPS_RESTRICTIONS[n.RELATIONSHIPS.indexOf(t)];a&&_.filter(e.form.members,function(e){return e.relationship==t}).length>=a||(e.form.members.push({relationship:t}),$("#addMember").dropdown("toggle"),i(function(){$(".household-name:last").focus()},100),r.stopPropagation())},e.removeMember=function(t,i){t>0&&e.form.members.splice(t,1),i.stopPropagation()},e.addIncome=function(t,n){e.form.incomes.push({person:t}),$("#addIncome").dropdown("toggle"),i(function(){$(".income-amount:last").focus()},100),n.stopPropagation()},e.removeIncome=function(t,i){e.form.incomes.splice(t,1),i.stopPropagation()},e.templateIndex=0;var f=[];e.next=function(t){t.$setSubmitted();var i=e.templateIndex;if(h[e.templateIndex]=t||{$valid:!0},(1!=i||!t.$valid||!e.marriedButSeperated||e.form.proceedWithoutSubsidy)&&t.$valid){if(0==i)f.push(e.templateIndex),e.templateIndex++,p("you");else if(1==i)if(f.push(e.templateIndex),p("household"),e.form.isSubsidy)if(e.marriedButSeperated&&e.form.proceedWithoutSubsidy)h[2]={$valid:!0},m(!0),e.templateIndex=3;else{var n=_.pluck(e.form.incomes,"person");_.map(e.form.members,function(t){-1==n.indexOf(t.firstName)&&e.form.incomes.push({person:t.firstName})}),e.templateIndex++}else e.templateIndex=3,m();else 2==i?(f.push(e.templateIndex),p("income"),e.templateIndex=3,m()):4==i?e.templateIndex=5:5==i&&(e.hasCompleted=!0,e.templateIndex=6,p("submit",function(){e.hasCompleted=!0,e.templateIndex=7}));$("html,body").animate({scrollTop:0},400)}},e.back=function(){f.length>0&&(e.templateIndex=f.splice(-1,1))},e.marriedButSeperated=!1,e.form.proceedWithoutSubsidy=!1,e.$watch("form.members",function(t){_.pluck(t,"relationship").indexOf("Spouse")>-1?(_.map(_.filter(e.form.members,function(e){return["You","Spouse"].indexOf(e.relationship)>-1}),function(e){e.isMarried=!0}),e.marriedButSeperated=!1):e.marriedButSeperated=e.form.members[0].isMarried?!0:!1},!0),e.$watch("templateIndex",function(e){s.hash(e)});var h={2:{$valid:!e.form.isSubsidy},3:{$valid:!0},4:{$valid:!0}};e.$on("$locationChangeStart",function(t){if(e.hasCompleted)return void t.preventDefault();if(-1!=+s.hash()&&(+s.hash()||0==+s.hash())){var i=0;_.map(_.range(0,+s.hash()),function(e){h[e]&&(h[e].$valid||1==e&&1==_.keys(h[1].$error).length&&h[1].$error.invalidTaxStatus)&&i++}),e.templateIndex=+s.hash()==i?i:0}}),e.goBackInfo=function(e){var t=location.search.substr(1);t=t.slice(0,t.indexOf("&plan="))+e,window.location="/info.html?"+t},e.goBackRecommend=function(){var t=location.search.substr(1);t=t.slice(0,t.indexOf("&plan="))+"##"+e.urlParams.plan,window.location="/recommend.html?"+t};var m=function(i){if(e.form.isSubsidy&&!i){var n=_.reduce(e.form.incomes,function(e,t){return e+parseInt(t.amount.replace("$",""))},0),o=r.calFPLRatio(e.form.incomes.length,n);e.inEligibles=[],_.map(e.form.members,function(t){t.isApplying&&(r.setChipOrMedicaidOrMedicareEligible(t,o),t.isEligible=!(t.isMedicaid||t.isMedicare||t.isChip),!t.isEligible&&e.inEligibles.push(t))})}var s={address:e.form.address,incomes:e.form.incomes,members:_.filter(e.form.members,function(t){return!e.form.isSubsidy||t.isApplying&&(i||t.isEligible)})};if(e.nonEligible=!1,0==s.members.length)return e.nonEligible=!0,void(e.templateIndex=4);var l={fip:s.address.fip,zip:s.address.zip,state:s.address.state,income:i||!e.form.isSubsidy?1e4:_.reduce(s.incomes,function(e,t){return e+parseInt(t.amount.replace("$",""))},0),size:e.form.isSubsidy?s.members.length:e.profile.size,persons:[]};_.map(s.members,function(e){var t={age:r.calAge(e.birthdate),smoker:e.isTobacco?"true":"false"};l.persons.push(t)}),t.get(a.RECOMMEND_ENDPOINT+window.encodeJson(l)+"&id="+e.plan.id).then(function(t){var i=t.data,n=e.plan.premium;_.map(["premium","medDed","moop"],function(t){e.plan[t]=i[t]}),i.originalPremium?e.plan.originalPremium=i.originalPremium:delete e.plan.originalPremium,e.templateIndex=Math.abs(1-n/i.premium)>.01||!_.isEmpty(e.inEligibles)?4:5})}}]).factory("enrollService",["ENROLL_CONSTANTS",function(e){var t,i={};return i.setState=function(e){t=e},i.calFPLRatio=function(e,t){return+e&&+t?t/(7610+4160*e):null},i.calAge=function(e){var t=new Date(i.calInsuranceStartDate()+" 2016"),n=e.split("/"),r=new Date(parseInt(n[2]),parseInt(n[0])-1,parseInt(n[1])),a=t.getFullYear()-r.getFullYear(),o=t.getMonth()-r.getMonth();return(0>o||0===o&&t.getDate()<r.getDate())&&a--,a},i.setChipOrMedicaidOrMedicareEligible=function(i,n){if(i.birthdate||i.age){var r=i.age?i.age:this.calAge(i.birthdate);if(i.isMedicare=r>=65,!n||i.isMedicaidChipRejected)return i.isMedicaid=!1,void(i.isChip=!1);var a,o,s=e.CHIP_MEDICAID_BREAKPOINTS[t];if(18>=r){var l=_.chain([2,6,19]).map(function(e,t){return[e-r,t]}).filter(function(e){return e[0]>0}).min(function(e){return e[0]}).value()[1];a=s[l],2==l&&(o=s[3])}else a=s[8]&&21>r?s[8]:i.isCaretaker?s[6]:s[7]-.05;i.gender&&"female"==i.gender&&i.isPregnant&&(a=a?_.max([a,s[4]]):s[4],o=o?_.max([o,s[5]]):s[5]);var u=.05;n-=u,i.isMedicaid=a?a>=n:!1,i.isChip=o?o>=n:!1}},i.calInsuranceStartDate=function(){var e=new Date(Date.now()+18e5);if(e<new Date(2015,11,16))return"January 1";var t=["January","February","March","April","May","June","July","August","September","October","November","December"];return e.getDate()<16?t[(e.getMonth()+1)%12]+" 1":t[(e.getMonth()+2)%12]+" 1"},i.serviceCalDate=function(e){var t=new Date(Date.now());return t.setDate(t.getDate()+(e||0)),t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear()},i}]).directive("geolocation",function(){return{restrict:"A",link:function(e,t,i){var n=e.$eval(i.geolocation),r=new google.maps.places.Autocomplete($(t)[0],{types:["geocode"],componentRestrictions:{country:"US"}}),a={street_number:"short_name",route:"long_name",administrative_area_level_1:"short_name",locality:"long_name",postal_code:"short_name"};google.maps.event.addListener(r,"place_changed",function(){var i,o=r.getPlace(),s={};_.map(o.address_components,function(e){(i=a[e.types[0]])&&(s[e.types[0]]=e[i])}),s.postal_code&&(n.zip=s.postal_code),n.state=s.administrative_area_level_1?s.administrative_area_level_1:"",n.city=s.locality?s.locality:"",
n.street=(s.street_number?s.street_number+" ":"")+(s.route?s.route:""),$(t).blur(),e.$apply()})}}}).directive("checkGender",["$http",function(e){return{restrict:"A",require:"ngModel",link:function(t,i,n,r){var a=$($(i).parent().parent().find("input")[0]);a.blur(function(){""!=$(this).val()&&e.get("https://api.genderize.io/?name="+$(this).val()+"&country_id=us&language_id=en").then(function(e){e.data.probability&&parseFloat(e.data.probability)>.9&&r.$setViewValue(e.data.gender)})})}}}]).directive("validEmail",function(){return{require:"ngModel",link:function(e,t,i,n){n.$validators.fakeEmail=function(e,t){if(n.$isEmpty(e)||e.length<=5)return!0;var i=_.some([/^\d+@/,/^none@/,/^no@/,/@mailinator/,/@asdf/,/@namemail/,/@noemail/,/^test@/,/john@gmail.com/,/@fakeinbox/],function(t){return t.test(e)});return!i}}}}).directive("validPhone",function(){return{require:"ngModel",link:function(e,t,i,n){n.$validators.fakePhone=function(e,t){return n.$isEmpty(e)||e.replace(/_/g,"").length<14?!0:["201","202","203","205","206","207","208","209","210","212","213","214","215","216","217","218","219","224","225","228","229","231","234","239","240","248","251","252","253","254","256","260","262","267","269","270","272","276","281","301","302","303","304","305","307","308","309","310","312","313","314","315","316","317","318","319","320","321","323","325","330","331","334","336","337","339","340","346","347","351","352","360","361","385","386","401","402","404","405","406","407","408","409","410","412","413","414","415","417","419","423","424","425","430","432","434","435","440","442","443","458","469","470","475","478","479","480","484","501","502","503","504","505","507","508","509","510","512","513","515","516","517","518","520","530","531","534","539","540","541","551","559","561","562","563","567","570","571","573","574","575","580","585","586","601","602","603","605","606","607","608","609","610","612","614","615","616","617","618","619","620","623","626","630","631","636","641","646","650","651","657","660","661","662","667","669","670","671","678","681","682","684","701","702","703","704","706","707","708","712","713","714","715","716","717","718","719","720","724","725","727","731","732","734","737","740","747","754","757","760","762","763","765","769","770","772","773","774","775","779","781","785","786","787","801","802","803","804","805","806","808","810","812","813","814","815","816","817","818","828","830","831","832","843","845","847","848","850","856","857","858","859","860","862","863","864","865","870","872","878","901","903","904","906","907","908","909","910","912","913","914","915","916","917","918","919","920","925","928","929","931","936","937","938","939","940","941","947","949","951","952","954","956","970","971","972","973","978","979","980","984","985","989"].indexOf(e.slice(1,4))>-1}}}}).directive("validZipcode",function(){return{require:"ngModel",link:function(e,t,i,n){n.$validators.wrongZip=function(t,i){return n.$isEmpty(t)||t.length<5?!0:e.urlParams.zip==t}}}}).directive("capitalizeFirst",["$parse",function(e){return{require:"ngModel",link:function(t,i,n,r){var a=function(e){void 0===e&&(e="");var t=e.charAt(0).toUpperCase()+e.substring(1);return t!==e&&(r.$setViewValue(t),r.$render()),t};r.$parsers.push(a),a(e(n.ngModel)(t))}}}]).directive("validBirthdate",["enrollService",function(e){return{require:"ngModel",link:function(t,i,n,r){r.$validators.insufficientAge=function(i,a){return r.$isEmpty(i)||i.replace(/[mdy]/,"").length<10?!0:"You"==t.$eval(n.validBirthdate)&&e.calAge(i)<18&&e.calAge(i)>=0?!1:!0},r.$validators.fakeBirthdate=function(t,i){return r.$isEmpty(t)||t.replace(/[mdy]/,"").length<10?!0:(console.log(t,e.calAge(t)),e.calAge(t)>=0)}}}}]).directive("validTaxStatus",["enrollService",function(e){return{require:"ngModel",link:function(e,t,i,n){var r=function(){return _.isEmpty(_.keys(e.$eval(i.validTaxStatusForm).$error))};"You"==e.$eval(i.validTaxStatus)&&e.$watch("form.members",function(t){_.pluck(t,"relationship").indexOf("Spouse")>-1?(_.map(_.filter(e.form.members,function(e){return["You","Spouse"].indexOf(e.relationship)>-1}),function(e){e.isMarried=!0}),n.$setValidity("invalidTaxStatus",!0)):e.form.members[0].isMarried&&n.$setValidity("invalidTaxStatus",!1)},!0),n.$validators.invalidTaxStatus=function(t,n){return"You"!=e.$eval(i.validTaxStatus)?!0:r()&&t&&_.isEmpty(_.filter(e.form.members,function(e){return"Spouse"==e.relationship}))?!1:!0}}}}]).directive("validSignature",function(){return{require:"ngModel",link:function(e,t,i,n){n.$validators.invalidSignature=function(t,i){return n.$isEmpty(t)?!0:t.toLowerCase().trim()==(e.form.members[0].firstName+" "+e.form.members[0].lastName).toLowerCase().trim()?!0:!1}}}}),angular.module("basicinfoSubapp",["enrollApp"]).controller("basicinfoCtrl",["$scope","$http","$timeout","enrollService",function(e,t,i,n){e.hasIorSpouse=function(t){return _.pluck(e.profile.displayPersons,"rel").indexOf(t)>-1},e.canAskIncome=!1,e.subsidyError=null,e.canNext=!1;var r,a;e.$watch("profile",function(t){if(e.canNext=!1,e.subsidyError=null,0!=e.profile.displayPersons.length){var o=e.profile.displayPersons.length>0&&_.chain(e.profile.displayPersons).map(function(e){return+e.age&&(["me","spouse"].indexOf(e.rel)>-1&&e.age>=18||"dependent"==e.rel)}).every().value();if(o&&+e.profile.size&&+e.profile.income&&e.form.$valid){var s=n.calFPLRatio(e.profile.size,e.profile.income);n.setState(e.profile.state);var l={medicare:[],chip:[],medicaid:[]},u=_.map(e.profile.displayPersons,function(e){return n.setChipOrMedicaidOrMedicareEligible(e,s),e.isChip?l.chip.push(e):e.isMedicaid?l.medicaid.push(e):e.isMedicare&&l.medicare.push(e),e.isEligible=!(e.isMedicaid||e.isMedicare||e.isChip),e.isMedicaid||e.isMedicare||e.isChip});if(_.every(u))i.cancel(a),a=i(function(){e.canNext=!1,e.subsidyError="Your family may qualify for government Medicaid or CHIP plans. Please visit HealthCare.gov for more information."},1e3);else if(_.some(u)){var c={medicare:"Medicare",chip:"CHIP",medicaid:"Medicaid"},d={me:"you",spouse:"your spouse",dependent:"your AGE-year-old dependent"},p=function(e){return e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()},f=_.map(l,function(e,t){if(!_.isEmpty(e)){var i=_.reduce(e,function(t,i,n){var r=d[i.rel].replace("AGE",i.age);return null==t?p(r):n==e.length-1?t+" and "+r:t+", "+r},null);return["medicaid","chip"].indexOf(t)>-1?i+=" may qualify for government Medicaid or CHIP plans. That's okay! You can still proceed to view plans for the rest of your family.":"medicare"==t&&(i+=" may qualify for government "+c[t]+" plans. That's okay! You can still proceed to view plans for the rest of your family."),i}});f=_.compact(f),f=_.reduce(f,function(e,t,i){return i!=f.length-1?e+" "+t.replace(" That's okay! You can still proceed to view plans for the rest of your family.",""):e+" "+t},""),i.cancel(a),a=i(function(){e.subsidyError=f,e.canNext=!0},1e3)}else i.cancel(a),e.canNext=!0,e.subsidyError=""}e.canAskIncome||(i.cancel(r),r=i(function(){var t=_.last(e.profile.displayPersons);e.canAskIncome=("dependent"!=t.rel&&2==String(t.age).length||"dependent"==t.rel)&&o},100))}},!0),e.$watch("canNext",function(t){t&&(e.profile.persons=_.clone(_.filter(e.profile.displayPersons,function(e){return e.isEligible}))),e.$parent.hasCompletedInfo=t})}]).directive("numPerson",["$timeout",function(e){return{restrict:"A",require:"ngModel",link:function(t,i,n,r){$(i).focus();var a=t.urlParams.profile&&t.urlParams.profile.persons?t.urlParams.profile.persons:[];t.$watch("profile.numPerson",function(n,r){if(null==n)t.profile.numPerson="",a=_.map(t.profile.displayPersons,_.clone);else if(n=String(n),n.length>1||1==n.length&&!+n)t.profile.numPerson=r;else if(1==n.length){if(a.length>n)t.profile.displayPersons=a.slice(0,n);else if(a.length<n){var o=n-a.length,s=_.uniq(_.pluck(a,"rel")),l=[];-1==s.indexOf("me")&&l.push("me"),-1==s.indexOf("spouse")&&l.push("spouse"),l=l.slice(0,o),o>l.length&&_.map(_.range(0,o-l.length),function(e){l.push("dependent")}),_.map(l,function(e){a.push({rel:e,age:null,smoker:"false"})}),t.profile.displayPersons=a}e(function(){var e=$($(i).parent().nextAll()[_.map(t.profile.displayPersons,function(e){return!e.age}).indexOf(!0)]).find("input");e&&e.focus()},120)}})}}}]).directive("numInput",["$timeout",function(e){return{restrict:"A",require:"ngModel",link:function(t,i,n,r){t.$watch(n.ngModel,function(t,a){null==t?(r.$setViewValue(""),r.$render()):(t=String(t),t.length>n.numInput||t.length<=n.numInput&&!+t?(r.$setViewValue(a),r.$render()):t.length==n.numInput&&e(function(){var e=$(i).parent().next().find("input").last();e&&e.focus()},120))})}}}]).directive("size",["$timeout",function(e){return{restrict:"A",require:"ngModel",link:function(e,t,i,n){e.$watch("canAskIncome",function(t){t&&(n.$setViewValue(e.profile.numPerson),n.$render())}),e.$watch("profile.numPerson",function(e){n.$modelValue<e&&(n.$setViewValue(e),n.$render())}),e.$watch(i.ngModel,function(t,i){t||n.$setValidity("insufficientTaxPeople",!0),+t&&t<e.profile.numPerson?n.$setValidity("insufficientTaxPeople",!1):n.$setValidity("insufficientTaxPeople",!0)})}}}]).directive("age",["$timeout",function(e){return{restrict:"A",require:"ngModel",link:function(e,t,i,n){var r=function(i){["me","spouse"].indexOf($(t).parent().find("select").val())>-1&&""!=n.$viewValue&&+n.$viewValue<18?(n.$setValidity("insufficientAge",!1),i&&e.$apply()):(n.$setValidity("insufficientAge",!0),i&&e.$apply())};$(t).blur(function(){r(!0)}),e.$on("checkAge",function(){r()}),e.$watch(i.ngModel,function(e,i){e||n.$setValidity("insufficientAge",!0),["me","spouse"].indexOf($(t).parent().find("select").val())>-1&&2==String(e).length&&(18>e&&n.$setValidity("insufficientAge",!1),e>=18&&n.$setValidity("insufficientAge",!0))})}}}]).directive("selectpickerRel",function(){return{restrict:"A",require:"ngModel",link:function(e,t,i,n){$(t).selectpicker({}),e.$watch(i.ngModel,function(i){$(t).val(i),$(t).selectpicker("refresh"),e.$broadcast("checkAge")}),e.$watch("profile.displayPersons",function(){$(t).val(n.$viewValue),$(t).selectpicker("refresh")},!0)}}}),angular.module("doctorSubapp",["utilsApp"]).controller("doctorSubappCtrl",["$scope","$http","$timeout","$q","utilsService",function(e,t,i,n,r){e.searchDoctor="",e.searchResults=[];n.defer()}]).directive("selectDoctor",["$http","$timeout","utilsService",function(e,t,i){return{restrict:"A",link:function(t,n,r){var a,o,s,l=(t.urlParams.zip,function(e){return String(e).replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})});$(n).selectize({valueField:"id",labelField:"name",searchField:"name",maxItems:null,create:!1,closeAfterSelect:!0,openOnFocus:!1,hideSelected:!0,options:[],render:{option:function(e,t){return'<div><span class="title">'+t(e.name)+'</span><span class="text">'+t(e.specialty)+'</span><span class="text">'+t(e.address1)+", "+t(e.address2)+"</span></div>"}},onInitialize:function(){0==$(".selectize-dropdown").find(".map").length&&(s=$('<div class="map" data-map ></div>'),$(".selectize-dropdown").prepend(s));var r=i.getDoctorsLookup();t.urlParams.profile&&t.urlParams.profile.providers&&_.map(t.urlParams.profile.providers,function(t){r[t]?($(n)[0].selectize.addOption({id:t,name:r[t]}),$(n)[0].selectize.addItem(t,!0)):e.get("https://honeyinsured.com/providers/"+t+"?select=providers.presentation_name").then(function(e){$(n)[0].selectize.addOption({id:t,name:e.data.provider.presentation_name}),$(n)[0].selectize.addItem(t,!0)})})},onDropdownClose:function(){$(".selectize-dropdown-content").off("mouseenter"),$(document).off("keydown");var e=$(n)[0].selectize,t=e.getValue();_.map(e.options,function(i,n){-1==t.indexOf(n)&&delete e.options[n]})},onItemAdd:function(e,i){t.doctorsLookup[e]=i[0].innerHTML},onLoad:function(){$(".selectize-dropdown-content").animate({scrollTop:0},0,function(){$(this).find("div").first().mouseover()})},onDropdownOpen:function(t){s&&!a&&(a=new google.maps.Map(s[0],{scrollwheel:!1,zoom:12})),t.on("mousedown click","[data-map]",function(e){e.preventDefault&&(e.preventDefault(),e.stopPropagation())}),$(document).on("click",".selectize-dropdown-content>div",function(e){e.preventDefault()}),""==$(n)[0].selectize.lastQuery&&$(n)[0].selectize.close();var i=function(t){e.get("https://maps.googleapis.com/maps/api/geocode/json?address="+t).then(function(e){if(o&&o.setMap(null),e.data.results[0]){var t=e.data.results[0].geometry.location;a.panTo(t),o=new google.maps.Marker({position:t,map:a})}})},r=function(){_.map($(".selectize-dropdown-content>div"),function(e){if($(e).hasClass("active")){var t=$(e).find("span").slice(-2);i(t[0].innerHTML+" "+t[1].innerHTML)}})};$(".selectize-dropdown-content").on("mouseenter","div",function(){var e=$(this).find("span").slice(-2);i(e[0].innerHTML+" "+e[1].innerHTML)}),$(document).keydown(function(e){switch(e.which){case 38:r();break;case 40:r();break;default:return}e.preventDefault()}),r()},onType:function(e){""==e&&$(n)[0].selectize.close()},load:function(e,i){return e.length?void $.ajax({url:"https://honeyinsured.com/providers/?q="+encodeURIComponent(e)+"&zip="+t.urlParams.zip,type:"GET",error:function(e){console.log(e)},success:function(t){var r=_.map(t.providers.slice(0,15),function(e){return _.object(_.map(e,function(e,t){if("address2"==t){var i=e.lastIndexOf(","),n=e.substring(0,i),r=e.substring(i+1);return[t,l(n)+","+r]}return[t,l(e)]}))});delete $(n)[0].selectize.loadedSearches[e],i(r)}}):i()}})}}}]).directive("map",["$interval","$timeout","$http","doctorFactory",function(e,t,i,n){return{restrict:"A",scope:!1,link:function(e,n,r){var a,o,s;i.get("https://maps.googleapis.com/maps/api/geocode/json?address="+e.urlParams.zip).then(function(e){s=e.data.results[0].geometry.location});var l=function(){!a&&(a=new google.maps.Map($(n)[0],{center:s,scrollwheel:!1,zoom:10}))};e.$watch("searchResults",function(t){o&&_.map(o,function(e){e.setMap(null)}),o=[],_.map(t,function(t,n){i.get("https://maps.googleapis.com/maps/api/geocode/json?address="+t.address1+t.address2).then(function(t){var i=t.data.results[0].geometry.location,r=new google.maps.Marker({position:i,label:e.ALPHABETS[n],map:a});o.push(r)})})}),t(l,400)}}}]),angular.module("healthcostSubapp",["ngRoute","rzModule"]).controller("healthcostSubappCtrl",["$scope","$http","$timeout","healthcostFactory","HEALTHCOST_CONSTANTS","$location",function(e,t,i,n,r,a){e.healthcostSlider={model:50,ceil:100,floor:0},e.healthcostHover=null,e.heathcostEdit=null,e.DEFINITIONS=r.DEFINITIONS,n.setState(e.urlParams.state),e.urlParams.profile&&+e.urlParams.profile.healthSlider&&(e.healthcostSlider.model=+e.urlParams.profile.healthSlider),e.custom=_.object(_.map(_.keys(r.KEYS),function(e){return[e,""]})),e.$watch("custom",function(e){n.setCustom(e)},!0),e.$watch("profile.persons",function(e){_rawPersons=_.map(_.map(e,_.clone),function(e){return e.age=e.age>65?65:e.age,e.age<=20&&(e.age=20),e}),n.setPersons(_rawPersons)},!0);var o=function(e){return e/100};e.$watch(function(){return a.hash()},function(t){"health"==t&&i(function(){e.$broadcast("rzSliderForceRender")},80),n.setHealthFactor(o(e.healthcostSlider.model)),n.cal()}),e.$watch("healthcostSlider.model",function(t){n.setHealthFactor(o(t)),e.profile.healthSlider=t,n.cal()}),e.useEstimate=function(){n.cal()},e.useDefault=function(t){e.custom[t]="",n.cal()},e.$watch(function(){return n.getHealthcost()},function(t){e.healthcost=t,e.profile.healthcost=n.getParsedcost()})}]).factory("healthcostFactory",["$http","HEALTHCOST_CONSTANTS",function(e,t){var i=null,n=null,r=null,a=null,o=null,s=null,l=null,u={};return u.cal=function(){var e=_.sortBy(_.map(t.PERCENTILE,function(e,t){return[t,e]}),function(e){return Math.abs(r-e[1])}),i=_.map(t.COSTS,function(i,n){return personCosts=_.map(s,function(n){return.11>r?0:(y1=i[e[0][0]],y2=i[e[1][0]],x1=e[0][1],x2=e[1][1],m=(y1-y2)/(x1-x2),_.max([0,(y1+m*(r-x1))*t.STATES[_state]*t.AGE[n.age]]))}),totalCosts=_.reduce(personCosts,function(e,t){return e+t}),a&&""!=a[n]&&(totalCosts=parseInt(a[n].substring(1))),{key:n,value:totalCosts}});n={components:i,total:_.reduce(_.pluck(i,"value"),function(e,t){return e+t})},l={},_.map(i,function(e){var i=t.KEYS[e.key];$.isArray(i)?_.map(i,function(t){l[t]=Math.round(e.value/i.length)}):l[i]=Math.round(e.value)})},u.getResults=function(){return o},u.getHealthcost=function(){return n},u.getParsedcost=function(){return l},u.setPlansFactory=function(e){i=e},u.setPersons=function(e){s=e},u.setCustom=function(e){a=e},u.setState=function(e){_state=e},u.setHealthFactor=function(e){r=e},u}]).directive("healthcostAccordion",function(){return{restrict:"A",link:function(e,t,i){$(t).next().on("show.bs.collapse",function(){$(t).find(".pull-right").hide()}).on("hide.bs.collapse",function(){$(t).find(".pull-right").show()})}}}).directive("inputmask",function(){return{restrict:"A",link:function(e,t,i){$(t).inputmask(e.$eval("{"+i.inputmask+"}"))}}}).value("HEALTHCOST_CONSTANTS",{PERCENTILE:[0,.178,.2131,.2449,.2747,.3023,.328,.3519,.3738,.3942,.4131,.4308,.4474,.4631,.478,.4921,.5054,.518,.53,.5415,.5525,.5629,.573,.5826,.592,.6009,.6095,.6178,.6257,.6335,.6409,.6481,.6549,.6616,.6681,.6744,.6804,.6862,.6918,.6973,.7027,.7078,.7128,.7176,.7224,.727,.7314,.7357,.74,.7441,.7481,.7521,.7559,.7596,.7632,.7667,.7702,.7735,.7768,.78,.7831,.7861,.7891,.792,.7948,.8198,.8641,.9144,.9413,.9569,.9667,.9734,.9782,.9816,.9844,.9951],COSTS:{"Primary Visits":[0,49.4538,76.3407,102.5038,124.2062,144.2154,161.252,174.5025,188.662,200.1068,210.6947,220.0671,226.3018,234.0591,239.9032,246.7145,250.8484,256.6648,264.4775,265.4005,272.3611,275.028,277.6096,280.5428,282.737,288.7977,293.5395,295.9921,298.2618,302.0081,304.6855,308.3947,311.4453,314.2498,317.3484,321.5979,324.4034,327.0138,328.1545,327.2365,327.3965,333.3365,341.4081,339.5008,338.0022,341.8792,342.2981,346.6998,347.9817,347.5274,348.5683,350.8383,357.2492,351.3467,358.3737,360.9306,358.7832,363.5156,361.8649,368.7035,369.6101,365.7936,369.3415,371.5876,374.2103,379.6355,397.2566,410.6176,424.833,450.9254,470.7023,490.0695,512.8181,543.9409,527.9296,584.6467],"Specialist Visits":[0,15.8021,27.4327,36.2079,44.9915,53.4251,61.6052,69.7808,77.6089,85.8637,93.2702,100.7646,106.9145,113.0367,119.7233,125.2929,132.3791,137.7498,142.9593,148.8272,152.9782,160.1669,166.1739,164.5855,170.5018,177.241,179.8019,185.9462,187.9247,194.2222,197.0366,202.7223,207.2347,213.3576,216.4901,218.7731,222.4158,230.7394,229.9338,234.7854,245.3813,242.4497,246.2472,249.1779,253.1394,252.7729,264.6411,265.528,266.3362,272.27,281.5382,280.4749,281.451,285.5311,293.984,287.5958,290.6799,298.4301,302.2678,304.2815,306.5893,315.2097,310.4776,317.756,325.9199,337.6398,381.031,436.1684,494.1655,564.8966,637.4668,705.8823,765.4402,840.5971,928.0429,1249.334],Emergency:[0,.4745,2.2635,5.8572,10.3174,15.965,22.5998,29.0313,38.0917,47.0007,55.494,65.6503,75.0033,83.5249,91.0573,100.7943,112.5841,119.6649,127.8207,138.0759,149.737,154.5803,165.5565,171.9032,183.5146,193.1062,202.7061,215.6296,219.2404,233.6666,246.3075,248.3661,253.9298,266.7122,272.1845,280.7525,284.9965,301.9602,315.0419,316.0405,331.1226,335.9852,347.7427,365.4044,360.6892,372.6741,384.4849,377.3535,411.7445,419.6603,418.102,432.8712,445.0092,448.007,446.8865,457.7156,467.7805,497.1733,503.7151,507.5712,529.1958,528.2516,538.7832,533.8281,559.8638,602.6296,745.3396,973.6616,1259.005,1531.2481,1774.3138,1913.916,2041.909,2255.7404,2237.0141,2507.6463],"Generic Drugs":[0,21.0757,31.3214,43.2162,55.7808,69.1137,84.06,98.8916,112.2548,125.8597,138.9918,150.2813,160.8417,171.2687,179.8266,189.5316,199.6906,209.4989,219.2319,227.0556,233.1293,241.1218,249.1678,253.9078,260.4124,267.1761,271.4697,276.6482,285.2642,292.3144,291.1557,293.9399,301.9997,303.1889,311.6492,311.2229,311.6258,322.2515,323.4313,326.059,326.1133,333.4162,339.9749,336.6504,343.5131,349.1604,349.7428,358.8817,340.0179,351.0943,349.0668,359.3362,358.3971,371.7198,356.9521,368.9452,365.6737,361.3587,366.5339,370.2748,374.0622,368.2237,379.0537,381.1982,394.8966,389.1591,405.4817,430.6606,464.8106,515.1149,557.2011,596.1779,636.2604,653.0487,715.2608,792.6096],"Brand Drugs":[0,4.4423,8.8291,15.3045,22.277,30.4136,40.6213,51.8966,65.5417,80.7381,97.5456,116.48,142.7806,164.4582,194.2552,215.954,239.3915,262.7765,286.8947,308.7211,336.8555,359.2905,385.5394,412.4816,435.1972,466.4179,493.6366,516.2833,546.903,575.2036,593.9675,632.1304,654.8802,682.4202,707.1662,735.4619,758.7025,770.8716,808.4797,833.6858,837.8223,873.7914,883.015,926.7747,950.5282,982.4286,999.8753,1024.9485,1042.7914,1076.8201,1094.1533,1127.5546,1136.3544,1179.7888,1186.6736,1235.9856,1249.2318,1264.435,1273.8213,1308.5126,1345.8127,1356.6867,1375.9043,1438.521,1425.8416,1541.2047,1854.0965,2257.4198,2568.4463,2892.8048,3363.9943,3726.8558,3923.2838,4104.2455,4220.6661,4456.2383],"Lab Tests & Imaging":[0,7.5,17.2468,29.7627,41.7229,54.3231,67.4693,81.0787,94.9944,110.3684,124.8458,137.0574,150.2498,163.4919,174.26,186.5585,196.6611,210.172,220.9016,232.643,245.1898,255.6925,262.2367,273.7883,283.61170000000004,293.55920000000003,300.7637,311.98929999999996,319.52959999999996,327.8713,342.73699999999997,348.84799999999996,359.5904,375.7185,378.2492,387.2627,395.0588,408.0547,412.228,426.7348,441.6537,443.769,452.4871,461.94579999999996,469.04859999999996,475.4235,477.99559999999997,502.7163,506.8478,512.409,522.6363,530.1034,538.9307,533.4899,556.0533,561.1116999999999,575.8874000000001,572.1243,588.5206000000001,603.5378000000001,610.1509,609.7442,614.5205000000001,623.2659,632.9005,678.2843,805.9721999999999,1022.2777,1323.6486,1643.3491,1907.4382,2117.6429,2339.6822,2588.1062,2785.4191,4324.503500000001],"Preventive Care":[0,17.8889,28.9223,42.327,57.0063,71.527,86.239,100.0676,111.2723,120.7065,130.1568,137.448,144.887,152.6814,158.1576,165.8601,173.0643,179.5426,187.5843,193.0891,204.4094,211.8721,220.3244,231.3429,237.4387,243.5526,256.6486,259.2762,267.2755,274.7,285.4871,293.063,296.3507,303.8848,307.7132,318.5106,320.2809,330.6141,330.2088,329.815,342.8752,351.2992,351.1774,356.4717,360.0367,359.3344,362.1783,375.5191,371.6404,380.0976,373.2121,382.5778,389.9611,383.218,398.22,397.4342,411.8161,397.5081,416.5438,407.6761,396.948,413.0578,417.184,405.4901,415.7294,420.0731,440.1533,453.856,462.958,485.8835,492.4253,508.7005,526.8956,527.061,538.2795,548.7049],"In Patient Care":[0,0,0,0,0,.0811,.0207,.1286,.0483,.1896,.2216,.3141,.5953,.9154,1.0191,1.2958,2.0647,2.6201,3.1044,3.6921,4.706,6.2175,7.796,8.1943,11.1302,11.6575,13.632,17.195,17.0636,18.0037,18.8625,22.3451,23.8181,23.973,28.7719,29.7581,32.2966,35.3209,36.0458,41.0047,40.2346,44.5056,44.6011,46.5825,50.034,54.1438,55.7745,56.0692,59.1447,57.6328,61.1126,64.8317,67.2041,64.7223,65.4281,71.2672,73.8316,70.3062,76.2939,76.7068,69.9939,79.4701,74.9164,86.7952,82.3685,108.0071,257.641,1201.8871,3026.3166,4707.7291,6436.8837,8449.1942,10956.0021,13634.0972,16695.0507,27236.079],"Out Patient Care":[0,22.1025,36.6107,46.9204,58.9817,69.4044,81.1243,93.2181,105.1547,115.4449,127.9966,137.9648,150.2111,162.8487,173.4187,180.6407,192.3196,204.356,214.1422,224.6603,234.7424,244.8433,256.3992,269.8896,280.5036,290.3507,297.4218,310.402,321.525,333.3185,344.6483,352.934,362.3896,378.2154,383.0368,405.8149,415.9897,424.5677,438.9185,458.2908,471.5181,482.1169,495.4185,505.359,526.293,533.9047,548.2004,558.6113,581.9854,596.6223,611.7091,612.9059,637.6578,646.7905,676.3576,676.5292,696.4262,709.9175,725.3598,737.3296,753.3535,765.6066,794.5198,794.015,829.2868,900.5458,1165.5431,1688.4361,2350.9254,2908.3214,3386.6268,3733.1116,4224.1272,4695.8999,5078.7971,7237.8064]},DEFINITIONS:{"Primary Visits":"These are visits to your primary care doctor for basic health needs. If required, your primary care doctor can also refer you to specialists.","Specialist Visits":"These are visits to doctors who specialize in specific medical services. Some examples include cardiologists, gastroenterologists and paediaricians.",Emergency:"Emergencies may happen but you probably can't predict this.","Brand Drugs":"These are drugs with brand name and usually costs more than generic drugs.","Generic Drugs":"These are cheaper versions of brand drugs and usually have similar medical effects as brand ones.","Lab Tests & Imaging":"Examples include blood tests, X-rays and CT scans.","Preventive Care":"Examples include health checkups and vaccinations that can help you stay healthy.","In Patient Care":"These include hospital stay and surgery fees.","Out Patient Care":"These are medical procedures that can be done in a medical center without an overnight stay."},KEYS:{"Brand Drugs":44,"Generic Drugs":18,"In Patient Care":[26,27],"Lab Tests & Imaging":[28,68],"Out Patient Care":[41,43],"Preventive Care":46,"Primary Visits":47,"Specialist Visits":59,Emergency:[15,16]},COLORS:{"Brand Drugs":"#ff7f0e","Generic Drugs":"#2ca02c","In Patient Care":"#bcbd22","Lab Tests & Imaging":"#d62728","Out Patient Care":"#9467bd","Preventive Care":"#8c564b","Primary Visits":"#1f77b4","Specialist Visits":"#e377c2",Emergency:"#7f7f7f"},STATES:{FL:1.1151,GA:.9434,MO:.9755,NC:1.3,OH:1.0528,PA:1.033,TX:1.0368,VA:1.1028,CA:1.1028,AZ:.9432,IL:1.033,OR:.9434},AGE:{20:.3556,21:.4299,22:.4699,23:.5019,24:.5599,25:.5621,26:.5734,27:.5868,28:.6086,29:.6265,30:.6355,31:.6489,32:.6624,33:.6708,34:.6797,35:.6842,36:.6887,37:.6932,38:.6977,39:.7066,40:.7156,41:.729,42:.7419,43:.7598,44:.7822,45:.8085,46:.8399,47:.8751,48:.9154,49:.9552,50:1,51:1.0442,52:1.093,53:1.1422,54:1.1954,55:1.2486,56:1.3063,57:1.3645,58:1.4266,59:1.4575,60:1.5196,61:1.5733,62:1.6086,63:1.6529,64:1.6797,65:1.6797}}),REQUIRED_PARAMS=["zip","fip","state"];var urlParams=window.getJsonFromUrl();try{if(_.map(REQUIRED_PARAMS,function(e){if(!(e in urlParams))throw"Missing parameters"}),urlParams.profile&&(urlParams.profile=window.decodeJson(urlParams.profile),_.map(urlParams.profile.persons,function(e){if(!+e.age)throw"Incorrect persons"}),urlParams.profile.fip!=urlParams.fip||urlParams.profile.zip!=urlParams.zip))throw"Incorrect zip or fip"}catch(err){window.location="/index.html"}$(function(){var e=function(){("true"==getCookie("isCorrectState")||getCookie("prevStates")&&_.uniq(getCookie("prevStates").split(","))==urlParams.profile.state&&75001!=urlParams.profile.zip)&&$("#phone").show()};e(),window.setTimeout(function(){var t=document.createElement("a");t.href=document.referrer,("/"==t.pathname||"/index.html"==t.pathname)&&(window.recordZipcode(urlParams.zip,urlParams.state,!0,!0),$.get("https://telize.com/geoip",function(t){t&&t.region_code&&(t.region_code!=urlParams.state?(window.tagEvent("Incorrect State",{ip:t.region_code,state:urlParams.state}),setCookie("isCorrectState",!1,365),e()):(window.tagEvent("Correct State",{state:urlParams.state}),setCookie("isCorrectState",!0,365),e()))}))},400)}),angular.module("infoApp",["ngRoute","ngAnimate","utilsApp","basicinfoSubapp","doctorSubapp","healthcostSubapp"]).controller("infoCtrl",["$scope","$http","$timeout","utilsService","$location","CONSTANTS",function(e,t,i,n,r,a){e.urlParams=urlParams,e.profile={displayPersons:[],fip:urlParams.fip,preference:{risk:null,network:null},zip:urlParams.zip,providers:null,healthcost:{59:88.60397397565806,26:.36752214780489256,15:33.19,47:1800.6405196428811,46:1180.4233039917362,18:133.69331581989655,44:1036.001286877423,28:64.2704438861565,43:63.990083049535386,68:64.2704438861565},numPerson:null,income:"",state:urlParams.state,size:null},urlParams.profile&&_.map(e.profile,function(t,i){"displayPersons"==i&&urlParams.profile.persons&&(e.profile[i]=urlParams.profile.persons),"displayPersons"!=i&&urlParams.profile[i]&&(e.profile[i]=urlParams.profile[i])}),e.doctorsLookup={};var o=a.HASHKEYS.indexOf(r.hash());e.templateIndex=o>-1?o:0,e.$watch("templateIndex",function(e){r.hash(a.HASHKEYS[e])}),e.$on("$locationChangeStart",function(t){if(r.hash()&&a.HASHKEYS.indexOf(r.hash())>-1){var i=0;_.map(a.HASHREQS.slice(0,a.HASHKEYS.indexOf(r.hash())),function(t,n){n==i&&_.every(t,function(t){return t in e.profile})&&i++}),e.templateIndex=i,window.tagEvent("info-"+r.hash()),r.search("profile",window.encodeJson(_.object(_.clone(_.filter(_.pairs(e.profile),function(e){return"displayPersons"!=e[0]})))))}}),e.goToRecommend=function(){n.saveDoctorsLookup(e.doctorsLookup);var t=location.search.substr(1);t.indexOf("&profile=")>-1&&(t=t.slice(0,t.indexOf("&profile="))),t+="&profile="+window.encodeJson(_.object(_.clone(_.filter(_.pairs(e.profile),function(e){return"displayPersons"!=e[0]})))),window.location="/recommend.html?"+t},e.next=function(){e.templateIndex+1<a.HASHKEYS.length?(e.templateIndex++,$("html,body").animate({scrollTop:0},400)):e.goToRecommend()},e.back=function(){e.templateIndex>0&&(e.templateIndex--,$("html,body").animate({scrollTop:0},400))},e.canRecommend=function(){return e.hasCompletedInfo&&e.urlParams.profile},e.setRisk=function(t){e.profile.preference.risk=t,e.next()},e.setNetwork=function(t){e.profile.preference.network=t,e.next()},e.familyString="";var s=function(){var t=["","","two","three","four","five","six","seven","eight","nine","ten"],i="",n=_.chain(e.profile.persons).pluck("age").sortBy().countBy().pairs().value();n.reverse(),i+=_.reduce(_.map(n,function(e,i){var r="";return i==n.length-1&&i>0&&(r=" and "),r+=1==e[1]?"a ":t[e[1]]+" ",r+=e[0]+(1==e[1]?"-year-old, ":"-year-olds, "),i==n.length-2&&(r=r.slice(0,-2)+" "),r}),function(e,t){return e+t},""),i=i.slice(0,-2)+".",e.familyString=i};e.$watch("profile.persons",s,!0)}]).config(["$routeProvider","$locationProvider",function(e,t){t.html5Mode({enabled:!0,requireBase:!1}).hashPrefix("!")}]).value("CONSTANTS",{HASHKEYS:["info","pref","network","doctor","health"],HASHREQS:[["persons","zip","fip","income","state","size"],["preference"],["preference"],["providers"],["healthcost"]]});